!function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&c(t)&&e instanceof t},i=function(e){return"number"==typeof e},o=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},c=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},a=function(e){return"string"==typeof e},u=function(e,t){var r=t.indexOf(e);return-1!==r?r:null},s=function(e){return e.replace(/[-_.](\w)/g,(function(e,t){return l(t)}))},f=function(e){return e.toLowerCase()},l=function(e){return e.toUpperCase()},p=function(e){return e.length},v=function(e,t){return c(t[0])&&e<t[0]?t[0]:c(t[1])&&e>t[1]?t[1]:e},d=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},h=function(e){return p(g(e))},g=function(e){return Object.keys(e)},y=function e(r){if(t(r))return r.map((function(t){return e(t)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(r))return d(r);if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},m=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,f=p(i);s<f;++s)for(var l in i[s])if(c(u[l]))if(t(u[l])&&t(i[s][l])){u[l]=[].concat(u[l]);for(var v=0,d=p(i[s][l]);v<d;++v)e(i[s][l][v],u[l])||u[l].push(i[s][l][v])}else o(u[l])&&o(i[s][l])?u[l]=r({},u[l],i[s][l]):u[l]=i[s][l];else u[l]=i[s][l];return u},b=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},k=document,w=window,x=k.body,E=k.documentElement,$=function(e,t,r){if(void 0===r&&(r=!0),!M(e,t))return null;var n=e.getAttribute(t);return r?y(n):n},A=function(e){return e.firstElementChild||null},L=function(e,t){var r=e.children;return i(t)?r[t]||null:r||[]},T=function(e,t){void 0===t&&(t=!0);var r=(O(e,"className")||"").trim();return t?r.split(/\s+/).filter((function(e){return""!==e})):r},K=function(e,t,r){void 0===r&&(r=!0);var n=$(e,"data-"+t,r),i=(n+"").trim();return r&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(n))?i:n},_=function(e,t){return(t||k).querySelector(e)},S=function(e,t){return(t||k).querySelectorAll(e)},P=function(e){return f(e&&e.nodeName||"")||null},q=function(e,t){return e["next"+(t?"":"Element")+"Sibling"]||null},H=function(e,t){return t?e.closest(t)||null:e.parentNode||null},C=function(e,t){return e["previous"+(t?"":"Element")+"Sibling"]||null},R=function(e,t,r){void 0===r&&(r=!0);var n=w.getComputedStyle(e).getPropertyValue(t);return r&&(n=y(n)),n||""===n||0===n?n:null},O=function(e,t){return N(e,t)&&e[t]||null},D=function(e,t){void 0===t&&(t=!0);var r="textContent";if(!N(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null},M=function(e,t){return e.hasAttribute(t)},U=function(e,t){return e.classList.contains(t)},W=function(e,t){return null!==H(e,t)},N=function(e,t){return t in e},z=function(e){return e===w},B=function(e,t){return e.removeAttribute(t),e},I=function(e,t){return e.classList.remove(t),e},X=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.remove(t)})),e;if(o(r)){for(var n in r)r[n]&&e.classList.remove(n);return e}return e.className="",e},V=function(e,t){return B(e,"data-"+t)},F=function(e){var t=H(e);return e.remove(),t},J=function(e,t){return e.style[s(t)]=null,e},Y=function(e,t,r){return!0===r&&(r=t),e.setAttribute(t,b(r)),e},G=function(e,t){return e.append(t),t},Q=function(e,t){return e.classList.add(t),e},Z=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.add(t)})),e;if(o(r))for(var n in r)r[n]?e.classList.add(n):e.classList.remove(n);return e.className=r,e},ee=function(e,r,n){return(t(n)||o(n))&&(n=function(e){return JSON.stringify(e)}(n)),Y(e,"data-"+r,n)},te=function(e,t,r){return e=a(e)?k.createElement(e):e,o(t)&&(r=t,t=!1),a(t)&&re(e,t),o(r)&&function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?Y(e,n,r):B(e,n)}(e,r),e},re=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="innerHTML";return N(e,n)&&(e[n]=r?t.trim():t),e},ne=function(e,t){return H(e).insertBefore(t,q(e,!0)),t},ie=function(e,t){return H(e).insertBefore(t,e),t},oe=function(e,t,r){return i(r)&&(r+="px"),e.style[s(t)]=b(r),e},ce=function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?oe(e,n,r):J(e,n);return e},ae=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="textContent";return N(e,n)&&(e[n]=r?t.trim():t),e},ue=function(e,t,r){return e.classList.toggle(t,r),e},se=w.location,fe={},le=function(e,t,r,n){t.dispatchEvent(function(e,t,r){return r&&c(fe[e])?fe[e]:fe[e]=new Event(e,t)}(e,r,n))},pe=function(e,t,r){t.removeEventListener(e,r)},ve=function(e){return e&&e.preventDefault()},de=function(e){return e&&e.stopPropagation()},he=function(e,t,r){e.forEach((function(e){return pe(e,t,r)}))},ge=function(e,t,r,n){void 0===n&&(n=!1),t.addEventListener(e,r,n)},ye=function(e,t,r,n){void 0===n&&(n=!1),e.forEach((function(e){return ge(e,t,r,n)}))},me=":scope>[tabindex]:not(.not\\:active)";function be(e){e&&r(e.focus)&&e.focus()}function ke(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowLeft"===n||"End"===n?(be([].slice.call(S(me,r)).pop()),t=!0):"ArrowRight"!==n&&"Home"!==n||(be(_(me,r)),t=!0);t&&(ve(e),de(e))}}}function we(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&U(t,"not:active");)t=q(t);for(r=C(i);r&&U(r,"not:active");)r=C(r);"ArrowLeft"===o?(be(r),n=!0):"ArrowRight"===o?(be(t),n=!0):"End"===o?(be([].slice.call(S(me,H(i))).pop()),n=!0):"Home"===o&&(be(_(me,H(i))),n=!0),n&&(ve(e),de(e))}}}var xe=te("dialog"),Ee=te("form","",{method:"dialog"}),$e=te("template");function Ae(e){var t=this;return pe(e.type,t,Ae),t.x(y(t.returnValue))}function Le(e){var t=this;return pe(e.type,t,Le),t.v(y(t.returnValue))}function Te(e){var t;for(re(Ee,""),a(e)?(re($e,e.trim()),e=[].concat($e.content.childNodes)):e=[].concat(e);t=e.shift();)G(Ee,t);xe.showModal(),xe.returnValue=null;var n=_("[autofocus]",Ee);return n&&(r(n.focus)&&n.focus(),r(n.select)&&n.select()),new Promise((function(e,t){xe.v=e,xe.x=t,ge("cancel",xe,Ae),ge("submit",xe,Le)}))}function Ke(){var e=this,t=H(e.form);t.returnValue=e.value,le("reset"===e.type?"cancel":"close",t),t.open&&t.close()}function _e(e){var t,r,n=e.key;"ArrowLeft"===n||"ArrowUp"===n?((r=C(this))&&r.focus(),ve(e)):"ArrowDown"!==n&&"ArrowRight"!==n||((t=q(this))&&t.focus(),ve(e))}G(x,xe),G(xe,Ee);var Se=te("p"),Pe=te("p","",{role:"group"}),qe=te("button","OK",{type:"submit",value:"true"});ge("keydown",qe,_e),ge("click",qe,Ke),G(Pe,qe),Te.alert=function(e){return re(Se,e),Te([Se,Pe])};var He=te("p"),Ce=te("p","",{role:"group"}),Re=te("button","OK",{type:"submit",value:"true"}),je=te("button","Cancel",{type:"reset",value:"false"});ge("click",je,Ke),ge("click",Re,Ke),ge("keydown",je,_e),ge("keydown",Re,_e),G(Ce,Re),G(Ce,je),Te.confirm=function(e){return re(He,e),Te([He,Ce])};var Oe=te("p"),De=te("input",!1,{autofocus:!0,type:"text"}),Me=te("p"),Ue=te("p","",{role:"group"}),We=te("button","OK",{type:"submit",value:""}),Ne=te("button","Cancel",{type:"reset",value:"false"});function ze(){We.value=this.value}ge("click",Ne,Ke),ge("click",We,Ke),ge("input",De,ze),ge("keydown",Ne,_e),ge("keydown",We,_e),ge("keyup",De,ze),G(Ue,We),G(Ue,Ne),G(Me,De),Te.prompt=function(e,t){return re(Oe,e),De.value=We.value=t,Te([Oe,Me,Ue])};var Be=function(e,t){var r;return function(){var n=arguments,i=this;r&&clearTimeout(r),r=setTimeout((function(){return e.apply(i,n)}),t)}},Ie=function(e,t){return function(){var r=arguments,n=this;setTimeout((function(){return e.apply(n,r)}),t)}},Xe=function(e){return z(e)?[e.innerWidth,e.innerHeight]:[e.offsetWidth,e.offsetHeight]},Ve=function(e,t){return e.scrollLeft=t[0],e.scrollTop=t[1],e};function Fe(e){var t={};return e.hooks=t,e.fire=function(r,n){return c(t[r])?(t[r].forEach((function(t){return t.apply(e,n)})),e):e},e.off=function(r,n){if(!c(r))return t={},e;if(c(t[r]))if(c(n)){for(var i=0,o=t[r].length;i<o;++i)if(n===t[r][i]){t[r].splice(i,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,n){return c(t[r])||(t[r]=[]),c(n)&&t[r].push(n),e},e}var Je="Enter",Ye="Escape",Ge="‌";function Qe(e){var t=k.createRange();t.selectNodeContents(e);var r=w.getSelection();r.removeAllRanges(),r.addRange(t)}function Ze(r,i){void 0===i&&(i={});var o=this;if(!r)return o;if(r.OP)return r.OP;if(!n(o,Ze))return new Ze(r,i);var c=Fe(o),a=c.fire;function u(){return[y(s()),o.options]}function s(){if(xe){for(var e=[],t=0,n=p($e);t<n;++t)v($e[t])&&e.push(l($e[t]));return e}var i=r.value;return""!==i?i:null}function l(e){var t=e.value||D(e);return""!==t?t:null}function v(e){return M(e,"selected")}function g(e){B(e,"selected"),e.selected=!1}function A(e){I(e,J+"selected")}function K(e){Y(e,"selected",!0),e.selected=!0}function _(e){Q(e,J+"selected")}function S(e){e=e||Ge,Se.title=e.replace(/<.*?>/g,""),re(Se,e)}function q(e){if(xe)for(var n,i=function(e){return t(e)?e:[e]}(n),o=0,c=p($e);o<c;++o)n=l($e[o]),i.includes(y(n))?K($e[o]):g($e[o]);else r.value=e}c.hooks,o.state=i=m({},Ze.state,i),o.options={},o.source=r,Ze.instances[r.id||r.name||h(Ze.instances)]=o,r.OP=o;var C=i.class,j=C+"__",O=C+"--",W=j+"input",X=j+"option",J=X+"--",Z=j+"options",ie=j+"value",se=j+"values",fe=te(r,{class:j+"source",tabindex:-1}),le="input"===P(fe)?te("span","",{class:W}):null,de=le?r.placeholder:"",me=te("span",de),be=te("span","",{contenteditable:"",tabindex:0}),ke=function(){return fe.disabled},we=L(fe),xe=fe.multiple,Ee=0,$e=fe.options,Ae=i.parent||k,Le="input"===P(fe)?0:fe.size,Te=fe.title,Ke=s(),_e=te("div",{class:C,tabindex:!le&&!ke()&&0,title:Te}),Se=te("div",Ge,{class:se}),Pe=fe.list,qe=0,He=0,Ce=te("div",{class:Z,tabindex:-1}),Re=[],je=!1,Oe=!1;function De(){I(_e,O+"focus"),a("blur",u())}function Me(){Q(_e,O+"focus"),a("focus",u())}function Ue(){Q(_e,O+"open"),a("enter",u())}function We(){xe||Le||(I(_e,O+"open"),a("exit",u()))}function Ne(){qe=d(R(_e,"border-bottom-width")),He=d(R(_e,"border-top-width")),bt(_e)}function ze(e){ue(_e,O+"open",e);var t=tt();return a(t?"enter":"exit",u()),t}function et(e,t,r,n){return te("span",e,{class:ie+" "+n,"data-index":t,"data-value":r}).outerHTML}function tt(){return U(_e,O+"open")}function rt(){(le?be:_e).focus()}function nt(e){if($e&&!ke()){var t,r,n,o=[],c=this,s=c.$,f=Ke;if(Ee=c.i,Ke=c.v,e&&e.isTrusted&&rt(),ve(e),xe&&(je||Oe)){!function(e){return U(e,J+"selected")}(c)?(K(s),_(c)):(g(s),A(c));for(var l,d=0,h=p($e);d<h;++d)v($e[d])&&(t=D(l=Re[d]),r=l.i,n=l.v,o.push(et(t,r,n,T(l,!1))));return S(o.join("<span>"+i.join+"</span>")),void a("change",u())}t=D(c),r=c.i,n=c.v,t&&le&&(re(me,Ge),ae(be,t)),S(et(t,r,n,T(c,!1))),le&&(Qe(be),q(t)),Re.forEach((function(e){Ke===e.v?(K(e.$),_(e)):(g(e.$),A(e))})),Ke!==f&&a("change",u())}}function it(e){De()}function ot(e){if(!ke()){if(Ee=fe.selectedIndex,Le)return Ue();le?be.focus():ze()&&Ne()}}function ct(e){Ee=fe.selectedIndex,Me()}function at(e){if($e){je=e.ctrlKey,Oe=e.shiftKey;var t=e.key,r=Ee,n=Re[r],i=function(e){return U(e,J+"disabled")},o=function(e){return nt.call(e)},c=tt();if("ArrowDown"===t){for(;(n=Re[++r])&&(i(n)||n.hidden););n&&(o(n),ze(c)),ve(e)}else if("ArrowUp"===t){for(;(n=Re[--r])&&(i(n)||n.hidden););n&&(o(n),ze(c)),ve(e)}else if("End"===t){for(r=p($e);(n=Re[--r])&&(i(n)||n.hidden););n&&(o(n),ze(c)),ve(e)}else if(Je===t)n&&o(n),ze(),ve(e);else if(Ye===t)!Le&&We();else if("Home"===t){for(r=-1;(n=Re[++r])&&(i(n)||n.hidden););n&&(o(n),ze(c)),ve(e)}else"Tab"===t&&(n&&o(n),!Le&&We());tt()&&!je&&!Oe&&Ne()}}function ut(){je=Oe=!1}function st(){De()}function ft(){if($e){var e,t,r=D(this);Ee=-1,Qe(this);for(var n=0,i=p($e);n<i;++n)e=$e[n],t=Re[n],r===D(e)?(Ee=n,K(e),_(t)):(g(e),A(t));Me(),ze()&&Ne()}}xe&&!Le&&(fe.size=Le=i.size),le&&Pe&&(we=L(Pe),$e=Pe.options,Le=null,Ke&&(re(me,Ge),ae(be,Ke))),le&&(G(le,be),G(le,me)),G(_e,le||Se),ne(fe,_e);var lt=Be((function(e,t){var r,n=D(e),i=t&&1===p(t);if(null===n){re(me,de);for(var o=0,c=p(Re);o<c;++o)re(r=Re[o],D(r)),r.hidden=!1}else if(re(me,Ge),i||"Backspace"===t){var a;n=f(n);for(var u,s=0,l=p(Re);s<l;++s)g((r=Re[s]).$),A(r),(u=D(r))&&f(u).includes(n)?(!a&&(a=r),re(r,u.replace(RegExp(n.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(function(e){return"<mark>"+e+"</mark>"}))),r.hidden=!1):(re(r,u),r.hidden=!0);a&&(Ee=a.i,K(a.$),_(a))}Je!==t&&Ye!==t&&"Tab"!==t&&(Ue(),Ne())}),0);function pt(e){var t=e.key;at(e),lt(this,t)}function vt(){ut()}var dt=Ie((function(e,t){var r=D(e);re(t,null!==r?Ge:de),ae(e,r),Qe(e)}),0);function ht(){dt(be,me)}function gt(e){var t=e.target;if(t!==_e)for(;(t=H(t))&&_e!==t;);_e!==t&&We()}function yt(){tt()&&bt(_e,1)}function mt(r,n){if("optgroup"!==P(r)){var i=$(r,"value",!1),c=i,a=D(r),u=r.title,s=te("a",a,{class:X,title:u||a});i=i||a,s.i=Ee,s.$=r,s.v=i,function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?ee(e,n,r):V(e,n)}(s,{index:Ee,value:c}),o.options[i]=a,r.disabled?Q(s,J+"disabled"):ge("click",s,nt),G(n,s),Re.push(s),""===c&&(i=null),t(Ke)&&e(i,Ke)||i===Ke?(Q(s,J+"selected"),S(et(a,Ee,c,T(s,!1))),K(r)):g(r),++Ee}else{var f=te("span",{class:X+"-group"+(r.disabled?" "+J+"disabled":"")}),l=L(r);f.title=r.label;for(var v=0,d=p(l);v<d;++v)mt(l[v],f);G(n,f)}}function bt(e,t){if(!Le){var r=function(e){var t,r,n,i,o,c,a;return z(e)?(i=e.pageXOffset||E.scrollLeft||x.scrollLeft,o=e.pageYOffset||E.scrollTop||x.scrollTop,n=e.innerWidth,t=e.innerHeight):(i=(r=e.getBoundingClientRect()).left,o=r.top,n=r.width,t=r.height,c=r.right,a=r.bottom),[i,o,n,t,c,a]}(e),n=r[0],i=r[1],o=r[2],c=r[3],s=Xe(w)[1],f=s-i-c;ce(Ce,{bottom:"",left:n,"max-height":f,top:i+c-He,width:o}),f<(s-c)/2?(ce(Ce,{top:"",bottom:s-i-qe,"max-height":(f=i)+He}),I(e,O+"down"),Q(e,O+"up")):(I(e,O+"up"),Q(e,O+"down"))}if(!t){var l=Re.find((function(e){return U(e,J+"selected")}));if(l){var p=Xe(l)[1],v=Xe(Ce)[1],d=[(m=l).offsetLeft,m.offsetTop],h=d[0],g=d[1],y=function(e){return[e.scrollLeft,e.scrollTop]}(Ce)[1];g<y?Ve(Ce,[h,g]):g+p-v>y&&Ve(Ce,[h,g+p-v])}}var m;a("fit",u())}ye(["resize","scroll"],w,yt),ge("click",Ae,gt),ge("focus",fe,rt),ge("click",_e,ot),le?(ge("blur",be,st),ge("focus",be,ft),ge("keydown",be,pt),ge("keyup",be,vt),ge("paste",be,ht)):(ge("blur",_e,it),ge("focus",_e,ct),ge("keydown",_e,at),ge("keyup",_e,ut));var kt=p(we);if(kt){G(_e,Ce);for(var wt=0;wt<kt;++wt)mt(we[wt],Ce);if(Le){var xt=Re[0],Et=Xe(xt)[1]*Le;oe(Ce,"max-height",Et)}}return Le&&(Q(_e,O+"down"),Q(_e,O+"open")),o.get=function(e){void 0===e&&(e=!0);var t=s();return e?y(t):t},o.pop=function(){return r.OP?(delete r.OP,he(["resize","scroll"],w,yt),pe("click",Ae,gt),pe("focus",fe,rt),I(fe,j+"source"),pe("click",_e,ot),le?(pe("blur",be,st),pe("focus",be,ft),pe("keydown",be,pt),pe("keyup",be,vt),pe("paste",be,ht)):(pe("blur",_e,it),pe("focus",_e,ct),pe("keydown",_e,at),pe("keyup",_e,ut)),function(e){var t="textContent";N(e,t)&&(e[t]="")}(_e),F(_e),a("pop",u())):o},o.set=function(e){return $e?(q(b(e)),Re.forEach((function(e,t){var r=$e[t];ue(e,J+"selected",r&&v(r))})),a("change",u()),o):o},o.self=_e,o}function et(e){for(var t in Ze.instances)Ze.instances[t].pop(),delete Ze.instances[t];var r=S("input[list],select");r&&p(r)&&r.forEach((function(e){var t,r=T(e),n=new Ze(e,null!=(t=K(e,"state"))?t:{});Z(n.self,r)})),1===e&&w._.on("change",et)}Ze.instances={},Ze.state={class:"option-picker",join:", ",parent:null,size:5},Ze.version="1.3.4",w.OP=Ze;var tt=function(e,t){return void 0===t&&(t=""),e.replace(rt("["+t+nt.replace(/./g,"\\$&")+"]"),"\\$&")},rt=function(e,t){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,c(t)?t:"g"))},nt="!$^*()+=[]{}|:<>,.?/-",it="ArrowLeft",ot="Home",ct="Backspace",at="Tab";function ut(r,o){void 0===o&&(o={});var c=this;if(!r)return c;if(r.TP)return r.TP;if(!n(c,ut))return new ut(r,o);var s=function(){return r.disabled},l=function(){return r.readOnly},v=$(r,"placeholder"),d=$(r,"tabindex"),y=Fe(c);y.hooks;var b=y.fire;c.state=o=m({},ut.state,a(o)?{join:o}:o||{}),c.source=r,ut.instances[r.id||r.name||h(ut.instances)]=c,r.TP=c;var x,E,T,K=o.class,_=K+"__",S=K+"--",R=function(e){var t="form";return N(e,t)&&t===P(e.form)?e.form:H(e,t)}(r),j=te("div",{class:K,tabindex:!s()&&-1}),O=te("span",{class:_+"tag "+_+"input"}),M=te("input",{class:_+"copy",tabindex:-1,type:"text"}),z=te("span",{contenteditable:!s()&&"true",spellcheck:"false",style:"white-space:pre;"}),B=te("span"),V=te("span",{class:_+"tags"}),J=0,Y={};function ee(e,t){var r=u(e,c.tags);return t&&b("get.tag",[e,r]),i(r)?e:null}function re(){Y={};var e,t=L(V),r=p(t)-1;for(e=0;e<r;++e)U(t[e],_+"tag--selected")&&(Y[e]=t[e])}function oe(e,t){i(t)?(t=t<0?0:t,c.tags.splice(t,0,e)):c.tags.push(e),r.value=c.tags.join(o.join)}function ce(e,t){var r=te("span",{class:_+"tag",tabindex:!s()&&!l()&&0,title:e}),n=te("a",{class:_+"tag-x",href:"",tabindex:-1,target:"_top"});ge("click",n,qe),G(r,n),ge("click",r,Pe),ye(["blur","focus"],r,Te),W(V)&&(i(t)&&c.tags[t]?ie(L(V,t),r):ie(O,r))}function ue(t){if(t=t?t.split(o.join):[],W(j))for(var n,i,a;n=C(O);)fe(a=n.title),e(a,t)||(i=u(a,c.tags),b("change",[a,i]),b("let.tag",[a,i]));c.tags=[],r.value="";for(var s,f=0,l=o.max;f<l&&t[f];++f)""!==(s=$e(t[f]))&&(ce(s),oe(s),b("change",[s,f]),b("set.tag",[s,f]))}function se(e){var t=u(e,c.tags);i(t)&&t>=0&&(c.tags.splice(t,1),r.value=c.tags.join(o.join))}function fe(e){var t,r=u(e,c.tags);if(i(r)&&r>=0&&(t=L(V,r))){pe("click",t,Pe),he(["blur","focus"],t,Te);var n=A(t);n&&(pe("click",n,qe),F(n)),F(t)}}function le(e){F(M),e&&be("",1)}function me(e){G(j,M),M.value=c.tags.join(o.join),e&&(M.focus(),M.select())}function be(e,t){if(ae(z,e),ae(B,e?"":v),t){z.focus();var r=k.createRange(),n=w.getSelection();r.selectNodeContents(z),r.collapse(!1),n.removeAllRanges(),n.addRange(r)}}function ke(e){Ee(e,(function(){I(this,_+"tag--selected")}))}function we(e){Ee(e,(function(){Q(this,_+"tag--selected")}))}function xe(){if(!s()&&!l()){var e=Ae(D(z)).trim(),t=o.pattern;if(t&&e&&!rt(t,"").test(e))return b("not.tag",[e,-1]),void be(e,1);if(be(""),e=$e(e))if(ee(e))b("has.tag",[e,u(e,c.tags)]);else{ce(e),oe(e);var r=p(c.tags);b("change",[e,r]),b("set.tag",[e,r])}}}function Ee(e,t){var r,n=L(V),i=p(n)-1;for(r=0;r<i;++r)e!==n[r]&&t.call(n[r],r)}function $e(e){return Ae(c.f(e)).trim()}function Ae(e){return e=e||"",o.escape.forEach((function(t){e=e.split(t).join("")})),e}function Le(e){"blur"===e.type?(ke(),X(j,[S+"focus",S+"focus-self"])):Z(j,[S+"focus",S+"focus-self"])}function Te(e){if(!l()){Y={};var t=this,r=e.type,n=t.title,i=c.tags,o=u(n,i),a=_+"tag--";"blur"===r?(!x&&!E||E&&T)&&(ke(t),I(t,a+"selected"),X(j,[S+"focus",S+"focus-tag"])):(Q(t,a+"selected"),Z(j,[S+"focus",S+"focus-tag"]),J=o,Y[o]=t),b(r+".tag",[n,o])}}function Ke(e){var t=c.tags,r=e.type,n=_+"text--";I(j,S+"focus-tag"),"blur"===r?(I(O,n+"focus"),X(j,[S+"focus",S+"focus-input"]),xe()):(Q(O,n+"focus"),Z(j,[S+"focus",S+"focus-input"]),ke(O)),b(r,[t,p(t)])}function _e(e){"blur"===e.type?I(j,S+"focus"):Q(j,S+"focus")}function Se(e){e&&j===e.target&&z.focus();var t=c.tags;b("click",[t,p(t)])}function Pe(){var e=this.title,t=c.tags;b("click.tag",[e,u(e,t)])}function qe(e){if(!s()&&!l()){var t=H(this).title,r=u(t,c.tags);fe(t),se(t),be("",1),b("change",[t,r]),b("click.tag",[t,r]),b("let.tag",[t,r])}ve(e)}function He(e){var t=e.type;"copy"===t?Ie((function(){return le(1)}))():"cut"===t?(!l()&&ue(""),Ie((function(){return le(1)}))()):"paste"===t&&Ie((function(){!l()&&ue(M.value),le(1)}))(),Ie((function(){var e=c.tags;b(t,[e,p(e)])}),1)()}function Ce(){ke(),I(j,S+"focus-self")}function Re(){z.focus()}function je(e){if(!s()&&!l()){c.tags;var t,r,n,i,o,a,u=e.key,f=x=e.ctrlKey,v=E=e.shiftKey,d=_+"tag--";if(T=at===u,!f){if(!v&&(ct===u||"Delete"===u)){re(),a=Y;var h=ct===u;for(r in a)fe(o=(t=a[r]).title),se(o);return J=+(g(a)[0]||0),(t=L(V,h?J-1:J))?O===t?be("",1):t.focus():be("",1),void ve(e)}if(ot===u)return void((t=L(V,0))&&(t.focus(),ve(e)));if("End"===u&&(t=L(V,p(c.tags)-1)))return t.focus(),void ve(e);if(it===u){if(t=L(V,J-1)){var y=U(t,d+"selected");return t.focus(),ve(e),v?(n=q(t),void(y&&I(n,d+"selected"))):void ke(t)}if(!v)return void ke(L(V,0))}if("ArrowRight"===u&&(t=L(V,J+1))){var m=U(t,d+"selected");return O!==t||v?t.focus():be("",1),ve(e),v?(i=C(t),void(m&&I(i,d+"selected"))):void ke(t)}}"a"===u&&(me(1),we(),re(),ve(e))}}function Oe(t){de(t),l()&&at!==t.key&&ve(t);var r,n=o.escape,i=C(O),a=p(c.tags),u=o.max,s=$e(D(z)),f=t.key,d=x=t.ctrlKey,h="Enter"===f;E=t.shiftKey;var g=T=at===f;if(h&&(f="\n"),g&&(f="\t"),Ie((function(){var r=$e(D(z));ae(B,r?"":v),e(function(e){var t,r=w.getSelection();if(r.rangeCount>0)return(t=r.getRangeAt(0).cloneRange()).collapse(!0),t.setStart(e,0),(t+"").slice(-1)}(z),n)&&(a<u?xe():(be(""),b("max.tags",[u])),ve(t))}))(),""===s&&ot===f&&(r=L(V,0)))return r.focus(),void ve(t);if(""===s&&"End"===f&&(r=L(V,p(c.tags)-1)))return r.focus(),void ve(t);if(d&&""===s&&"a"===f)return me(1),we(),re(),void ve(t);if(e(f,n))return a<u?xe():(be(""),b("max.tags",[u])),void ve(t);if(!g){if(!d&&h)return Ue()&&R&&R.dispatchEvent(new Event("submit",{cancelable:!0})),void ve(t);if(i&&""===s&&!l()){if(ct===f)return fe(r=c.tags[a-1]),se(r),b("change",[r,a-1]),b("let.tag",[r,a-1]),void ve(t);if(it===f)return void i.focus()}}}function De(){x=E=!1}function Me(){Ie((function(){s()||l()||D(z).split(o.join).forEach((function(t){e(t,c.tags)||(ce(t),oe(t))})),be("")}))()}function Ue(e){if(!s()){var t=o.min;return xe(),t>0&&p(c.tags)<t?(be("",1),b("min.tags",[t]),void ve(e)):1}}return be(""),G(j,V),G(O,z),G(O,B),G(V,O),Q(r,_+"source"),ne(r,j),te(r,{tabindex:-1}),ge("blur",j,Ce),ge("click",j,Se),ge("focus",r,Re),ge("keydown",j,je),ge("keydown",z,Oe),ge("keyup",j,De),ge("paste",z,Me),ye(["blur","focus"],j,_e),ye(["blur","focus"],M,Le),ye(["blur","focus"],z,Ke),ye(["copy","cut","paste"],M,He),R&&ge("submit",R,Ue),c.blur=function(){return!s()&&z.blur(),c},c.click=function(){return j.click(),Se(),c},c.f=function(e){return f(e||"").replace(/[^ a-z\d-]/g,"").trim()},c.focus=function(){return s()||be(D(z),1),c},c.get=function(e){return s()?null:ee(e,1)},c.input=z,c.let=function(e){if(!s()&&!l()){var r=o.min;if(e)if(t(e))e.forEach((function(e){if(r>0&&p(c.tags)<r)return b("min.tags",[r]),c;fe(e),se(e)}));else{if(r>0&&p(c.tags)<r)return b("min.tags",[r]),c;fe(e),se(e)}else ue("")}return c},c.pop=function(){if(!r.TP)return c;delete r.TP;var e=c.tags;return I(r,_+"source"),pe("blur",j,Ce),pe("click",j,Se),pe("focus",r,Re),pe("keydown",j,je),pe("keydown",z,Oe),pe("keyup",j,De),pe("paste",z,Me),he(["blur","focus"],j,_e),he(["blur","focus"],M,Le),he(["blur","focus"],z,Ke),he(["copy","cut","paste"],M,He),R&&pe("submit",R,Ue),e.forEach(fe),te(r,{tabindex:d}),F(j),b("pop",[e])},c.self=j,c.set=function(e,r){if(!e)return c;if(!s()&&!l())if(t(e))ue(e.join(o.join));else{var n=c.tags,i=o.max;ee(e)?b("has.tag",[e,u(e,n)]):p(n)<i?(ce(e,r),oe(e,r)):b("max.tags",[i])}return c},c.source=c.output=r,c.state=o,c.tags=[],ue(r.value),c}function st(e){for(var t in ut.instances)ut.instances[t].pop(),delete ut.instances[t];var r=S(".lot\\:field.type\\:query input");r&&p(r)&&r.forEach((function(e){var t,r=T(e),n=new ut(e,null!=(t=K(e,"state"))?t:{});Z(n.self,r)})),1===e&&(w._.on("change",st),w.TP=ut)}ut.instances={},ut.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null},ut.version="3.4.11";var ft=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,f=p(i);s<f;++s)for(var l in i[s])if(c(u[l]))if(t(u[l])&&t(i[s][l])){u[l]=[].concat(u[l]);for(var v=0,d=p(i[s][l]);v<d;++v)e(i[s][l][v],u[l])||u[l].push(i[s][l][v])}else o(u[l])&&o(i[s][l])?u[l]=r({},u[l],i[s][l]):u[l]=i[s][l];else u[l]=i[s][l];return u},lt=document,pt=window,vt=lt.body,dt=lt.documentElement;function ht(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function gt(e,i){void 0===i&&(i={});var o=this;if(!e)return o;if(e.TE)return e.TE;if(!n(o,gt))return new gt(e,i);o.state=i=ft({},gt.state,a(i)?{tab:i}:i||{}),o.self=o.source=e,gt.instances[e.id||e.name||h(gt.instances)]=o,e.TE=o;var u=/^([\s\S]*?)$/,s=function(){return e.disabled},f=function(){return e.readOnly},l=function(){return e.value.replace(/\r/g,"")};return o.value=l(),o.get=function(){return!s()&&ht(l())||null},o.let=function(){return e.value=o.value,o},o.set=function(t){return s()||f()||(e.value=t),o},o.$=function(){return new gt.S(e.selectionStart,e.selectionEnd,l())},o.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=p(l()),n=e.scrollHeight),c(r)&&c(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),o},o.blur=function(){return e.blur(),o},o.select=function(){if(s()||f())return e.focus(),o;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i,c,a,u,l=p(r),v=o.$(),d=v.start,h=v.end;if(i=pt.pageXOffset||dt.scrollLeft||vt.scrollLeft,c=pt.pageYOffset||dt.scrollTop||vt.scrollTop,a=e.scrollLeft,u=e.scrollTop,0===l)r[0]=d,r[1]=h;else if(1===l){if(!0===r[0])return e.focus(),e.select(),o;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=a,e.scrollTop=u,pt.scroll(i,c),o},o.match=function(e,n){var i=o.$(),c=i.after,a=i.before,u=i.value;if(t(e)){var s=[a.match(e[0]),u.match(e[1]),c.match(e[2])];return r(n)?n.call(o,s[0]||[],s[1]||[],s[2]||[]):[!!s[0],!!s[1],!!s[2]]}var f=u.match(e);return r(n)?n.call(o,f||[]):!!f},o.replace=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return-1===r?c=c.replace(e,t):1===r?i=i.replace(e,t):a=a.replace(e,t),o.set(c+a+i).select(c=p(c),c+p(a))},o.insert=function(e,t,r){var n=u;return r&&o.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),o.replace(n,e,t)},o.wrap=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return r?o.replace(u,e+"$1"+t):o.set(c+e+a+t+i).select(c=p(c+e),c+p(a))},o.peel=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;e=tt(e),t=tt(t);var u=rt(e+"$",""),s=rt("^"+t,"");return r?o.replace(rt("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):u.test(c)&&s.test(i)?(c=c.replace(u,""),i=i.replace(s,""),o.set(c+a+i).select(c=p(c),c+p(a))):o.select()},o.pull=function(e,t){void 0===t&&(t=!0);var r=o.$(),n=r.length,a=r.value;return e=tt(c(e)?e:i.tab),n?t?o.replace(rt("^"+e,"gm"),""):o.insert(a.split("\n").map((function(t){return rt("^("+e+")*$","").test(t)?t:t.replace(rt("^"+e,""),"")})).join("\n")):o.replace(rt(e+"$",""),"",-1)},o.push=function(e,t){void 0===t&&(t=!1);var r=o.$().length;return e=c(e)?e:i.tab,r?o.replace(rt("^"+(t?"":"(?!$)"),"gm"),e):o.insert(e,-1)},o.trim=function(e,t,r,n,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var c=o.$(),a=c.before,u=c.value,s=c.after,f=ht(a,1),l=ht(s,-1);return a=!1!==e?ht(a,1)+(f||!i?e:""):a,s=!1!==t?(l||!i?t:"")+ht(s,-1):s,!1!==r&&(u=ht(u,-1)),!1!==n&&(u=ht(u,1)),o.set(a+u+s).select(a=p(a),a+p(u))},o.pop=function(){return e.TE?(delete e.TE,o):o},o.state=i,o}gt.esc=tt,gt.instances={},gt.state={tab:"\t"},gt.S=function(e,t,r){var n=this,i=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=p(i),n.start=e,n.value=i,n.toString=function(){return i}},gt.version="3.3.10",gt.x=nt;var yt={_history:[],_historyState:-1,history:function(e){var t=this;return c(e)?c(t._history[e])?t._history[e]:null:t._history},loss:function(e){var t,r=this;return!0===e?(r._history=[],r._historyState=-1,[]):(t=r._history.splice(c(e)?e:r._historyState,1),r._historyState=v(r._historyState-1,[-1]),t)},record:function(e){var t=this,r=t.$(),n=r.end,i=r.start,o=t._history[t._historyState]||[],a=[t.self.value,i,n];return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]||(++t._historyState,t._history[c(e)?e:t._historyState]=a),t},redo:function(){var e,t=this;return t._historyState=v(t._historyState+1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])},undo:function(){var e,t=this;return t._historyState=v(t._historyState-1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])}};function mt(e,t){return new Promise((function(r,n){var i=w[e].apply(w,t);return i?r(i):n(i)}))}var bt={source:{pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},type:null}};["alert","confirm","prompt"].forEach((function(e){bt.source[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return mt(e,r)}}));var kt={toggle:function(e,r,n,i){void 0===i&&(i=!1),r||""===r||(r=e);var o=this,c=o.$(),u=c.after,s=c.before,f=c.value,l=p(r),v=p(e);return n&&r===f.slice(-l)&&e===f.slice(0,v)||r===u.slice(0,l)&&e===s.slice(-v)?o.peel(e,r,n):(!1!==i&&(a(i)?i=[i,i]:t(i)||(i=["",""]),isSet(i[1])||(i[1]=i[0]),o.trim(i[0],i[1])),o.wrap(e,r,n))}};function wt(t,r){var n,i,o=r.state.source.tab||r.state.tab||"\t",c=r.state.source.pairs||{},a=function(e){return Object.values(e)}(c),u=t.key,s=t.queue,f=t+"";if(s.Alt||s.Control)return!0;if(" "===f){var l=r.$(),p=l.after,v=l.before,d=l.value;return n=c[i=v.slice(-1)],!(!d&&n&&i&&n===p[0])||(r.wrap(" "," "),!1)}if("Enter"===f){var h=r.$(),g=h.after,y=h.before,m=h.value,b=y.split("\n").pop().match(/^(\s+)/),k=b&&b[1]||"";if(!m){if(g&&y&&(n=c[i=y.slice(-1)])&&n===g[0])return r.wrap("\n"+k+(i!==n?o:""),"\n"+k).record(),!1;if(k)return r.insert("\n"+k,-1).record(),!1}return!0}if("Backspace"===f){var w=r.$(),x=w.after,E=w.before,$=w.value;x.split("\n")[0];var A=E.split("\n").pop(),L=A.match(/^(\s+)/),T=L&&L[1]||"";return n=c[i=E.slice(-1)],"\\"===i?!0:$?!(x&&E&&n&&n===x[0]&&!E.endsWith("\\"+i))||(r.record().peel(i,n).record(),!1):(n=c[i=E.trim().slice(-1)])&&i&&(x.startsWith(" "+n)&&E.endsWith(i+" ")||x.startsWith("\n"+T+n)&&E.endsWith(i+"\n"+T))?(r.trim("","").record(),!1):A.endsWith(o)?(r.pull(o).record(),!1):!(x&&E&&!E.endsWith("\\"+i)&&n===x[0]&&i===E.slice(-1))||(r.peel(i,n).record(),!1)}var K=r.$(),_=K.after,S=K.before,P=K.start,q=K.value;if("\\"===(i=S.slice(-1)))return!0;if(n=e(_[0],a)?_[0]:c[i],!q&&_&&S&&n&&u===n)return r.select(P+1).record(),!1;for(i in c){if(n=c[i],u===i&&n)return r.wrap(i,n).record(),!1;if(u===n){if(q)return r.record().wrap(i,n).record(),!1;break}}return!0}function xt(e,t){var r=t.state.source.tab||t.state.tab||"\t";e.key,e.queue;var n=e+"";return"Control-]"===n?(t.push(r).record(),!1):"Control-["!==n||(t.pull(r).record(),!1)}function Et(e,t){e.key;var r=e.queue;if(r.Control&&r.Enter){var n=t.$(),i=n.after,o=n.before,c=n.end,a=n.start,u=n.value,s=i.split("\n").shift(),f=o.split("\n").pop(),l=f.match(/^(\s+)/),v=l&&l[1]||"";if(o||i)return r.Shift?(t.select(a-p(f)).wrap(v,"\n").insert(u).record(),!1):(t.select(c+p(s)).wrap("\n"+v,"").insert(u).record(),!1)}return!0}function $t(e,t){var r=e+"";return"Control-y"===r?(t.redo(),!1):"Control-z"!==r||(t.undo(),!1)}function At(t,r){t.key;var n=t+"";if(!t.queue.Control)return!0;var i,o,c,a=r.$(),u=a.after,s=a.before,f=a.end,l=a.start,v=a.value,d=r.state.source.pairs||{},h=[];if(v){for(i in d)(o=d[i])&&h.push("(?:\\"+i+"(?:\\\\.|[^\\"+i+(o!==i?"\\"+o:"")+"])*\\"+o+")");if(h.push("\\w+"),h.push("\\s+"),h.push("[\\s\\S]"),"Control-ArrowLeft"===n)return(c=s.match(rt("("+h.join("|")+")$","")))?(r.insert("").select(l-p(c[0])).insert(v),r.record(),!1):(r.select(),!1);if("Control-ArrowRight"===n)return(c=u.match(rt("^("+h.join("|")+")","")))?(r.insert("").select(f+p(c[0])-p(v)).insert(v),r.record(),!1):(r.select(),!1)}var g=u.split("\n").shift(),y=s.split("\n").pop(),m=y.match(/^(\s+)/);if(m&&m[1],f+=p(g),l-=p(y),v=y+v+g,"Control-ArrowUp"===n){if(!e("\n",s))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"$2",1),r.replace(/(^|\n)([^\n]*?)$/,"",-1);var b=r.$();return s=b.before,l=b.start,y=s.split("\n").pop(),r.select(l-=p(y)).wrap(v,"\n"),r.select(l,l+p(v)),r.record(),!1}if("Control-ArrowDown"===n){if(!e("\n",u))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"",1),r.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var k=r.$();return u=k.after,f=k.end,g=u.split("\n").shift(),r.select(f+=p(g)).wrap("\n",v),f+=1,r.select(f,f+p(v)),r.record(),!1}return!0}var Lt=Be((function(e){return e.record()}),100);var Tt=bt,Kt=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,f=p(i);s<f;++s)for(var l in i[s])if(c(u[l]))if(t(u[l])&&t(i[s][l])){u[l]=[].concat(u[l]);for(var v=0,d=p(i[s][l]);v<d;++v)e(i[s][l][v],u[l])||u[l].push(i[s][l][v])}else o(u[l])&&o(i[s][l])?u[l]=r({},u[l],i[s][l]):u[l]=i[s][l];else u[l]=i[s][l];return u},_t=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},St=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},Pt="[\\w:.-]+",qt=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},Ht=function(e){return"</("+e+")>"},Ct="(?:\x3c!--([\\s\\S](?!--\x3e)*)--\x3e|<!((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)>|"+Ht(Pt)+"|<\\?((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)\\?>|"+qt(Pt)+"|"+function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?/?>"}(Pt)+")",Rt={};function jt(e){if(!e)return"";e=g(e).sort().reduce((function(t,r){return t[r]=e[r],t}),{});var t,r,n="";for(t in e)!1!==(r=e[t])&&null!==r&&(n+=" "+t,!0!==r&&(n+='="'+_t(St(r))+'"'));return n}function Ot(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}function Dt(e,t){var r=t.state,n=r.sourceXML.tab||r.tab||"\t",i=e.key,o=e.queue,c=e+"";if(o.Alt||o.Control)return!0;if(["-",">","/","?"," "].includes(i)){var a=t.$(),u=a.after,s=a.before,f=a.value,l=a.start;if("-"===i&&!f&&"<!-"===s.slice(-3))return t.wrap("- "," --"+(">"===u[0]?"":">")).record(),!1;if(">"===i||"/"===i){var v=rt(qt(Pt)+"$","").exec(s+">");if(!f&&v)return"/"===i?">"===u[0]?(t.trim("",!1).insert(" /",-1).select(t.$().start+1).record(),!1):(t.trim("",!1).insert(" />",-1).record(),!1):(u.startsWith("></"+v[1]+">")?t.select(l+1).record():u.startsWith("</"+v[1]+">")?t.insert(">",-1).record():t.wrap(">","</"+v[1]+(">"===u[0]?"":">")).record(),!1)}if("?"===i&&!f&&"<"===s.slice(-1))return t.wrap("?","?"+(">"===u[0]?"":">")).record(),!1;if(" "===c&&!f&&("--\x3e"===u.slice(0,3)&&"\x3c!--"===s.slice(-4)||"?>"===u.slice(0,2)&&"<?"===s.slice(0,2)&&/<\?\S*$/.test(s)))return t.wrap(" "," ").record(),!1}if("ArrowLeft"===c){var d=t.$(),h=d.before,g=d.start;if(!d.value){var y=rt(Ct+"$","").exec(h);if(y)return t.select(g-p(y[0]),g),!1}}if("ArrowRight"===c){var m=t.$(),b=m.after,k=m.start;if(!m.value){var w=rt("^"+Ct,"").exec(b);if(w)return t.select(k,k+p(w[0])),!1}}if("Enter"===c){var x=t.$(),E=x.after,$=x.before,A=x.value,L=$.split("\n").pop().match(/^(\s+)/),T=L&&L[1]||"",K=$.match(rt(qt(Pt)+"$",""));if(!A){if(/^[ \t]*-->/.test(E)&&/<!--[ \t]*$/.test($)||/^[ \t]*\?>/.test(E)&&/<\?\S*[ \t]*$/.test($))return t.trim().wrap("\n"+T,"\n"+T).record(),!1;if(K)return E.startsWith("</"+K[1]+">")?t.record().trim().wrap("\n"+T+n,"\n"+T).record():t.record().wrap("\n"+T+n,"\n"+T+"</"+K[1]+">").record(),!1}}if("Backspace"===c){var _=t.$(),S=_.after,P=_.before;if(!_.value){if("\x3c!--"===P.slice(-4))return t.replace(/<!--$/,"",-1),"--\x3e"===S.slice(0,3)&&t.replace(/^-->/,"",1),t.record(),!1;if(/^\s+-->/.test(S)&&/<!--\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;if(/<\?\S*$/.test(P))return t.replace(/<\?\S*$/,"",-1),"?>"===S.slice(0,2)&&t.replace(/^\?>/,"",1),t.record(),!1;if(/^\s+\?>/.test(S)&&/<\?\S*\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;var q=rt(Ct+"$",""),H=q.exec(P);if(H){if(" />"===P.slice(-3))return t.replace(/ \/>$/,"/>",-1).record(),!1;if("/>"===P.slice(-2))return t.replace(/\/>$/,">",-1).record(),!1;t.replace(q,"",-1);var C=H[0].slice(1).split(/\s+|>/)[0];return H[0]&&"/"!==H[0][1]&&S.startsWith("</"+C+">")&&t.replace(rt("^</"+C+">",""),"",1),t.record(),!1}if(rt(qt(Pt)+"\\n(?:"+tt(n)+")?$","").test(P)&&rt("^\\s*"+Ht(Pt),"").test(S))return t.trim().record(),!1}}if("Delete"===c){var R=t.$(),j=R.after;if(!R.value){if("--\x3e"===j.slice(0,3))return t.replace(/^-->/,"",1).record(),!1;if("?>"===j.slice(0,2))return t.replace(/^\?>/,"",1).record(),!1;var O=rt("^"+Ct,"");if(O.exec(j))return t.replace(O,"",1).record(),!1}}return!0}Rt.insert=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);return!1!==(n=Ot(n))&&this.trim(n[0],""),this.insert("<"+e+jt(r)+(!1!==t?">"+t+"</"+e+">":" />")+(!1!==n?n[1]:""),-1,!0)},Rt.toggle=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$(),c=o.after,a=o.before,u=o.value,s=qt(e),f=Ht(e),l=rt(s+"$",""),p=rt("^"+f,""),v=l.test(a),d=p.test(c);return d&&v?i.replace(p,"",1).replace(l,"",-1):(l=rt("^"+s,""),p=rt(f+"$",""),v=l.test(u),(d=p.test(u))&&v&&i.insert(u=u.replace(p,"").replace(l,"")),!u&&t&&i.insert(t),!1!==(n=Ot(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+jt(r)+">","</"+e+">"))},Rt.wrap=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$();return o.after,o.before,!o.value&&t&&i.insert(t),!1!==(n=Ot(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+jt(r)+">","</"+e+">")};var Mt={source:{type:"XML"},sourceXML:{}},Ut=se.protocol,Wt=Rt.toggle,Nt="[\\w:.-]+",zt=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},Bt=function(e){return"</("+e+")>"};function It(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}var Xt={};Xt.blocks=function(){var e=this;return e.record(),function(e){var t=/<(?:h([1-6])|p)(\s[^>]*)?>$/,r=/^<\/(?:h[1-6]|p)>/;e.match([t,/.*/,r],(function(n,i,o){var c=this,a=+(n[1]||0),u=n[2]||"",s=e.state.sourceHTML.elements||{},f=n[0]?s[n[0].slice(1,-1).split(/\s/)[0]]:["","",{}];!u&&f[2]&&(u=jt(f[2])),c.replace(t,"",-1),c.replace(/\n+/g," "),c.replace(r,"",1);var l=f[3]||s.h1[3];!1!==(l=It(l))&&c.trim(l[0],l[1]),a?++a>6?(c.wrap("<"+s.p[0]+(u||jt(s.p[2]))+">","</"+s.p[0]+">"),i[0]&&i[0]!==s.h6[1]||c.insert(s.p[1])):(c.wrap("<"+s["h"+a][0]+(u||jt(s["h"+a][2]))+">","</"+s["h"+a][0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s["h"+a][1])):(c.wrap("<"+s.h1[0]+(u||jt(s.h1[2]))+">","</"+s.h1[0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s.h1[1]))}))}(e),e.record(),!1},Xt.bold=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Wt.apply(this,e.b),!1},Xt.code=function(){var e=this;return e.record(),function(e){var t=/<(?:pre|code)(?:\s[^>]*)?>(?:\s*<code(?:\s[^>]*)?>)?$/,r=/^(?:<\/code>\s*)?<\/(?:pre|code)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state.sourceHTML.elements;a.replace(t,"",-1),a.replace(r,"",1),o[0]?/^(?:<\/code>\s*)?<\/pre>/.test(o[0])?(!1!==(c=It(c=u[""][3]))&&a.trim(c[0],c[1]),a.insert(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(i[0]))):o[0].slice(0,7)==="</"+u.code[0]+">"&&(!1!==(c=It(c=u.pre[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.pre[0]+jt(u.pre[2])+"><"+u.code[0]+jt(u.code[2])+">","</"+u.code[0]+"></"+u.pre[0]+">")):(!1!==(c=It(c=u.code[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.code[0]+jt(u.code[2])+">","</"+u.code[0]+">").insert(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(i[0]||u.code[1])))}))}(e),e.record(),!1},Xt.image=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$(),o=i.after,c=i.before,a=i.value,u=n.state,s=u.sourceHTML.elements||{},f=u.sourceHTML.tab||u.source.tab||u.tab||"\t",l=c.split("\n").pop().match(/^(\s+)/),p=l&&l[1]||"",v=u.source.prompt;return r(v)&&v(e,a&&/^https?:\/\/\S+$/.test(a)?a:t||Ut+"//").then((function(e){if(e){var t=s.img;a&&(t[2].alt=a,n.record());var r=t[3]||!1;!1!==(r=It(r))&&n.trim(r[0],""),t[2].src=e,o&&"\n"!==o[0]||c&&"\n"!==c.slice(-1)?n.insert("<"+t[0]+jt(t[2])+">"+(!1!==r?r[1]:""),-1,!0):(!1!==(r=It(r=s.figure[3]||!1))&&n.trim(r[0],r[1]),n.insert(""),n.wrap(p+"<"+s.figure[0]+jt(s.figure[2])+">\n"+p+f,p+"\n</"+s.figure[0]+">"),n.insert("<"+t[0]+jt(t[2])+">\n"+p+f,-1),n.wrap("<"+s.figcaption[0]+jt(s.figcaption[2])+">","</"+s.figcaption[0]+">").insert(s.figcaption[1]))}else n.focus()})),n.record(),!1},Xt.italic=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Wt.apply(this,e.i),!1},Xt.link=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$().value,o=n.state,c=o.sourceHTML.elements||{},a=o.source.prompt;return r(a)&&a(e,i&&/^https?:\/\/\S+$/.test(i)?i:t||Ut+"//").then((function(e){if(e){var t=c.a;i&&n.record(),t[2].href=e;var r={};/[.\/?&#]/.test(e[0])||/^(data|javascript|mailto):/.test(e)||-1===e.indexOf("://")||(r.rel="nofollow",r.target="_blank");var o=It(t[3]||!1);!1!==o||i||(o=[" "," "]),Wt.call(n,t[0],t[1],Kt(r,t[2]),o)}else n.focus()})),n.record(),!1},Xt.quote=function(){var e=this;return e.record(),function(e){var t=/<(blockquote|q)(?:\s[^>]*)?>\s*$/,r=/^\s*<\/(blockquote|q)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state,s=u.sourceHTML.tab||u.source.tab||u.tab||"\t",f=e.state.sourceHTML.elements||{};a.replace(t,"",-1),a.replace(r,"",1),o[0]?f.blockquote[0]===o[1]?!1!==(c=It(f[""][3]))&&a.trim(c[0],c[1]):f.q[0]===o[1]&&(!1!==(c=It(f.blockquote[3]))&&a.trim(c[0],c[1]),a.wrap("<"+f.blockquote[0]+jt(f.blockquote[2])+">\n","\n</"+f.blockquote[0]+">").insert(i[0]||f.blockquote[1]),a.replace(rt("(^|\\n)"),"$1"+s)):(!1!==(c=It(f.q[3]))&&a.trim(c[0],c[1]),a.wrap("<"+f.q[0]+jt(f.q[2])+">","</"+f.q[0]+">").insert(i[0]||f.q[1]),a.replace(rt("(^|\\n)"+s),"$1"))}))}(e),e.record(),!1},Xt.underline=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Wt.apply(this,e.u),!1};var Vt={source:{type:"HTML"},sourceHTML:{elements:{"":["","text goes here…",{},""],a:["a","link text goes here…",{}],area:["area",!1,{}],b:["strong","text goes here…",{}],base:["base",!1,{href:""},"\n"],blockquote:["blockquote","",{},"\n"],br:["br",!1,{},["","\n"]],button:["button","text goes here…",{name:"",type:"submit"}," "],caption:["caption","caption goes here…",{},"\n"],code:["code","code goes here…",{}," "],col:["col",!1,{},"\n"],em:["em","text goes here…",{}],figcaption:["figcaption","caption goes here…",{},"\n"],figure:["figure","",{},"\n"],h1:["h1","title goes here…",{},"\n"],h2:["h2","title goes here…",{},"\n"],h3:["h3","title goes here…",{},"\n"],h4:["h4","title goes here…",{},"\n"],h5:["h5","title goes here…",{},"\n"],h6:["h6","title goes here…",{},"\n"],hr:["hr",!1,{},"\n"],i:["em","text goes here…",{}],img:["img",!1,{alt:"",src:""}," "],input:["input",!1,{name:"",type:"text"}," "],li:["li","list item goes here…",{},"\n"],link:["link",!1,{href:""},"\n"],meta:["meta",!1,{},"\n"],ol:["ol","",{},"\n"],option:["option","option goes here…",{},"\n"],p:["p","paragraph goes here…",{},"\n"],param:["param",!1,{name:""},"\n"],pre:["pre","text goes here…",{},"\n"],q:["q","quote goes here…",{}," "],script:["script","",{},"\n"],select:["select","",{name:""}," "],source:["source",!1,{src:""},"\n"],strong:["strong","text goes here…",{}],style:["style","",{},"\n"],td:["td","data goes here…",{},"\n"],textarea:["textarea","text goes here…",{name:""}," "],th:["th","title goes here…",{},"\n"],tr:["tr","",{},"\n"],track:["track",!1,{},"\n"],u:["u","text goes here…",{}],ul:["ul","",{},"\n"],wbr:["wbr",!1,{},["","\n"]]}}};function Ft(e){this.K.pull()}function Jt(e){this.K.pull()}function Yt(e){var t,r,n=this.TE,i=this.K,o=e.key,c=n.state.source.type;if(de(e),i.push(o),t=i.test())!1===(r=i.fire(t))?ve(e):null===r&&console.error("Unknown command:",t);else{if("HTML"===c)return void(function(e,t){var r=t.state,n=r.sourceHTML.tab||r.source.tab||r.tab||"\t",i=r.sourceHTML.elements||{},o=e.key,c=e.queue;if(c.Control){var a=t.$(),u=a.after,s=a.before,f=a.end,l=a.start;a.value;var v=u.split("\n").shift(),d=s.split("\n").pop(),h=d.match(/^(\s+)/),g=h&&h[1]||"";if("Enter"===o){var y=v.match(rt(Bt(Nt)+"\\s*$","")),m=i[y&&y[1]||"p"]||i.p;return m[3]=["\n"+g,"\n"+g],t.select(c.Shift?l-p(d):f+p(v)),Wt.apply(t,m),t.record(),!1}}if(c.Alt||c.Control)return!0;if(">"===o){var b,k=t.$(),w=k.after,x=k.before,E=k.end,$=(x.split("\n").pop()+">").match(rt(zt(Nt)+"$","")),A=i[b=$&&$[1]||""];return!b||(A?!1!==A[1]?(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1).insert(A[1])):">"===w[0]?t.insert(" /",-1).select(E+3):t.insert(" />",-1):(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1)),t.record(),!1)}if("Enter"===o){var L,T,K=t.$(),_=K.after,S=K.before,P=K.value,q=_.split("\n").shift(),H=S.split("\n").pop(),C=H.match(/^(\s+)/),R=C&&C[1]||"",j=["li","option","p","td","th"],O=["script","style"];if(L=H.match(rt(zt(Nt)+"$",""))){var D=i[L[1]];if(D&&!1===D[1])return t.insert("\n"+R,-1).record(),!1}if(_&&S){for(var M=0,U=p(j);M<U;++M)if(rt("^"+Bt(T=j[M]),"").test(q)&&(L=H.match(rt("^\\s*"+zt(T),""))))return L[0]===H?(i[T]&&P&&i[T][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):Wt.call(t,T),t.record(),!1):(t.insert("</"+T+">\n"+R+"<"+T+(L[2]||"")+">",-1).insert(i[T]&&i[T][1]||"").record(),!1);for(var W=0,N=p(O);W<N;++W)if(rt("^"+Bt(T=O[W]),"").test(q)&&rt(zt(T)+"$","").test(H))return t.wrap("\n"+R,"\n"+R).insert(i[T]&&i[T][1]||"").record(),!1;for(var z=1;z<7;++z)if(q.startsWith("</"+i["h"+z][0]+">")&&H.match(rt("^\\s*"+zt(i["h"+z][0]),"")))return i["h"+z]&&P&&i["h"+z][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):t.insert("</"+i["h"+z][0]+">\n"+R+"<"+i.p[0]+">",-1).replace(rt("^"+Bt(i["h"+z][0])),"</"+i.p[0]+">",1).insert(i.p[1]),t.record(),!1}}return!0}(i,n)&&Dt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||ve(e));if("XML"===c)return void(Dt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||ve(e));wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||ve(e)}}function Gt(e){var t=this.TE,r=this.K,n=e.key;!function(e,t){Lt(t)}(0,t),r.pull(n)}function Qt(t){var r=this.TE;!function(t,r){t.key,t.queue.Control||w.setTimeout((function(){var t=r.$(),n=t.after,i=t.before,o=t.value;if(!o)for(var c,a,u=Ct.split("([\\w:.-]+)").join("((?:[\\w:.-]|\ufeff)+)"),s=rt(u),f=i+o+"\ufeff"+n;c=s.exec(f);)if(e("\ufeff",c[0])){r.select(a=c.index,a+p(c[0])-1);break}}),1)}(this.K,r)}function Zt(e){var t,r;for(var n in gt.instances)(t=gt.instances[n]).loss().pop(),delete t.self.K,delete gt.instances[n],r=t.self,pe("blur",r,Ft),pe("input",r,Jt),pe("keydown",r,Yt),pe("keyup",r,Gt),pe("mousedown",r,Qt),pe("touchstart",r,Qt);var i,o,c,a,u=S(".lot\\:field.type\\:source textarea");u&&p(u)&&u.forEach((function(e){var t;i=new gt(e,null!=(t=K(e,"state"))?t:{}),c=i.state,a=c.source.type,(o=new w.K(i)).keys.Escape=function(){var e=H(this.source,"[tabindex]:not(.not\\:active)");return!e||(e.focus(),!1)},"HTML"===a&&(o.commands=Xt,o.keys["Control-b"]="bold",o.keys["Control-e"]="code",o.keys["Control-h"]="blocks",o.keys["Control-i"]="italic",o.keys["Control-k"]="link",o.keys["Control-o"]="image",o.keys["Control-q"]="quote",o.keys["Control-u"]="underline"),c.commands=o.commands,c.keys=o.keys,e.K=o,function(e){ge("blur",e,Ft),ge("input",e,Jt),ge("keydown",e,Yt),ge("keyup",e,Gt),ge("mousedown",e,Qt),ge("touchstart",e,Qt),e.TE.record()}(e)})),1===e&&(w._.on("change",Zt),w.TE=gt,["alert","confirm","prompt"].forEach((function(e){w._.dialog[e]&&(gt.state.source[e]=w._.dialog[e])})))}Object.assign(gt.prototype,yt,kt),gt.state=m({},gt.state,Tt,Mt,Vt),delete gt.state.source.type;var er=":scope>.lot\\:file[tabindex]:not(.not\\:active),:scope>.lot\\:folder[tabindex]:not(.not\\:active)";function tr(e){e&&r(e.focus)&&e.focus()}function rr(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&U(t,"not:active");)t=q(t);for(r=C(i);r&&U(r,"not:active");)r=C(r);"ArrowDown"===o?(tr(t),n=!0):"ArrowUp"===o?(tr(r),n=!0):"End"===o?(tr([].slice.call(S(er,H(i))).pop()),n=!0):"Home"===o&&(tr(_(er,H(i))),n=!0),n&&(ve(e),de(e))}}}function nr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowDown"===n||"Home"===n?(tr(_(er,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(tr([].slice.call(S(er,r)).pop()),t=!0);t&&(ve(e),de(e))}}}var ir=":scope>ul>li>a[href]:not(.not\\:active)";function or(e){e&&r(e.focus)&&e.focus()}function cr(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(!a&&!u&&!s){if(t=H(o)){for(r=q(t);r&&(U(r,"as:separator")||U(r,"not:active"));)r=q(r);for(n=C(t);n&&(U(n,"as:separator")||U(n,"not:active"));)n=C(n)}"ArrowLeft"===c?(or(n&&A(n)),i=!0):"ArrowRight"===c?(or(r&&A(r)),i=!0):"End"===c?((t=H(o,".lot\\:links[tabindex]"))&&or([].slice.call(S(ir,t)).pop()),i=!0):"Home"===c&&((t=H(o,".lot\\:links[tabindex]"))&&or(_(ir,t)),i=!0)}i&&(ve(e),de(e))}}function ar(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowRight"===n||"Home"===n?(or(_(ir,r)),t=!0):"ArrowLeft"!==n&&"End"!==n||(or([].slice.call(S(ir,r)).pop()),t=!0)),t&&(ve(e),de(e)))}}var ur="a[href]:not(.not\\:active)";function sr(e){e&&r(e.focus)&&e.focus()}function fr(e,t){S(".lot\\:menu[tabindex].is\\:enter").forEach((function(r){e!==r&&(I(H(r),"is:active"),I(C(r),"is:active"),I(r,"is:enter"),t&&Y(t,"aria-expanded","false"))}))}function lr(){fr(0)}function pr(e){if(!e.defaultPrevented){var t=this,r=q(t);fr(r,t),w.setTimeout((function(){ue(r,"is:enter"),ue(H(t),"is:active"),ue(t,"is:active"),Y(t,"aria-expanded",U(t,"is:active")?"true":"false")}),1),ve(e),de(e)}}function vr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key;if(r=H(c)){for(n=q(r);n&&(U(n,"as:separator")||U(n,"not:active"));)n=q(n);for(i=C(r);i&&(U(i,"as:separator")||U(i,"not:active"));)i=C(i)}"ArrowDown"===a?(sr(n&&A(n)),o=!0):"ArrowLeft"===a||"Escape"===a||"Tab"===a?((r=H(c,".lot\\:menu[tabindex].is\\:enter"))?(I(H(c),"is:active"),I(r,"is:enter"),I(c,"is:active"),"Tab"!==a&&sr(C(r))):"Escape"===a&&sr(H(c,".lot\\:menu[tabindex]")),o="Tab"!==a):"ArrowRight"===a?((n=q(c))&&U(n,"lot:menu")&&(Q(H(c),"is:active"),Q(n,"is:enter"),Q(c,"is:active"),w.setTimeout((function(){sr(_(ur,n))}),1)),o=!0):"ArrowUp"===a?((t=i&&A(i))?sr(t):(t=H(c,".lot\\:menu[tabindex].is\\:enter"))&&(t=C(t))&&(le("click",t),sr(t)),o=!0):"End"===a?((r=H(c,".lot\\:menu[tabindex]"))&&sr([].slice.call(S(ur,r)).pop()),o=!0):"Home"===a&&((r=H(c,".lot\\:menu[tabindex]"))&&sr(_(ur,r)),o=!0),o&&(ve(e),de(e))}}function dr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(sr(_(ur,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(sr([].slice.call(S(ur,r)).pop()),t=!0)),t&&(ve(e),de(e)))}}function hr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=q(r),o=H(r);i&&o&&U(i,"lot:menu")&&(" "===n||"Enter"===n||"Tab"===n?"Tab"===n?U(i,"is:enter")&&le("click",r):(le("click",r),t=!0):"ArrowDown"===n&&(U(i,"is:enter")||le("click",r),w.setTimeout((function(){sr(_(ur,i))}),1),t=!0)),t&&(ve(e),de(e))}}var gr=":scope>.lot\\:page[tabindex]:not(.not\\:active)";function yr(e){e&&r(e.focus)&&e.focus()}function mr(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&U(t,"not:active");)t=q(t);for(r=C(i);r&&U(r,"not:active");)r=C(r);"ArrowDown"===o?(yr(t),n=!0):"ArrowUp"===o?(yr(r),n=!0):"End"===o?(yr([].slice.call(S(gr,H(i))).pop()),n=!0):"Home"===o&&(yr(_(gr,H(i))),n=!0),n&&(ve(e),de(e))}}}function br(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(yr(_(gr,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(yr([].slice.call(S(gr,r)).pop()),t=!0)),t&&(ve(e),de(e)))}}var kr='a[target^="stack:"]:not(.not\\:active)';function wr(e){e&&r(e.focus)&&e.focus()}function xr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a||"ArrowRight"===a||"PageDown"===a){if(n=H(H(c)))for(r=q(n);r&&U(r,"not:active");)r=q(r);(t=r&&A(r))&&("ArrowRight"===a&&U(H(t),"can:toggle")||le("click",A(t)),wr(A(t))),o=!0}else if("ArrowUp"===a||"ArrowLeft"===a||"PageUp"===a){if(n=H(H(c)))for(i=C(n);i&&U(i,"not:active");)i=C(i);(t=i&&A(i))&&("ArrowLeft"===a&&U(H(t),"can:toggle")||le("click",A(t)),wr(A(t))),o=!0}else" "===a||"Enter"===a?(U(H(H(c)),"can:toggle")&&(le("click",c),wr(c)),o=!0):"End"===a?((n=H(c,".lot\\:stacks[tabindex]"))&&(t=[].slice.call(S(kr,n)).pop())&&(le("click",t),wr(t)),o=!0):"Home"===a&&((n=H(c,".lot\\:stacks[tabindex]"))&&(t=_(kr,n))&&(le("click",t),wr(t)),o=!0);o&&(ve(e),de(e))}}function Er(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=_(kr+".is\\:current",o))&&H(H(t)),"PageDown"===c?((t=(r=t&&q(t))&&_(kr,r))&&(le("click",t),wr(t)),i=!0):"PageUp"===c&&((t=(n=t&&C(t))&&_(kr,n))&&(le("click",t),wr(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=_(kr,o))&&(le("click",t),wr(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(S(kr,o)).pop())&&(le("click",t),wr(t)),i=!0)}i&&(ve(e),de(e))}}var $r='a[target^="tab:"]:not(.not\\:active)';function Ar(e){e&&r(e.focus)&&e.focus()}function Lr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a){if(U(c,"can:toggle")&&!U(c,"is:current"))t=c;else{if(n=H(c))for(r=q(n);r&&U(r,"not:active");)r=q(r);t=r&&A(r)}t&&(le("click",t),Ar(t)),o=!0}else if("ArrowLeft"===a||"PageUp"===a){if(n=H(c))for(i=C(n);i&&U(i,"not:active");)i=C(i);(t=i&&A(i))&&(le("click",t),Ar(t)),o=!0}else if("ArrowRight"===a||"PageDown"===a){if(n=H(c))for(r=q(n);r&&U(r,"not:active");)r=q(r);(t=r&&A(r))&&(le("click",t),Ar(t)),o=!0}else if("ArrowUp"===a){if(U(c,"can:toggle")&&U(c,"is:current"))t=c;else{if(n=H(c))for(i=C(n);i&&U(i,"not:active");)i=C(i);t=i&&A(i)}t&&(le("click",t),Ar(t)),o=!0}else" "===a||"Enter"===a?(U(c,"can:toggle")&&(le("click",c),Ar(c)),o=!0):"End"===a?((n=H(c,".lot\\:tabs[tabindex]"))&&(t=[].slice.call(S($r,n)).pop())&&(le("click",t),Ar(t)),o=!0):"Home"===a&&((n=H(c,".lot\\:tabs[tabindex]"))&&(t=_($r,n))&&(le("click",t),Ar(t)),o=!0);o&&(ve(e),de(e))}}function Tr(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=_($r+".is\\:current",o))&&H(t),"PageDown"===c?((t=(r=t&&q(t))&&A(r))&&(le("click",t),Ar(t)),i=!0):"PageUp"===c&&((t=(n=t&&C(t))&&A(n))&&(le("click",t),Ar(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=_($r,o))&&(le("click",t),Ar(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(S($r,o)).pop())&&(le("click",t),Ar(t)),i=!0)}i&&(ve(e),de(e))}}var Kr='a[href]:not([tabindex="-1"]):not(.not\\:active),button:not(:disabled):not([tabindex="-1"]):not(.not\\:active),input:not(:disabled):not([tabindex="-1"]):not(.not\\:active),select:not(:disabled):not([tabindex="-1"]):not(.not\\:active),[tabindex]:not([tabindex="-1"]):not(.not\\:active)';function _r(e){e&&r(e.focus)&&e.focus()}function Sr(e){e&&r(e.select)&&e.select()}function Pr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey,f=e.shiftKey;if(!u&&!s&&!f){for(n=q(c);n&&U(n,"not:active");)n=q(n);for(i=C(c);i&&U(i,"not:active");)i=C(i);"ArrowLeft"===a?(o=!("selectionStart"in c&&0!==c.selectionStart))&&(_r(i),Sr(i)):"ArrowRight"===a?(o=!("selectionEnd"in c&&c.selectionEnd<p(c.value||"")))&&(_r(n),Sr(n)):"End"===a?(o=!("selectionEnd"in c&&p(c.value||"")))&&(r=H(c,".lot\\:tasks[tabindex]"))&&(t=[].slice.call(S(Kr,r)).pop())&&(_r(t),Sr(t)):"Home"===a&&(o=!("selectionStart"in c&&p(c.value||"")))&&(r=H(c,".lot\\:tasks[tabindex]"))&&(t=_(Kr,r))&&(_r(t),Sr(t))}o&&(ve(e),de(e))}}function qr(e){if(!e.defaultPrevented){var t,r,n=this,i=e.key,o=e.altKey,c=e.ctrlKey,a=e.shiftKey;n===e.target&&(o||c||a||("ArrowLeft"===i||"End"===i?((t=[].slice.call(S(Kr,n)).pop())&&(_r(t),Sr(t)),r=!0):"ArrowRight"!==i&&"Home"!==i||((t=_(Kr,n))&&(_r(t),Sr(t)),r=!0)),r&&(ve(e),de(e)))}}function Hr(e){void 0===e&&(e={});var n=this;return n.commands={},n.fire=function(e){var i,o,u=n.source;if(r(e))i=e.call(u),o=!0;else if(a(e)&&(e=n.commands[e]))i=e.call(u),o=!0;else if(t(e)){var s=e[1]||[];(e=n.commands[e[0]])&&(i=e.apply(u,s),o=!0)}return o?!c(i)||i:null},n.key=null,n.keys={},n.pull=function(e){return n.key=null,c(e)?(delete n.queue[e],n):(n.queue={},n)},n.push=function(e){return n.queue[n.key=e]=1,n},n.queue={},n.source=e,n.test=function(){var e=n.keys[n.toString()];return!!c(e)&&e},n.toString=function(){return g(n.queue).join("-")},n}let Cr=new Hr(w);ge("blur",w,(e=>Cr.pull())),ge("keydown",w,(e=>{Cr.push(e.key);let t=Cr.test();if(t){let r=Cr.fire(t);!1===r?ve(e):null===r&&console.error("Unknown command:",t)}})),ge("keyup",w,(e=>Cr.pull(e.key)));const Rr={commands:Cr.commands,keys:Cr.keys},{fire:jr,hooks:Or,off:Dr,on:Mr}=Fe(Rr);w.K=Hr,w._=Rr,ge("beforeload",k,(()=>jr("let"))),ge("load",k,(()=>jr("get"))),ge("DOMContentLoaded",k,(()=>jr("set"))),ge("keydown",w,(function(e){if(e.defaultPrevented)return;let t,r,n=e.target,i=e.key,o=e.altKey,c=e.ctrlKey,a=e.shiftKey,u=_(".lot\\:bar a:any-link"),s=(l="get",k.forms[l]||null),f=s&&s.q;var l;!f||"F3"!==i||o||c||a?!u||"F10"!==i||o||c||a?x!==n&&E!==n&&w!==n&&"Escape"===i&&(t=H(H(n),"[tabindex]:not(.not\\:active)"))&&(t.focus(),r=!0):(u.focus(),(t=H(u))&&U(t,"has:menu")&&u.click(),r=!0):(f.focus(),r=!0),r&&ve(e)})),function e(t){var r=S(".lot\\:bar[tabindex]");r&&p(r)&&r.forEach((function(e){S(me,e).forEach((function(e){ge("keydown",e,we)})),ge("keydown",e,ke)})),1===t&&w._.on("change",e)}(1),1===1&&(w._.dialog=Te),function(e){et(e),st(e),Zt(e)}(1),function e(t){var r=S(".lot\\:files[tabindex],.lot\\:folders[tabindex]");r&&p(r)&&r.forEach((function(e){S(er,e).forEach((function(e){ge("keydown",e,rr)})),ge("keydown",e,nr)})),1===t&&w._.on("change",e)}(1),function e(t){var r=S(".lot\\:links[tabindex]");r&&p(r)&&r.forEach((function(e){var t=S(ir,e);t&&p(t)&&t.forEach((function(e){ge("keydown",e,cr)})),ge("keydown",e,ar)})),1===t&&w._.on("change",e)}(1),function e(t){pe("click",k,lr);var r=S(".has\\:menu"),n=S(".lot\\:menu[tabindex] "+ur);r&&p(r)&&(r.forEach((function(e){var t=_(".lot\\:menu[tabindex]",e),r=C(t);t&&r&&(ge("click",r,pr),ge("keydown",r,hr))})),ge("click",k,lr)),n&&p(n)&&n.forEach((function(e){ge("keydown",e,vr)}));var i=S(".lot\\:menu[tabindex]");i&&p(i)&&i.forEach((function(e){ge("keydown",e,dr)})),1===t&&w._.on("change",e)}(1),function e(t){var r=S(".lot\\:pages[tabindex]");r&&p(r)&&r.forEach((function(e){S(gr,e).forEach((function(e){ge("keydown",e,mr)})),ge("keydown",e,br)})),1===t&&w._.on("change",e)}(1),function e(t){var r=S(".lot\\:stacks[tabindex]");r&&p(r)&&r.forEach((function(e){var t,r,n=[].slice.call(L(e)),i=te("input");function o(e){var o,c=this,a=H(H(c)),u=H(a,".lot\\:stacks");U(a,"has:link")||(n.forEach((function(e){e!==a&&(I(e,"is:current"),I(_('a[target^="stack:"]',e),"is:current"))})),U(a,"can:toggle")?(ue(c,"is:current"),ue(a,"is:current")):(Q(c,"is:current"),Q(a,"is:current")),o=U(c,"is:current"),i.value=r=o?K(a,"value"):null,ue(u,"has:current",o),w._.fire.call(a,"change.stack",[r,t]),ve(e))}i.type="hidden",i.name=t=K(e,"name"),G(e,i),n.forEach((function(e){var t=_(kr,e);ge("click",t,o),ge("keydown",t,xr)}));var c=n.find((function(e,t){return 0!==t&&U(e,"is:current")}));c&&(i.value=K(c,"value")),ge("keydown",e,Er)})),1===t&&w._.on("change",e)}(1),function e(t){var r=S(".lot\\:tabs[tabindex]");r&&p(r)&&r.forEach((function(e){var t,r,n=[].slice.call(L(e)),i=[].slice.call(S($r,n.shift())),o=te("input");function c(e){var c,a=this,u=n[a._tabIndex],s=H(a),f=H(s,".lot\\:tabs");U(s,"has:link")||(i.forEach((function(e){if(e!==a){I(H(e),"is:current"),I(e,"is:current"),Y(e,"aria-selected","false"),Y(e,"tabindex","-1");var t=n[e._tabIndex];t&&I(t,"is:current")}})),U(s,"can:toggle")?(ue(s,"is:current"),ue(a,"is:current"),Y(a,"aria-selected",U(a,"is:current")?"true":"false"),Y(a,"tabindex",U(a,"is:current")?"0":"-1")):(Q(s,"is:current"),Q(a,"is:current"),Y(a,"aria-selected","true"),Y(a,"tabindex","0")),c=U(a,"is:current"),u&&(o.value=r=c?K(a,"value"):null,ue(u,"is:current",c),ue(f,"has:current",c),w._.fire.call(u,"change.tab",[r,t])),ve(e))}o.type="hidden",o.name=t=K(e,"name"),G(e,o),i.forEach((function(e,t){e._tabIndex=t,ge("click",e,c),ge("keydown",e,Lr)}));var a=i.find((function(e,t){return 0!==t&&U(H(e),"is:current")}));a&&(o.value=K(a,"value")),ge("keydown",e,Tr)})),1===t&&w._.on("change",e)}(1),function e(t){var r=S(".lot\\:tasks[tabindex]");r&&p(r)&&r.forEach((function(e){var t=S(Kr,e);t&&p(t)&&t.forEach((function(e){ge("keydown",e,Pr)})),ge("keydown",e,qr)})),1===t&&w._.on("change",e)}(1)}();