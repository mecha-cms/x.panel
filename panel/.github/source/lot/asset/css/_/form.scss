.button,
.input,
.output,
.select,
.textarea {
  border: 1px solid transparent;
  display: inline-block;
  height: calc(var(--h) + (var(--y) / 2));
  padding: calc(var(--y) / 4) calc(var(--x) / 2);
  position: relative;
  text-align: left;
  vertical-align: middle;
  width: auto;
  z-index: 0;
  &:focus {
    z-index: 1;
  }
}

.button,
.button:any-link {
  background: var(--fill-button);
  border-color: var(--stroke-button);
  border-radius: var(--radius-button);
  border-width: 0;
  box-shadow: var(--shadow-button);
  color: var(--color-button);
  text-align: center;
  $states: hover, focus, active, disabled;
  @each $state in $states {
    &:#{$state} {
      background: var(--fill-button--#{$state}, var(--fill-button));
      border-color: var(--stroke-button--#{$state}, var(--stroke-button));
      border-radius: var(--radius-button--#{$state}, var(--radius-button));
      box-shadow: var(--shadow-button--#{$state}, var(--shadow-button));
      color: var(--color-button--#{$state}, var(--color-button));
    }
  }
  &.as\:link {
    background: none;
    border-color: transparent;
    border-radius: 0;
    box-shadow: none;
    color: var(--color-link);
    $states: hover, focus, active;
    @each $state in $states {
      &:#{$state} {
        background: none;
        border-color: transparent;
        border-radius: 0;
        box-shadow: none;
        color: var(--color-link--#{$state}, var(--color-link));
      }
    }
  }
  .title {
    > .icon {
      &:first-child {
        margin-left: calc(var(--x) / -4);
      }
      &:last-child {
        margin-right: calc(var(--x) / -4);
      }
      &.caret {
        margin-left: calc(var(--x) / -4);
        margin-right: calc(var(--x) / -4);
      }
    }
  }
}

.input,
.select,
.textarea {
  background: var(--fill-input);
  border-color: var(--stroke-input);
  border-radius: var(--radius-input);
  box-shadow: var(--shadow-input);
  color: var(--color-input);
  width: calc(var(--x) * 8);
  $states: read-write, hover, focus, active, invalid, read-only, disabled;
  @each $state in $states {
    &:#{$state} {
      background: var(--fill-input--#{$state}, var(--fill-input));
      border-color: var(--stroke-input--#{$state}, var(--stroke-input));
      box-shadow: var(--shadow-input--#{$state}, var(--shadow-input));
      color: var(--color-input--#{$state}, var(--color-input));
    }
  }
}

.input {
  &[type='color'],
  &[type='file'],
  &[type='range'] {
    cursor: pointer;
  }
}

.input {
  &[type='file'],
  &[type='range'] {
    background: none;
    border: 0;
    box-shadow: none;
    line-height: var(--y);
    padding: 0;
  }
}

.input {
  &[type='checkbox'],
  &[type='color'],
  &[type='image'],
  &[type='radio'] {
    background: none;
    border: 0;
    cursor: pointer;
    height: var(--z);
    line-height: var(--z);
    margin: 0;
    padding: 0;
    width: var(--z);
  }
  &[type='color'] {
    height: calc(var(--y) * 1.5);
    width: calc(var(--x) * 1.5);
    &::-webkit-color-swatch-wrapper {
      padding: 0;
    }
  }
  &[type='image'] {
    box-shadow: none;
    height: auto;
    width: auto;
  }
  &[type='number'] {
    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      @include appearance(none);
      margin: 0;
    }
  }
  &[type='number'],
  &[type='search'] {
    @include appearance(textfield);
  }
}

.output {
  background: var(--fill-output);
  border-color: var(--stroke-output);
  border-radius: var(--radius-output);
  box-shadow: var(--shadow-output);
  color: var(--color-output);
  $states: hover, focus, active;
  @each $state in $states {
    &:#{$state} {
      background: var(--fill-output--#{$state}, var(--fill-output));
      border-color: var(--stroke-output--#{$state}, var(--stroke-output));
      border-radius: var(--radius-output--#{$state}, var(--radius-output));
      box-shadow: var(--shadow-output--#{$state}, var(--shadow-output));
      color: var(--color-output--#{$state}, var(--color-output));
    }
  }
}

.select {
  cursor: pointer;
  &[multiple] {
    height: auto;
    optgroup,
    option {
      background: none;
    }
  }
  optgroup,
  option {
    background: var(--fill-input);
    color: var(--color-input);
    margin: 0;
    padding: 0;
    $states: disabled;
    @each $state in $states {
      &:#{$state} {
        background: var(--fill-input--#{$state}, var(--fill-input));
        color: var(--color-input--#{$state}, var(--color-input));
      }
    }
  }
  optgroup {
    font-weight: bold;
    option {
      font-weight: normal;
      padding-left: calc(var(--x) / 3);
    }
  }
  &:not([multiple]) {
    padding-bottom: 0;
    padding-top: 0;
  }
}

.width {
  display: flex;
  width: 100%;
}

.textarea {
  min-height: calc(var(--y) * 3.75);
  overflow: auto;
  resize: vertical;
  &.height {
    height: calc(var(--y) * 10.75);
  }
}

label {
  > input {
    &[type='checkbox'],
    &[type='radio'] {
      + span {
        display: inline-flex;
        vertical-align: middle;
      }
    }
  }
}

// Custom appearance for modern browser(s)
.input {
  &[type='checkbox'],
  &[type='radio'] {
    @include appearance(none);
    background: var(--fill-button);
    border-color: var(--stroke-button);
    border-radius: var(--radius-button);
    box-shadow: var(--shadow-button);
    color: var(--color-button);
    &::before {
      background: var(--color-button);
      bottom: 2px;
      content: "";
      left: 2px;
      position: absolute;
      right: 2px;
      top: 2px;
    }
    $states: hover, focus, active, disabled;
    @each $state in $states {
      &:#{$state} {
        background: var(--fill-button--#{$state}, var(--fill-button));
        border-color: var(--stroke-button--#{$state}, var(--stroke-button));
        box-shadow: var(--shadow-button--#{$state}, var(--shadow-button));
        color: var(--color-button--#{$state}, var(--color-button));
      }
    }
  }
  &[type='checkbox'] {
    &:checked {
      &::before {
        @include transform(rotate(45deg));
        background: none;
        border-bottom: 2px solid var(--color-button);
        border-right: 2px solid var(--color-button);
        bottom: 4px;
        left: 5px;
        right: 5px;
        top: 1px;
        visibility: visible;
      }
    }
    $states: hover, focus, active, disabled;
    @each $state in $states {
      &:#{$state} {
        &::before {
          border-bottom-color: var(--color-button--#{$state});
          border-right-color: var(--color-button--#{$state});
        }
      }
    }
  }
  &[type='radio'] {
    &,
    &::before {
      border-radius: 100%;
    }
    &:checked {
      &::before {
        background: none;
        border: 2px solid var(--color-button);
        visibility: visible;
      }
    }
    $states: hover, focus, active, disabled;
    @each $state in $states {
      &:#{$state} {
        &::before {
          border-color: var(--color-button--#{$state}, var(--color-button));
        }
      }
    }
  }
  &[type='range'] {
    @include appearance(none);
    &::-webkit-slider-runnable-track {
      -webkit-appearance: none;
      background: var(--stroke-input);
      border: 0;
      height: 2px;
      overflow: visible;
    }
    &::-webkit-slider-thumb {
      -webkit-appearance: none;
      background: var(--fill-button);
      border-color: var(--stroke-button);
      border-radius: var(--radius-button);
      border-width: 0;
      box-shadow: var(--shadow-button);
      color: var(--color-button);
      height: var(--y);
      margin-top: calc(var(--y) / -2) + 1px; // Magic! :(
      width: calc(var(--x) / 2);
    }
    &::-moz-range-track {
      background: var(--stroke-input);
      border: 0;
      height: 2px;
    }
    &::-moz-range-thumb {
      background: var(--fill-button);
      border-color: var(--stroke-button);
      border-radius: var(--radius-button);
      border-width: 0;
      box-shadow: var(--shadow-button);
      color: var(--color-button);
      height: var(--y);
      margin-top: calc(var(--y) / -2) + 1px; // Magic! :(
      width: calc(var(--x) / 2);
    }
  }
  $states: hover, focus, active, disabled;
  @each $state in $states {
    &:#{$state} {
      &::-webkit-slider-runnable-track {
        background: var(--stroke-input--#{$state}, var(--stroke-input));
      }
      &::-moz-range-track {
        background: var(--stroke-input--#{$state}, var(--stroke-input));
      }
      &::-webkit-slider-thumb {
        background: var(--fill-button--#{$state}, var(--fill-button));
        border-color: var(--stroke-button--#{$state}, var(--stroke-button));
        border-radius: var(--radius-button--#{$state}, var(--radius-button));
        box-shadow: var(--shadow-button--#{$state}, var(--shadow-button));
        color: var(--color-button--#{$state}, var(--color-button));
      }
      &::-moz-range-thumb {
        background: var(--fill-button--#{$state}, var(--fill-button));
        border-color: var(--stroke-button--#{$state}, var(--stroke-button));
        border-radius: var(--radius-button--#{$state}, var(--radius-button));
        box-shadow: var(--shadow-button--#{$state}, var(--shadow-button));
        color: var(--color-button--#{$state}, var(--color-button));
      }
    }
  }
}