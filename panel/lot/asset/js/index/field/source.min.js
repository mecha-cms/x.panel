!function(){"use strict";var e=function(e,r){return-1!==r.indexOf(e)},r=function(e){return Array.isArray(e)},t=function(e){return"function"==typeof e},n=function(e,r){return e&&s(r)&&e instanceof r},i=function(e,r){return void 0===r&&(r=!0),"object"==typeof e&&(!r||n(e,Object))},s=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},o=function(e){return"string"==typeof e},c=function(e){return e.length},a=function(e,r){return s(r[0])&&e<r[0]?r[0]:s(r[1])&&e>r[1]?r[1]:e},u=function(e){return Object.keys(e)},l=function e(t){if(r(t))return t.map((function(r){return e(r)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(t))return function(e,r){return void 0===r&&(r=10),r?parseInt(e,r):parseFloat(e)}(t);if(i(t)){for(var n in t)t[n]=e(t[n]);return t}return"false"!==t&&("null"===t?null:"true"===t||t)},f=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},p=function t(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];for(var u=o.shift(),l=0,f=c(o);l<f;++l)for(var p in o[l])if(s(u[p]))if(r(u[p])&&r(o[l][p])){u[p]=[].concat(u[p]);for(var h=0,v=c(o[l][p]);h<v;++h)e(o[l][p][h],u[p])||u[p].push(o[l][p][h])}else i(u[p])&&i(o[l][p])?u[p]=t({},u[p],o[l][p]):u[p]=o[l][p];else u[p]=o[l][p];return u},h=function e(t){if(r(t))return t.map((function(r){return e(t)}));if(i(t)){for(var n in t)t[n]=e(t[n]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},v=document,d=window,m=v.body,g=v.documentElement,$=function(e,r,t){void 0===t&&(t=!0);var n=function(e,r,t){if(void 0===t&&(t=!0),!b(e,r))return null;var n=e.getAttribute(r);return t?l(n):n}(e,"data-"+r,t),i=(n+"").trim();return t&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var r=null;try{r=JSON.parse(e)}catch(e){}return r}(n))?i:n},b=function(e,r){return e.hasAttribute(r)},y=d.location,w=function(e,r,t){r.removeEventListener(e,t)},x=function(e){return e&&e.preventDefault()},S=function(e,r,t,n){void 0===n&&(n=!1),r.addEventListener(e,t,n)},_=function(e,r){return void 0===r&&(r=""),e.replace(k("["+r+L.replace(/./g,"\\$&")+"]"),"\\$&")},k=function(e,r){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,s(r)?r:"g"))},L="!$^*()+=[]{}|:<>,.?/-";function q(e,r){return(e||"")["trim"+(-1===r?"Left":1===r?"Right":"")]()}function T(e,i){void 0===i&&(i={});var a=this;if(!e)return a;if(!n(a,T))return new T(e,i);if(e.TE)return a;a.state=i=p({},T.state,o(i)?{tab:i}:i||{}),a.self=a.source=e,T.instances[e.id||e.name||function(e){return c(u(e))}(T.instances)]=a,e.TE=1;var l=/^([\s\S]*?)$/,f=function(){return e.disabled},h=function(){return e.readOnly},v=function(){return e.value.replace(/\r/g,"")};return a.value=v(),a.get=function(){return!f()&&q(v())||null},a.let=function(){return e.value=a.value,a},a.set=function(r){return f()||h()||(e.value=r),a},a.$=function(){return new T.S(e.selectionStart,e.selectionEnd,v())},a.focus=function(r){var t,n;return-1===r?t=n=0:1===r&&(t=c(v()),n=e.scrollHeight),s(t)&&s(n)&&(e.selectionStart=e.selectionEnd=t,e.scrollTop=n),e.focus(),a},a.blur=function(){return e.blur(),a},a.select=function(){if(f()||h())return e.focus(),a;for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];var i,s,o,u,l=c(t),p=a.$(),v=p.start,$=p.end;if(i=d.pageXOffset||g.scrollLeft||m.scrollLeft,s=d.pageYOffset||g.scrollTop||m.scrollTop,o=e.scrollLeft,u=e.scrollTop,0===l)t[0]=v,t[1]=$;else if(1===l){if(!0===t[0])return e.focus(),e.select(),a;t[1]=t[0]}return e.focus(),e.selectionStart=t[0],e.selectionEnd=t[1],e.scrollLeft=o,e.scrollTop=u,d.scroll(i,s),a},a.match=function(e,n){var i=a.$(),s=i.after,o=i.before,c=i.value;if(r(e)){var u=[o.match(e[0]),c.match(e[1]),s.match(e[2])];return t(n)?n.call(a,u[0]||[],u[1]||[],u[2]||[]):[!!u[0],!!u[1],!!u[2]]}var l=c.match(e);return t(n)?n.call(a,l||[]):!!l},a.replace=function(e,r,t){var n=a.$(),i=n.after,s=n.before,o=n.value;return-1===t?s=s.replace(e,r):1===t?i=i.replace(e,r):o=o.replace(e,r),a.set(s+o+i).select(s=c(s),s+c(o))},a.insert=function(e,r,t){var n=l;return t&&a.replace(n,""),-1===r?n=/$/:1===r&&(n=/^/),a.replace(n,e,r)},a.wrap=function(e,r,t){var n=a.$(),i=n.after,s=n.before,o=n.value;return t?a.replace(l,e+"$1"+r):a.set(s+e+o+r+i).select(s=c(s+e),s+c(o))},a.peel=function(e,r,t){var n=a.$(),i=n.after,s=n.before,o=n.value;e=_(e),r=_(r);var u=k(e+"$",""),l=k("^"+r,"");return t?a.replace(k("^"+e+"([\\s\\S]*?)"+r+"$",""),"$1"):u.test(s)&&l.test(i)?(s=s.replace(u,""),i=i.replace(l,""),a.set(s+o+i).select(s=c(s),s+c(o))):a.select()},a.pull=function(e,r){void 0===r&&(r=!0);var t=a.$(),n=t.length,o=t.value;return e=_(s(e)?e:i.tab),n?r?a.replace(k("^"+e,"gm"),""):a.insert(o.split("\n").map((function(r){return k("^("+e+")*$","").test(r)?r:r.replace(k("^"+e,""),"")})).join("\n")):a.replace(k(e+"$",""),"",-1)},a.push=function(e,r){void 0===r&&(r=!1);var t=a.$().length;return e=s(e)?e:i.tab,t?a.replace(k("^"+(r?"":"(?!$)"),"gm"),e):a.insert(e,-1)},a.trim=function(e,r,t,n,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==r&&!1!==r&&(r=r||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||"");var s=a.$(),o=s.before,u=s.value,l=s.after,f=q(o,1),p=q(l,-1);return o=!1!==e?q(o,1)+(f||!i?e:""):o,l=!1!==r?(p||!i?r:"")+q(l,-1):l,!1!==t&&(u=q(u,-1)),!1!==n&&(u=q(u,1)),a.set(o+u+l).select(o=c(o),o+c(u))},a.pop=function(){return e.TE?(delete e.TE,a):a},a.state=i,a}T.esc=_,T.instances={},T.state={tab:"\t"},T.S=function(e,r,t){var n=this,i=t.slice(e,r);n.after=t.slice(r),n.before=t.slice(0,e),n.end=r,n.length=c(i),n.start=e,n.value=i,n.toString=function(){return i}},T.version="3.3.8",T.x=L;var E={_history:[],_historyState:-1,history:function(e){var r=this;return s(e)?s(r._history[e])?r._history[e]:null:r._history},loss:function(e){var r,t=this;return!0===e?(t._history=[],t._historyState=-1,[]):(r=t._history.splice(s(e)?e:t._historyState,1),t._historyState=a(t._historyState-1,[-1]),r)},record:function(e){var r=this,t=r.$(),n=t.end,i=t.start,o=r._history[r._historyState]||[],c=[r.self.value,i,n];return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]||(++r._historyState,r._history[s(e)?e:r._historyState]=c),r},redo:function(){var e,r=this;return r._historyState=a(r._historyState+1,[0,c(r._history)-1]),e=r._history[r._historyState],r.set(e[0]).select(e[1],e[2])},undo:function(){var e,r=this;return r._historyState=a(r._historyState-1,[0,c(r._history)-1]),e=r._history[r._historyState],r.set(e[0]).select(e[1],e[2])}};function A(e,r){return new Promise((function(t,n){var i=d[e].apply(d,r);return i?t(i):n(i)}))}var M={source:{pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},type:null}};["alert","confirm","prompt"].forEach((function(e){M.source[e]=function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return A(e,t)}}));var W={};function j(e,r,t){var n,i,s=r.a,o=r.c,c=r.s,a=t.state.source.tab||t.state.tab||"\t",u=t.state.source.pairs||{},l=function(e){return Object.values(e)}(u);if(s||o)return!0;if(" "===e&&!c){var f=t.$(),p=f.after,h=f.before,v=f.value;return n=u[i=h.slice(-1)],!(!v&&n&&i&&n===p[0])||(t.wrap(" "," "),!1)}if("Enter"===e&&!c){var d=t.$(),m=d.after,g=d.before,$=d.value,b=g.split("\n").pop().match(/^(\s+)/),y=b&&b[1]||"";if(!$){if(m&&g&&(n=u[i=g.slice(-1)])&&n===m[0])return t.wrap("\n"+y+(i!==n?a:""),"\n"+y).record(),!1;if(y)return t.insert("\n"+y,-1).record(),!1}return!0}if("Backspace"===e&&!c){var w=t.$(),x=w.after,S=w.before,_=w.value;x.split("\n")[0];var k=S.split("\n").pop(),L=k.match(/^(\s+)/),q=L&&L[1]||"";return n=u[i=S.slice(-1)],"\\"===i?!0:_?!(x&&S&&n&&n===x[0]&&!S.endsWith("\\"+i))||(t.record().peel(i,n).record(),!1):(n=u[i=S.trim().slice(-1)])&&i&&(x.startsWith(" "+n)&&S.endsWith(i+" ")||x.startsWith("\n"+q+n)&&S.endsWith(i+"\n"+q))?(t.trim("","").record(),!1):k.endsWith(a)?(t.pull(a).record(),!1):!(x&&S&&!S.endsWith("\\"+i)&&n===x[0]&&i===S.slice(-1))||(t.peel(i,n).record(),!1)}var T=t.$(),E=T.after,A=T.before,M=T.start,W=T.value;if("\\"===(i=A.slice(-1)))return!0;if(n=l.includes(E[0])?E[0]:u[i],!W&&E&&A&&n&&e===n)return t.select(M+1).record(),!1;for(i in u){if(n=u[i],i===e&&n)return t.wrap(i,n).record(),!1;if(n===e){if(W)return t.record().wrap(i,n).record(),!1;break}}return!0}function H(e,r,t){var n=r.a,i=r.c;r.s;var s=t.state.source.tab||t.state.tab||"\t";if(!n&&i){if("]"===e)return t.push(s).record(),!1;if("["===e)return t.pull(s).record(),!1}return!0}function O(e,r,t){r.a;var n=r.c,i=r.s;if(n&&"Enter"===e){var s=t.$(),o=s.after,a=s.before,u=s.end,l=s.start,f=s.value,p=o.split("\n").shift(),h=a.split("\n").pop(),v=h.match(/^(\s+)/),d=v&&v[1]||"";if(a||o)return i?(t.select(l-c(h)).wrap(d,"\n").insert(f).record(),!1):(t.select(u+c(p)).wrap("\n"+d,"").insert(f).record(),!1)}return!0}function K(e,r,t){var n=r.a,i=r.c;if(r.s,!n&&i){if("y"===e)return t.redo(),!1;if("z"===e)return t.undo(),!1}return!0}function R(r,t,n){var i=t.a,s=t.c;if(t.s,s){var o,a,u,l=n.$(),f=l.after,p=l.before,h=l.end,v=l.start,d=l.value,m=n.state.source.pairs||{},g=[];if(d){if(!i){for(o in m)(a=m[o])&&g.push("(?:\\"+o+"(?:\\\\.|[^\\"+o+(a!==o?"\\"+a:"")+"])*\\"+a+")");g.push("\\w+"),g.push("\\s+")}if(g.push("[\\s\\S]"),"ArrowLeft"===r)return(u=p.match(k("("+g.join("|")+")$","")))?(n.insert("").select(v-c(u[0])).insert(d),n.record(),!1):(n.select(),!1);if("ArrowRight"===r)return(u=f.match(k("^("+g.join("|")+")","")))?(n.insert("").select(h+c(u[0])-c(d)).insert(d),n.record(),!1):(n.select(),!1)}var $=f.split("\n").shift(),b=p.split("\n").pop(),y=b.match(/^(\s+)/);if(y&&y[1],h+=c($),v-=c(b),d=b+d+$,"ArrowUp"===r){if(!e("\n",p))return n.select(),!1;n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"$2",1),n.replace(/(^|\n)([^\n]*?)$/,"",-1);var w=n.$();return p=w.before,v=w.start,b=p.split("\n").pop(),n.select(v-=c(b)).wrap(d,"\n"),n.select(v,v+c(d)),n.record(),!1}if("ArrowDown"===r){if(!e("\n",f))return n.select(),!1;n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"",1),n.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var x=n.$();return f=x.after,h=x.end,$=f.split("\n").shift(),n.select(h+=c($)).wrap("\n",d),h+=1,n.select(h,h+c(d)),n.record(),!1}}return!0}W.toggle=function(e,t,n,i){void 0===i&&(i=!1),t||""===t||(t=e);var s=this,a=s.$(),u=a.after,l=a.before,f=a.value,p=c(t),h=c(e);return n&&t===f.slice(-p)&&e===f.slice(0,h)||t===u.slice(0,p)&&e===l.slice(-h)?s.peel(e,t,n):(!1!==i&&(o(i)?i=[i,i]:r(i)||(i=["",""]),isSet(i[1])||(i[1]=i[0]),s.trim(i[0],i[1])),s.wrap(e,t,n))};var X,D,U,B=(X=function(e){return e.record()},D=100,function(){var e=arguments,r=this;U&&clearTimeout(U),U=setTimeout((function(){return X.apply(r,e)}),D)});var z=M,F="[\\w:.-]+",I=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},J=function(e){return"</("+e+")>"},N="(?:\x3c!--([\\s\\S](?!--\x3e)*)--\x3e|<!((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)>|"+J(F)+"|<\\?((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)\\?>|"+I(F)+"|"+function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?/?>"}(F)+")",P={};function Y(e){if(!e)return"";e=u(e).sort().reduce((function(r,t){return r[t]=e[t],r}),{});var r,t,n="";for(r in e)!1!==(t=e[r])&&null!==t&&(n+=" "+r,!0!==t&&(n+='="'+f(h(t))+'"'));return n}function C(e){return!1!==e&&(o(e)?e=[e,e]:r(e)||(e=["",""]),s(e[1])||(e[1]=e[0])),e}function G(e,r,t){var n=r.a,i=r.c,s=r.s,o=t.state,a=o.sourceXML.tab||o.tab||"\t";if(n||i)return!0;if(["-",">","/","?"," "].includes(e)){var u=t.$(),l=u.after,f=u.before,p=u.value,h=u.start;if("-"===e&&!p&&"<!-"===f.slice(-3))return t.wrap("- "," --"+(">"===l[0]?"":">")).record(),!1;if(">"===e||"/"===e){var v=k(I(F)+"$","").exec(f+">");if(!p&&v)return"/"===e?">"===l[0]?(t.trim("",!1).insert(" /",-1).select(t.$().start+1).record(),!1):(t.trim("",!1).insert(" />",-1).record(),!1):(l.startsWith("></"+v[1]+">")?t.select(h+1).record():l.startsWith("</"+v[1]+">")?t.insert(">",-1).record():t.wrap(">","</"+v[1]+(">"===l[0]?"":">")).record(),!1)}if("?"===e&&!p&&"<"===f.slice(-1))return t.wrap("?","?"+(">"===l[0]?"":">")).record(),!1;if(" "===e&&!p&&("--\x3e"===l.slice(0,3)&&"\x3c!--"===f.slice(-4)||"?>"===l.slice(0,2)&&"<?"===f.slice(0,2)&&/<\?\S*$/.test(f)))return t.wrap(" "," ").record(),!1}if("ArrowLeft"===e&&!s){var d=t.$(),m=d.before,g=d.start;if(!d.value){var $=k(N+"$","").exec(m);if($)return t.select(g-c($[0]),g),!1}}if("ArrowRight"===e&&!s){var b=t.$(),y=b.after,w=b.start;if(!b.value){var x=k("^"+N,"").exec(y);if(x)return t.select(w,w+c(x[0])),!1}}if("Enter"===e&&!s){var S=t.$(),L=S.after,q=S.before,T=S.value,E=q.split("\n").pop().match(/^(\s+)/),A=E&&E[1]||"",M=q.match(k(I(F)+"$",""));if(!T){if(/^[ \t]*-->/.test(L)&&/<!--[ \t]*$/.test(q)||/^[ \t]*\?>/.test(L)&&/<\?\S*[ \t]*$/.test(q))return t.trim().wrap("\n"+A,"\n"+A).record(),!1;if(M)return L.startsWith("</"+M[1]+">")?t.record().trim().wrap("\n"+A+a,"\n"+A).record():t.record().wrap("\n"+A+a,"\n"+A+"</"+M[1]+">").record(),!1}}if("Backspace"===e&&!s){var W=t.$(),j=W.after,H=W.before;if(!W.value){if("\x3c!--"===H.slice(-4))return t.replace(/<!--$/,"",-1),"--\x3e"===j.slice(0,3)&&t.replace(/^-->/,"",1),t.record(),!1;if(/^\s+-->/.test(j)&&/<!--\s+$/.test(H))return t.trim(" "===H.slice(-1)?"":" "," "===j[0]?"":" ").record(),!1;if(/<\?\S*$/.test(H))return t.replace(/<\?\S*$/,"",-1),"?>"===j.slice(0,2)&&t.replace(/^\?>/,"",1),t.record(),!1;if(/^\s+\?>/.test(j)&&/<\?\S*\s+$/.test(H))return t.trim(" "===H.slice(-1)?"":" "," "===j[0]?"":" ").record(),!1;var O=k(N+"$",""),K=O.exec(H);if(K){if(" />"===H.slice(-3))return t.replace(/ \/>$/,"/>",-1).record(),!1;if("/>"===H.slice(-2))return t.replace(/\/>$/,">",-1).record(),!1;t.replace(O,"",-1);var R=K[0].slice(1).split(/\s+|>/)[0];return K[0]&&"/"!==K[0][1]&&j.startsWith("</"+R+">")&&t.replace(k("^</"+R+">",""),"",1),t.record(),!1}if(k(I(F)+"\\n(?:"+_(a)+")?$","").test(H)&&k("^\\s*"+J(F),"").test(j))return t.trim().record(),!1}}if("Delete"===e&&!s){var X=t.$(),D=X.after;if(!X.value){if("--\x3e"===D.slice(0,3))return t.replace(/^-->/,"",1).record(),!1;if("?>"===D.slice(0,2))return t.replace(/^\?>/,"",1).record(),!1;var U=k("^"+N,"");if(U.exec(D))return t.replace(U,"",1).record(),!1}}return!0}P.insert=function(e,r,t,n){void 0===r&&(r=""),void 0===t&&(t={}),void 0===n&&(n=!1);return!1!==(n=C(n))&&this.trim(n[0],""),this.insert("<"+e+Y(t)+(!1!==r?">"+r+"</"+e+">":" />")+(!1!==n?n[1]:""),-1,!0)},P.toggle=function(e,r,t,n){void 0===r&&(r=""),void 0===t&&(t={}),void 0===n&&(n=!1);var i=this,s=i.$(),o=s.after,c=s.before,a=s.value,u=I(e),l=J(e),f=k(u+"$",""),p=k("^"+l,""),h=f.test(c),v=p.test(o);return v&&h?i.replace(p,"",1).replace(f,"",-1):(f=k("^"+u,""),p=k(l+"$",""),h=f.test(a),(v=p.test(a))&&h&&i.insert(a=a.replace(p,"").replace(f,"")),!a&&r&&i.insert(r),!1!==(n=C(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+Y(t)+">","</"+e+">"))},P.wrap=function(e,r,t,n){void 0===r&&(r=""),void 0===t&&(t={}),void 0===n&&(n=!1);var i=this,s=i.$();return s.after,s.before,!s.value&&r&&i.insert(r),!1!==(n=C(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+Y(t)+">","</"+e+">")};var Q={source:{type:"XML"},sourceXML:{}},V=y.protocol,Z=P.toggle,ee="[\\w:.-]+",re=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},te=function(e){return"</("+e+")>"};function ne(e){return!1!==e&&(o(e)?e=[e,e]:r(e)||(e=["",""]),s(e[1])||(e[1]=e[0])),e}function ie(e,r,n){var i=r.a,s=r.c,o=r.s,a=n.state,u=a.sourceHTML.tab||a.source.tab||a.tab||"\t",l=a.sourceHTML.elements||{},f=a.source.prompt;if(s){var h=n.$(),v=h.after,d=h.before,m=h.end,g=h.start,$=h.value,b=v.split("\n").shift(),y=d.split("\n").pop(),w=y.match(/^(\s+)/),x=w&&w[1]||"";if("b"===e)return Z.apply(n,l.b),!1;if("g"===e)return t(f)&&f("URL:",$&&/^https?:\/\/\S+$/.test($)?$:V+"//").then((function(e){if(e){var r=l.img;$&&(r[2].alt=$,n.record());var t=r[3]||!1;!1!==(t=ne(t))&&n.trim(t[0],""),r[2].src=e,v&&"\n"!==v[0]||d&&"\n"!==d.slice(-1)?n.insert("<"+r[0]+Y(r[2])+">"+(!1!==t?t[1]:""),-1,!0):(!1!==(t=ne(t=l.figure[3]||!1))&&n.trim(t[0],t[1]),n.insert(""),n.wrap(x+"<"+l.figure[0]+Y(l.figure[2])+">\n"+x+u,x+"\n</"+l.figure[0]+">"),n.insert("<"+r[0]+Y(r[2])+">\n"+x+u,-1),n.wrap("<"+l.figcaption[0]+Y(l.figcaption[2])+">","</"+l.figcaption[0]+">").insert(l.figcaption[1]))}else n.focus()})),n.record(),!1;if("h"===e)return function(e){var r=/<(?:h([1-6])|p)(\s[^>]*)?>$/,t=/^<\/(?:h[1-6]|p)>/;e.match([r,/.*/,t],(function(n,i,s){var o=this,c=+(n[1]||0),a=n[2]||"",u=e.state.sourceHTML.elements||{},l=n[0]?u[n[0].slice(1,-1).split(/\s/)[0]]:["","",{}];!a&&l[2]&&(a=Y(l[2])),o.replace(r,"",-1),o.replace(t,"",1);var f=l[3]||u.h1[3];!1!==(f=ne(f))&&o.trim(f[0],f[1]),c?++c>6?(o.wrap("<"+u.p[0]+(a||Y(u.p[2]))+">","</"+u.p[0]+">"),i[0]&&i[0]!==u.h6[1]||o.insert(u.p[1])):(o.wrap("<"+u["h"+c][0]+(a||Y(u["h"+c][2]))+">","</"+u["h"+c][0]+">"),i[0]&&i[0]!==u.p[1]||o.insert(u["h"+c][1])):(o.wrap("<"+u.h1[0]+(a||Y(u.h1[2]))+">","</"+u.h1[0]+">"),i[0]&&i[0]!==u.p[1]||o.insert(u.h1[1]))}))}(n),n.record(),!1;if("i"===e)return Z.apply(n,l.i),!1;if("k"===e)return function(e){var r=/<(?:pre|code)(?:\s[^>]*)?>(?:\s*<code(?:\s[^>]*)?>)?$/,t=/^(?:<\/code>\s*)?<\/(?:pre|code)>/;e.match([r,/.*/,t],(function(n,i,s){var o,c=this,a=e.state.sourceHTML.elements;c.replace(r,"",-1),c.replace(t,"",1),s[0]?/^(?:<\/code>\s*)?<\/pre>/.test(s[0])?(!1!==(o=ne(o=a[""][3]))&&c.trim(o[0],o[1]),c.insert(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(i[0]))):s[0].slice(0,7)==="</"+a.code[0]+">"&&(!1!==(o=ne(o=a.pre[3]))&&c.trim(o[0],o[1]),c.wrap("<"+a.pre[0]+Y(a.pre[2])+"><"+a.code[0]+Y(a.code[2])+">","</"+a.code[0]+"></"+a.pre[0]+">")):(!1!==(o=ne(o=a.code[3]))&&c.trim(o[0],o[1]),c.wrap("<"+a.code[0]+Y(a.code[2])+">","</"+a.code[0]+">").insert(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(i[0]||a.code[1])))}))}(n),n.record(),!1;if("l"===e)return t(f)&&f("URL:",$&&/^https?:\/\/\S+$/.test($)?$:V+"//").then((function(e){if(e){var r=l.a;$&&n.record(),r[2].href=e;var t={};/[.\/?&#]/.test(e[0])||/^(data|javascript|mailto):/.test(e)||-1===e.indexOf("://")||(t.rel="nofollow",t.target="_blank");var i=ne(r[3]||!1);!1!==i||$||(i=[" "," "]),Z.call(n,r[0],r[1],p(t,r[2]),i)}else n.focus()})),n.record(),!1;if("q"===e)return function(e){var r=/<(blockquote|q)(?:\s[^>]*)?>\s*$/,t=/^\s*<\/(blockquote|q)>/;e.match([r,/.*/,t],(function(n,i,s){var o,c=this,a=e.state,u=a.sourceHTML.tab||a.source.tab||a.tab||"\t",l=e.state.sourceHTML.elements||{};c.replace(r,"",-1),c.replace(t,"",1),s[0]?l.blockquote[0]===s[1]?!1!==(o=ne(l[""][3]))&&c.trim(o[0],o[1]):l.q[0]===s[1]&&(!1!==(o=ne(l.blockquote[3]))&&c.trim(o[0],o[1]),c.wrap("<"+l.blockquote[0]+Y(l.blockquote[2])+">\n","\n</"+l.blockquote[0]+">").insert(i[0]||l.blockquote[1]),c.replace(k("(^|\\n)"),"$1"+u)):(!1!==(o=ne(l.q[3]))&&c.trim(o[0],o[1]),c.wrap("<"+l.q[0]+Y(l.q[2])+">","</"+l.q[0]+">").insert(i[0]||l.q[1]),c.replace(k("(^|\\n)"+u),"$1"))}))}(n),n.record(),!1;if("u"===e)return Z.apply(n,l.u),!1;if("Enter"===e){var S=b.match(k(te(ee)+"\\s*$","")),_=l[S&&S[1]||"p"]||l.p;return _[3]=["\n"+x,"\n"+x],n.select(o?g-c(y):m+c(b)),Z.apply(n,_),n.record(),!1}}if(i||s)return!0;if(">"===e){var L,q=n.$(),T=q.after,E=q.before,A=q.end,M=(E.split("\n").pop()+">").match(k(re(ee)+"$","")),W=l[L=M&&M[1]||""];return!L||(W?!1!==W[1]?(">"===T[0]?n.select(A+1):n.insert(">",-1),n.insert("</"+L+">",1).insert(W[1])):">"===T[0]?n.insert(" /",-1).select(A+3):n.insert(" />",-1):(">"===T[0]?n.select(A+1):n.insert(">",-1),n.insert("</"+L+">",1)),n.record(),!1)}if("Enter"===e){var j,H,O=n.$(),K=O.after,R=O.before,X=O.value,D=K.split("\n").shift(),U=R.split("\n").pop(),B=U.match(/^(\s+)/),z=B&&B[1]||"",F=["li","option","p","td","th"],I=["script","style"];if(j=U.match(k(re(ee)+"$",""))){var J=l[j[1]];if(J&&!1===J[1])return n.insert("\n"+z,-1).record(),!1}if(K&&R){for(var N=0,P=c(F);N<P;++N)if(k("^"+te(H=F[N]),"").test(D)&&(j=U.match(k("^\\s*"+re(H),""))))return j[0]===U?(l[H]&&X&&l[H][1]===X?n.insert("").wrap("\n"+z+u,"\n"+z):Z.call(n,H),n.record(),!1):(n.insert("</"+H+">\n"+z+"<"+H+(j[2]||"")+">",-1).insert(l[H]&&l[H][1]||"").record(),!1);for(var C=0,G=c(I);C<G;++C)if(k("^"+te(H=I[C]),"").test(D)&&k(re(H)+"$","").test(U))return n.wrap("\n"+z,"\n"+z).insert(l[H]&&l[H][1]||"").record(),!1;for(var Q=1;Q<7;++Q)if(D.startsWith("</"+l["h"+Q][0]+">")&&U.match(k("^\\s*"+re(l["h"+Q][0]),"")))return l["h"+Q]&&X&&l["h"+Q][1]===X?n.insert("").wrap("\n"+z+u,"\n"+z):n.insert("</"+l["h"+Q][0]+">\n"+z+"<"+l.p[0]+">",-1).replace(k("^"+te(l["h"+Q][0])),"</"+l.p[0]+">",1).insert(l.p[1]),n.record(),!1}}return!0}var se={source:{type:"HTML"},sourceHTML:{elements:{"":["","text goes here…",{},""],a:["a","link text goes here…",{}],area:["area",!1,{}],b:["strong","text goes here…",{}],base:["base",!1,{href:""},"\n"],blockquote:["blockquote","",{},"\n"],br:["br",!1,{},["","\n"]],button:["button","text goes here…",{name:"",type:"submit"}," "],caption:["caption","caption goes here…",{},"\n"],code:["code","code goes here…",{}," "],col:["col",!1,{},"\n"],em:["em","text goes here…",{}],figcaption:["figcaption","caption goes here…",{},"\n"],figure:["figure","",{},"\n"],h1:["h1","title goes here…",{},"\n"],h2:["h2","title goes here…",{},"\n"],h3:["h3","title goes here…",{},"\n"],h4:["h4","title goes here…",{},"\n"],h5:["h5","title goes here…",{},"\n"],h6:["h6","title goes here…",{},"\n"],hr:["hr",!1,{},"\n"],i:["em","text goes here…",{}],img:["img",!1,{alt:"",src:""}," "],input:["input",!1,{name:"",type:"text"}," "],li:["li","list item goes here…",{},"\n"],link:["link",!1,{href:""},"\n"],meta:["meta",!1,{},"\n"],ol:["ol","",{},"\n"],option:["option","option goes here…",{},"\n"],p:["p","paragraph goes here…",{},"\n"],param:["param",!1,{name:""},"\n"],pre:["pre","text goes here…",{},"\n"],q:["q","quote goes here…",{}," "],script:["script","",{},"\n"],select:["select","",{name:""}," "],source:["source",!1,{src:""},"\n"],strong:["strong","text goes here…",{}],style:["style","",{},"\n"],td:["td","data goes here…",{},"\n"],textarea:["textarea","text goes here…",{name:""}," "],th:["th","title goes here…",{},"\n"],tr:["tr","",{},"\n"],track:["track",!1,{},"\n"],u:["u","text goes here…",{}],ul:["ul","",{},"\n"],wbr:["wbr",!1,{},["","\n"]]}}};function oe(e){let r=this.$,t=r.state.source.type,n=e.key,i={a:e.altKey,c:e.ctrlKey,s:e.shiftKey};"HTML"!==t?"XML"!==t?j(n,i,r)&&H(n,i,r)&&O(n,i,r)&&K(n,i,r)&&R(n,i,r)||x(e):G(n,i,r)&&j(n,i,r)&&H(n,i,r)&&O(n,i,r)&&K(n,i,r)&&R(n,i,r)||x(e):ie(n,i,r)&&G(n,i,r)&&j(n,i,r)&&H(n,i,r)&&O(n,i,r)&&K(n,i,r)&&R(n,i,r)||x(e)}function ce(r){let t=this.$;r.key;!function(r,t,n){t.a;var i=t.c;t.s,i||d.setTimeout((function(){var r=n.$(),t=r.after,i=r.before,s=r.value;if(!s)for(var o,a,u=N.split("([\\w:.-]+)").join("((?:[\\w:.-]|\ufeff)+)"),l=k(u),f=i+s+"\ufeff"+t;o=l.exec(f);)if(e("\ufeff",o[0])){n.select(a=o.index,a+c(o[0])-1);break}}),1)}(0,{a:r.altKey,c:r.ctrlKey,s:r.shiftKey},t)}function ae(e){let r=this.$;e.key;!function(e,r,t){r.a,r.c,r.s,B(t)}(0,{a:e.altKey,c:e.ctrlKey,s:e.shiftKey},r)}function ue(){let e;for(let t in T.instances)e=T.instances[t],e.loss().pop(),delete e.self.$,delete T.instances[t],r=e.self,w("keydown",r,oe),w("keyup",r,ae),w("mousedown",r,ce),w("touchstart",r,ce);var r;let t=(n=".lot\\:field.type\\:source .textarea",(i||v).querySelectorAll(n));var n,i;t&&c(t)&&t.forEach((e=>{e.$=new T(e,$(e,"state")??{}),function(e){S("keydown",e,oe),S("keyup",e,ae),S("mousedown",e,ce),S("touchstart",e,ce),e.$.record()}(e)}))}Object.assign(T.prototype,E,W),T.state=p({},T.state,z,Q,se),["alert","confirm","prompt"].forEach((e=>{d._[e]&&(T.state.source[e]=d._[e])})),delete T.state.source.type,ue(),d._.on("change",ue),d.TE=T}();