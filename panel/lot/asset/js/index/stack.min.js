!function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t){return"function"==typeof t},e=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||function(t,n){return t&&r(n)&&t instanceof n}(t,Object))},r=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},u=function(t){return"string"==typeof t},i=function n(r){if(t(r))return r.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(r))return function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)}(r);if(e(r)){for(var u in r)r[u]=n(r[u]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},c=function n(r){if(t(r))return r.map((function(t){return n(r)}));if(e(r)){for(var u in r)r[u]=n(r[u]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},o=document,l=window,f=function(t){return t.firstElementChild||null},a=function(t,n,e){void 0===e&&(e=!0);var r=function(t,n,e){if(void 0===e&&(e=!0),!h(t,n))return null;var r=t.getAttribute(n);return e?i(r):r}(t,"data-"+n,e),u=(r+"").trim();return e&&u&&("["===u[0]&&"]"===u.slice(-1)||"{"===u[0]&&"}"===u.slice(-1))&&null!==(u=function(t){var n=null;try{n=JSON.parse(t)}catch(t){}return n}(r))?u:r},s=function(t,n){return(n||o).querySelector(t)},d=function(t,n){return(n||o).querySelectorAll(t)},v=function(t){return t.nextElementSibling||null},g=function(t){return t.parentNode||null},p=function(t){return t.previousElementSibling||null},h=function(t,n){return t.hasAttribute(n)},k=function(t,n){return t.classList.contains(n)},w=function(t,n){return t.removeAttribute(n),t},y=function(t,n){return t.classList.remove(n),t},A=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,c(e)),t},m=function(t,n){return t.classList.add(n),t},E=function(t,n,r){return t=u(t)?o.createElement(t):t,e(n)&&(r=n,n=!1),u(n)&&b(t,n),e(r)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?A(t,r,e):w(t,r)}(t,r),t},b=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return function(t,n){return n in t}(t,r)&&(t[r]=e?n.trim():n),t},L=function(t,n,e){return t.classList.toggle(n,e),t},P={},x=function(t,n,e,u){n.dispatchEvent(function(t,n,e){return e&&r(P[t])?P[t]:P[t]=new Event(t,n)}(t,e,u))},D=function(t){return t&&t.preventDefault()},K=function(t){return t&&t.stopPropagation()},S=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)};const U='a[target^="stack:"]:not(.not\\:active)';function H(){let t=d(".lot\\:stacks[tabindex]");t&&t.length&&t.forEach((t=>{let n,e,r=[].slice.call((c=t.children,"number"==typeof i?c[i]||null:c||[])),u=E("input");var i,c;function o(t){let i=this,c=g(g(i));k(c,"has:link")||(r.forEach((t=>{t!==c&&(y(t,"is:current"),y(s('a[target^="stack:"]',t),"is:current"))})),k(c,"can:toggle")?(L(i,"is:current"),L(c,"is:current"),u.value=e=k(i,"is:current")?a(c,"value"):null):(m(i,"is:current"),m(c,"is:current"),u.value=e=a(c,"value")),l._.fire.call(c,"change.stack",[e,n])),D(t)}u.type="hidden",u.name=n=a(t,"name"),function(t,n){t.append(n)}(t,u),r.forEach((t=>{let n=s(U,t);S("click",n,o),S("keydown",n,R)}));let f=r.find(((t,n)=>0!==n&&k(t,"is:current")));f&&(u.value=a(f,"value")),S("keydown",t,j)}))}function R(t){if(t.defaultPrevented)return;let e,r=this,u=t.key,i=t.altKey,c=t.ctrlKey;if(!i&&!c){let t,i,c,o,l;if("ArrowDown"===u||"ArrowRight"===u||"PageDown"===u){if(o=g(g(r)))for(c=v(o);c&&k(c,"not:active");)c=v(c);(i=c&&f(c))&&("ArrowRight"===u&&k(g(i),"can:toggle")||x("click",f(i)),i=f(i),n(i.focus)&&i.focus()),e=!0}else if("ArrowUp"===u||"ArrowLeft"===u||"PageUp"===u){if(o=g(g(r)))for(l=p(o);l&&k(l,"not:active");)l=p(l);(i=l&&f(l))&&("ArrowLeft"===u&&k(g(i),"can:toggle")||x("click",f(i)),i=f(i),n(i.focus)&&i.focus()),e=!0}else" "===u||"Enter"===u?(k(g(g(r)),"can:toggle")&&(x("click",r),n(r.focus)&&r.focus()),e=!0):"Escape"===u?((o=r.closest(".lot\\:stacks[tabindex]"))&&n(o.focus)&&o.focus(),e=!0):"End"===u?((o=r.closest(".lot\\:stacks[tabindex]"))&&(t=[].slice.call(d(U,o)),(i=t.pop())&&(x("click",i),n(i.focus)&&i.focus())),e=!0):"Home"===u&&((o=r.closest(".lot\\:stacks[tabindex]"))&&(i=s(U,o))&&(x("click",i),n(i.focus)&&i.focus()),e=!0)}e&&(D(t),K(t))}function j(t){if(t.defaultPrevented)return;let e,r=this,u=t.key,i=t.altKey,c=t.ctrlKey,o=t.shiftKey;if(r===t.target){if(!i&&!c&&!o){let t,i;"ArrowDown"===u||"ArrowRight"===u||"Home"===u||"PageDown"===u?((i=s(U,r))&&(x("click",i),n(i.focus)&&i.focus()),e=!0):"ArrowUp"!==u&&"ArrowLeft"!==u&&"End"!==u&&"PageUp"!==u||(t=[].slice.call(d(U,r)),(i=t.pop())&&(x("click",i),n(i.focus)&&i.focus()),e=!0)}e&&(D(t),K(t))}}H(),l._.on("change",H)}();