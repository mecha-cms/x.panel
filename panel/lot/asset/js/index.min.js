!function(){"use strict";var e=function(e){return"function"==typeof e},n=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},t=document,r=window,o=t.body,u=t.documentElement,f=function(e,n){return(n||t).querySelector(e)},l=function(e,n){return e.classList.contains(n)},i=function(e){return e&&e.preventDefault()},c=function(e,n,t,r){void 0===r&&(r=!1),n.addEventListener(e,t,r)};function s(t){void 0===t&&(t={});var r=this;return r.commands={},r.fire=function(t){var o,u,f=r.source;if(e(t))o=t.call(f),u=!0;else if("string"==typeof t&&(t=r.commands[t]))o=t.call(f),u=!0;else if(function(e){return Array.isArray(e)}(t)){var l=t[1]||[];(t=r.commands[t[0]])&&(o=t.apply(f,l),u=!0)}return u?!n(o)||o:null},r.key=null,r.keys={},r.pull=function(e){return r.key=null,n(e)?(delete r.queue[e],r):(r.queue={},r)},r.push=function(e){return r.queue[r.key=e]=1,r},r.queue={},r.source=t,r.test=function(){var e=r.keys[r.toString()];return!!n(e)&&e},r.toString=function(){return(e=r.queue,Object.keys(e)).join("-");var e},r}let a=new s(r);c("blur",r,(e=>a.pull())),c("keydown",r,(e=>{a.push(e.key);let n=a.test();if(n){let t=a.fire(n);!1===t?i(e):null===t&&console.error("Unknown command:",n)}})),c("keyup",r,(e=>a.pull(e.key)));const d={commands:a.commands,keys:a.keys},{fire:y,hooks:k,off:v,on:m}=function(e){var t={};return e.hooks=t,e.fire=function(r,o){return n(t[r])?(t[r].forEach((function(n){return n.apply(e,o)})),e):e},e.off=function(r,o){if(!n(r))return t={},e;if(n(t[r]))if(n(o)){for(var u=0,f=t[r].length;u<f;++u)if(o===t[r][u]){t[r].splice(u,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,o){return n(t[r])||(t[r]=[]),n(o)&&t[r].push(o),e},e}(d);r.K=s,r._=d,c("beforeload",t,(()=>y("let"))),c("load",t,(()=>y("get"))),c("DOMContentLoaded",t,(()=>y("set")));const p=(h="get",t.forms[h]||null);var h;c("keydown",r,(function(n){if(n.defaultPrevented)return;let c,s,a=n.key,d=n.altKey,y=n.ctrlKey,k=n.shiftKey,v=n.target;d||y||k?o!==v&&t!==v&&u!==v&&this!==v||y&&("f"!==a||d||k||(p&&p.q&&p.q.focus(),s=!0)):"F6"===a?(s=!0,v===o||v===t||v===u||v===r?c=f(".lot\\:bar"):l(v,"lot:bar")?c=f(".lot\\:desk"):l(v,"lot:desk")?c=u:s=!1,c&&e(c.focus)&&c.focus()):"F10"===a&&((c=f(".lot\\:bar a[href]:not(.not\\:active)")||f(".lot\\:bar"))&&e(c.focus)&&c.focus(),s=!0),s&&i(n)})),p&&c("keydown",p,(function(e){if(e.defaultPrevented)return;let n,t=e.key,r=e.altKey,o=e.ctrlKey,f=e.shiftKey;!(o&&"f"===t||"Escape"===t)||r||f||(u.focus(),n=!0),n&&i(e)}))}();