!function(){"use strict";var e=function(e){return"function"==typeof e},n=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},t=document,o=window,r=t.body,u=t.documentElement,f=function(e,n){return(n||t).querySelector(e)},c=function(e,n){return e.classList.contains(n)},i={},l=function(e,t,o,r){t.dispatchEvent(function(e,t,o){return o&&n(i[e])?i[e]:i[e]=new Event(e,t)}(e,o,r))},s=function(e){return e&&e.preventDefault()},a=function(e,n,t,o){void 0===o&&(o=!1),n.addEventListener(e,t,o)};function d(t){void 0===t&&(t={});var o=this;return o.commands={},o.fire=function(t){var r,u,f=o.source;if(e(t))r=t.call(f),u=!0;else if("string"==typeof t&&(t=o.commands[t]))r=t.call(f),u=!0;else if(function(e){return Array.isArray(e)}(t)){var c=t[1]||[];(t=o.commands[t[0]])&&(r=t.apply(f,c),u=!0)}return u?!n(r)||r:null},o.key=null,o.keys={},o.pull=function(e){return o.key=null,n(e)?(delete o.queue[e],o):(o.queue={},o)},o.push=function(e){return o.queue[o.key=e]=1,o},o.queue={},o.source=t,o.test=function(){var e=o.keys[o.toString()];return!!n(e)&&e},o.toString=function(){return(e=o.queue,Object.keys(e)).join("-");var e},o}let y=new d(o);a("blur",o,(e=>y.pull())),a("keydown",o,(e=>{y.push(e.key);let n=y.test();if(n){let t=y.fire(n);!1===t?s(e):null===t&&console.error("Unknown command:",n)}})),a("keyup",o,(e=>y.pull(e.key)));const k={commands:y.commands,keys:y.keys},{fire:p,hooks:v,off:m,on:h}=function(e){var t={};return e.hooks=t,e.fire=function(o,r){return n(t[o])?(t[o].forEach((function(n){return n.apply(e,r)})),e):e},e.off=function(o,r){if(!n(o))return t={},e;if(n(t[o]))if(n(r)){for(var u=0,f=t[o].length;u<f;++u)if(r===t[o][u]){t[o].splice(u,1);break}0===j&&delete t[o]}else delete t[o];return e},e.on=function(o,r){return n(t[o])||(t[o]=[]),n(r)&&t[o].push(r),e},e}(k);o.K=d,o._=k,a("beforeload",t,(()=>p("let"))),a("load",t,(()=>p("get"))),a("DOMContentLoaded",t,(()=>p("set")));const b=(g="get",t.forms[g]||null);var g;const w=b&&b.q;a("keydown",o,(function(n){if(n.defaultPrevented)return;let i,a,d=n.key,y=n.altKey,k=n.ctrlKey,p=n.shiftKey,v=n.target;y||k||p?r!==v&&t!==v&&u!==v&&this!==v||k&&("?"!==d||y?"f"!==d||y||(w&&w.focus(),a=!0):(console.info("TODO: Go to the about page."),a=!0)):"F6"===d?(a=!0,v===r||v===t||v===u||v===o?i=f(".lot\\:bar"):c(v,"lot:bar")?i=f(".lot\\:desk"):c(v,"lot:desk")?i=u:a=!1,i&&e(i.focus)&&i.focus()):"F10"===d&&((i=f(".lot\\:bar a[href]:not(.not\\:active)")||f(".lot\\:bar"))&&(c(i.parentNode||null,"has:menu")&&l("click",i),e(i.focus)&&i.focus()),a=!0),a&&s(n)})),w&&a("keydown",w,(function(e){if(e.defaultPrevented)return;let n,t=e.key,o=e.altKey,r=e.ctrlKey,f=e.shiftKey;!(r&&"f"===t||"Escape"===t)||o||f||(u.focus(),n=!0),n&&s(e)}))}();