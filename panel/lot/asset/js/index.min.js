!function(){"use strict";var n=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},e=document,t=window,r=function(n,e,t,r){void 0===r&&(r=!1),e.addEventListener(n,t,r)};function u(e){void 0===e&&(e={});var t=this;return t.commands={},t.fire=function(e){var r,u,o=t.source;if("function"==typeof e)r=e.call(o),u=!0;else if(function(n){return"string"==typeof n}(e)&&(e=t.commands[e]))r=e.call(o),u=!0;else if(function(n){return Array.isArray(n)}(e)){var i=e[1]||[];(e=t.commands[e[0]])&&(r=e.apply(o,i),u=!0)}return u?!n(r)||r:null},t.key=null,t.keys={},t.pull=function(e){return t.key=null,n(e)?(delete t.queue[e],t):(t.queue={},t)},t.push=function(n){return t.queue[t.key=n]=1,t},t.queue={},t.source=e,t.test=function(){var e=t.keys[t.toString()];return!!n(e)&&e},t.toString=function(){return(n=t.queue,Object.keys(n)).join("-");var n},t}let o=new u(t);r("blur",t,(n=>o.pull())),r("keydown",t,(n=>{o.push(n.key);let e=o.test();if(e){let t=o.fire(e);!1===t?function(n){n&&n.preventDefault()}(n):null===t&&console.error("Unknown command:",e)}})),r("keyup",t,(n=>o.pull(n.key)));const i={commands:o.commands,keys:o.keys};["alert","confirm","prompt"].forEach((n=>{i[n]=(...e)=>function(n,e){return new Promise(((r,u)=>{let o=t[n].apply(t,e);return o?r(o):u(o)}))}(n,e)}));const{fire:f,hooks:l,off:c,on:s}=function(e){var t={};return e.hooks=t,e.fire=function(r,u){return n(t[r])?(t[r].forEach((function(n){return n.apply(e,u)})),e):e},e.off=function(r,u){if(!n(r))return t={},e;if(n(t[r]))if(n(u)){for(var o=0,i=t[r].length;o<i;++o)if(u===t[r][o]){t[r].splice(o,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,u){return n(t[r])||(t[r]=[]),n(u)&&t[r].push(u),e},e}(i);t.K=u,t._=i,r("beforeload",e,(()=>f("let"))),r("load",e,(()=>f("get"))),r("DOMContentLoaded",e,(()=>f("set")))}();