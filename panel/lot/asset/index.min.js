!function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n,t){return void 0===t&&(t=!0),"object"==typeof n&&(!t||function(n,t){return n&&u(t)&&n instanceof t}(n,Object))},u=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},r=function(n){return"string"==typeof n},o=function t(u){if(n(u))return u.map((function(n){return t(u)}));if(e(u)){for(var r in u)u[r]=t(u[r]);return u}return!1===u?"false":null===u?"null":!0===u?"true":""+u},i=document,l=window,c=i.body,f=i.documentElement,a=function(n,t){return(t||i).querySelector(n)},s=function(n,t){return t?n.closest(t)||null:n.parentNode||null},p=function(n,t){return n.removeAttribute(t),n},m=function(n,t,e){return!0===e&&(e=t),n.setAttribute(t,o(e)),n},d=function(n,t,e){if(void 0===e&&(e=!0),null===t)return n;var u="innerHTML";return function(n,t){return t in n}(n,u)&&(n[u]=e?t.trim():t),n},v=function(n){return n&&n.preventDefault()},y=function(n,t,e,u){void 0===u&&(u=!1),t.addEventListener(n,e,u)};function b(e){void 0===e&&(e={});var o=this;return o.commands={},o.fire=function(e){var i,l,c=o.source;if(t(e))i=e.call(c),l=!0;else if(r(e)&&(e=o.commands[e]))i=e.call(c),l=!0;else if(n(e)){var f=e[1]||[];(e=o.commands[e[0]])&&(i=e.apply(c,f),l=!0)}return l?!u(i)||i:null},o.key=null,o.keys={},o.pull=function(n){return o.key=null,u(n)?(delete o.queue[n],o):(o.queue={},o)},o.push=function(n){return o.queue[o.key=n]=1,o},o.queue={},o.source=e,o.test=function(){var n=o.keys[o.toString()];return!!u(n)&&n},o.toString=function(){return(n=o.queue,Object.keys(n)).join("-");var n},o}let k=new b(l);y("blur",l,(n=>k.pull())),y("keydown",l,(n=>{k.push(n.key);let t=k.test();if(t){let e=k.fire(t);!1===e?v(n):null===e&&console.error("Unknown command:",t)}})),y("keyup",l,(n=>k.pull(n.key)));let g=(h=r(h="dialog")?i.createElement(h):h,e(q)&&(w=q,q=!1),r(q)&&d(h,q),e(w)&&function(n,t){var e;for(var u in t)(e=t[u])||""===e||0===e?m(n,u,e):p(n,u)}(h,w),h);var h,q,w;function K(n){d(g,'<form method="dialog">'+n+"</form>"),g.showModal();let e=a("[autofocus]",g);e&&(t(e.focus)&&e.focus(),t(e.select)&&e.select())}y("submit",g,(n=>{console.log(g.returnValue)})),function(n,t){n.append(t)}(c,g),K.alert=function(n){return K("<p>"+n+'</p><p role="group"><button autofocus name="v" type="submit" value="1">OK</button></p>')},K.confirm=function(n){return K("<p>"+n+'</p><p role="group"><button name="v" type="submit" value="1">OK</button> <button autofocus name="v" type="submit" value="0">Cancel</button></p>')},K.prompt=function(n,t){return K("<p>"+n+'</p><p><input autofocus type="text" value="'+(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))+'"></p><p role="group"><button name="v" type="submit" value="1">OK</button> <button name="v" type="submit" value="0">Cancel</button></p>')};const O={commands:k.commands,dialog:K,keys:k.keys},{fire:E,hooks:A,off:L,on:C}=function(n){var t={};return n.hooks=t,n.fire=function(e,r){return u(t[e])?(t[e].forEach((function(t){return t.apply(n,r)})),n):n},n.off=function(e,r){if(!u(e))return t={},n;if(u(t[e]))if(u(r)){for(var o=0,i=t[e].length;o<i;++o)if(r===t[e][o]){t[e].splice(o,1);break}0===j&&delete t[e]}else delete t[e];return n},n.on=function(e,r){return u(t[e])||(t[e]=[]),u(r)&&t[e].push(r),n},n}(O);l.K=b,l._=O,y("beforeload",i,(()=>E("let"))),y("load",i,(()=>E("get"))),y("DOMContentLoaded",i,(()=>E("set"))),y("keydown",l,(function(n){if(n.defaultPrevented)return;let t,e,u=n.target,r=n.key,o=n.altKey,p=n.ctrlKey,m=n.shiftKey,d=a(".lot\\:bar a:any-link"),y=(k="get",i.forms[k]||null),b=y&&y.q;var k;!b||"F3"!==r||o||p||m?!d||"F10"!==r||o||p||m?c!==u&&f!==u&&l!==u&&"Escape"===r&&(t=s(s(u),"[tabindex]:not(.not\\:active)"))&&(t.focus(),e=!0):(d.focus(),(t=s(d))&&function(n,t){return n.classList.contains(t)}(t,"has:menu")&&d.click(),e=!0):(b.focus(),e=!0),e&&v(n)}))}();