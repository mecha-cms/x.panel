!function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||function(t,n){return t&&e(n)&&t instanceof n}(t,Object))},e=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},r=function(t){return"string"==typeof t},o=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(n(r)){for(var o in r)r[o]=e(r[o]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},u=document,i=window,l=u.body,f=u.documentElement,c=function(t,n){return n?t.closest(n)||null:t.parentNode||null},a=function(t,n){return t.removeAttribute(n),t},s=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,o(e)),t},p=function(t,n){return t.append(n),n},d=function(t,e,o){return t=r(t)?u.createElement(t):t,n(e)&&(o=e,e=!1),r(e)&&m(t,e),n(o)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?s(t,r,e):a(t,r)}(t,o),t},m=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return function(t,n){return n in t}(t,r)&&(t[r]=e?n.trim():n),t},y=function(t){return t&&t.preventDefault()},b=function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)};function v(n){void 0===n&&(n={});var o=this;return o.commands={},o.fire=function(n){var u,i,l=o.source;if("function"==typeof n)u=n.call(l),i=!0;else if(r(n)&&(n=o.commands[n]))u=n.call(l),i=!0;else if(t(n)){var f=n[1]||[];(n=o.commands[n[0]])&&(u=n.apply(l,f),i=!0)}return i?!e(u)||u:null},o.key=null,o.keys={},o.pull=function(t){return o.key=null,e(t)?(delete o.queue[t],o):(o.queue={},o)},o.push=function(t){return o.queue[o.key=t]=1,o},o.queue={},o.source=n,o.test=function(){var t=o.keys[o.toString()];return!!e(t)&&t},o.toString=function(){return(t=o.queue,Object.keys(t)).join("-");var t},o}let k=new v(i);b("blur",i,(t=>k.pull())),b("keydown",i,(t=>{k.push(t.key);let n=k.test();if(n){let e=k.fire(n);!1===e?y(t):null===e&&console.error("Unknown command:",n)}})),b("keyup",i,(t=>k.pull(t.key)));let g=d("dialog"),h=d("dialog"),q=d("dialog");m(g,'<form method="dialog"><p>Test alert dialog.</p><p><button type="submit">OK</button></p></form>'),m(h,'<form method="dialog"><p>Test confirm dialog.</p><p><button type="submit">OK</button> <button type="submit">Cancel</button></p></form>'),m(q,'<form method="dialog"><p>Test prompt dialog.</p><p><input type="text" class="has:width"></p><p><button type="submit">OK</button> <button type="submit">Cancel</button></p></form>'),p(l,g),p(l,h),p(l,q);const w={alert:g,commands:k.commands,confirm:h,keys:k.keys,prompt:q},{fire:K,hooks:O,off:E,on:A}=function(t){var n={};return t.hooks=n,t.fire=function(r,o){return e(n[r])?(n[r].forEach((function(n){return n.apply(t,o)})),t):t},t.off=function(r,o){if(!e(r))return n={},t;if(e(n[r]))if(e(o)){for(var u=0,i=n[r].length;u<i;++u)if(o===n[r][u]){n[r].splice(u,1);break}0===j&&delete n[r]}else delete n[r];return t},t.on=function(r,o){return e(n[r])||(n[r]=[]),e(o)&&n[r].push(o),t},t}(w);i.K=v,i._=w,b("beforeload",u,(()=>K("let"))),b("load",u,(()=>K("get"))),b("DOMContentLoaded",u,(()=>K("set"))),b("keydown",i,(function(t){if(t.defaultPrevented)return;let n,e,r=t.target,o=t.key,a=t.altKey,s=t.ctrlKey,p=t.shiftKey,d=(k=".lot\\:bar a:any-link",(g||u).querySelector(k)),m=(v="get",u.forms[v]||null),b=m&&m.q;var v,k,g,h;!b||"F3"!==o||a||s||p?!d||"F10"!==o||a||s||p?l!==r&&f!==r&&i!==r&&"Escape"===o&&(n=c(c(r),"[tabindex]:not(.not\\:active)"))&&(n.focus(),e=!0):(d.focus(),(n=c(d))&&(h="has:menu",n.classList.contains(h)&&d.click()),e=!0):(b.focus(),e=!0),e&&y(t)}))}();