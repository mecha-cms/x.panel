!function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},n=function(e){return"function"==typeof e},r=function(e,t){return e&&a(t)&&e instanceof t},i=function(e){return o(e)&&0==e%1},o=function(e){return"number"==typeof e},s=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||r(e,Object))},a=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},c=function(e){return"string"==typeof e},l=function(e){return t(e)?e:[e]},u=function(e,t){var n=t.indexOf(e);return-1!==n?n:null},f=function(e){return e.replace(/[-_.](\w)/g,(function(e,t){return d(t)}))},h=function(e){return e.toLowerCase()},d=function(e){return e.toUpperCase()},p=function(e){return e.length},v=function(e,t){return a(t[0])&&e<t[0]?t[0]:a(t[1])&&e>t[1]?t[1]:e},g=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},m=function(e){return p(y(e))},y=function(e){return Object.keys(e)},k=function(e){return Object.values(e)},b=function e(n){if(t(n))return n.map((function(t){return e(t)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(n))return g(n);if(s(n)){for(var r in n)n[r]=e(n[r]);return n}return"false"!==n&&("null"===n?null:"true"===n||n)},w=function n(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];for(var c=i.shift(),l=0,u=p(i);l<u;++l)for(var f in i[l])if(a(c[f]))if(t(c[f])&&t(i[l][f])){c[f]=[].concat(c[f]);for(var h=0,d=p(i[l][f]);h<d;++h)e(i[l][f][h],c[f])||c[f].push(i[l][f][h])}else s(c[f])&&s(i[l][f])?c[f]=n({},c[f],i[l][f]):c[f]=i[l][f];else c[f]=i[l][f];return c},E=function e(n){if(t(n))return n.map((function(t){return e(n)}));if(s(n)){for(var r in n)n[r]=e(n[r]);return n}return!1===n?"false":null===n?"null":!0===n?"true":""+n},x=document,P=window,S=x.body,A=x.documentElement,T=function(e,t,n){if(void 0===n&&(n=!0),!B(e,t))return null;var r=e.getAttribute(t);return n?b(r):r},H=function(e){return e.firstElementChild||null},L=function(e,t){var n=e.children;return o(t)?n[t]||null:n||[]},D=function(e,t){void 0===t&&(t=!0);var n=(W(e,"className")||"").trim();return t?n.split(/\s+/).filter((function(e){return""!==e})):n},K=function(e,t,n){void 0===n&&(n=!0);var r=T(e,"data-"+t,n),i=(r+"").trim();return n&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(r))?i:r},C=function(e,t){return(t||x).querySelector(e)},$=function(e,t){return(t||x).querySelectorAll(e)},O=function(e,t){void 0===t&&(t=!0);var n="innerHTML";if(!Y(e,n))return!1;var r=e[n];return""!==(r=t?r.trim():r)?r:null},F=function(e){return h(e&&e.nodeName||"")||null},R=function(e,t){return e["next"+(t?"":"Element")+"Sibling"]||null},X=function(e,t){return t?e.closest(t)||null:e.parentNode||null},U=function(e){var t="form";return Y(e,t)&&t===F(e[t])?e[t]:X(e,t)},I=function(e,t){return e["previous"+(t?"":"Element")+"Sibling"]||null},N=function(e,t,n){void 0===n&&(n=!0);var r=P.getComputedStyle(e).getPropertyValue(t);return n&&(r=b(r)),r||""===r||0===r?r:null},W=function(e,t){return Y(e,t)&&e[t]||null},M=function(e,t){void 0===t&&(t=!0);var n="textContent";if(!Y(e,n))return!1;var r=e[n];return""!==(r=t?r.trim():r)?r:null},B=function(e,t){return e.hasAttribute(t)},q=function(e,t){return e.classList.contains(t)},z=function(e,t){return null!==X(e,t)},Y=function(e,t){return t in e},V=function(e){return r(e,Node)},G=function(e){return e===P},J=function(e,t){return e.removeAttribute(t),e},Q=function(e,t){return e.classList.remove(t),e},Z=function(e,n){if(t(n))return n.forEach((function(t){return e.classList.remove(t)})),e;if(s(n)){for(var r in n)n[r]&&e.classList.remove(r);return e}return e.className="",e},ee=function(e,t){return J(e,"data-"+t)},te=function(e){var t=X(e);return e.remove(),t},ne=function(e,t){return e.style[f(t)]=null,e},re=function(e){var t="textContent";return Y(e,t)&&(e[t]=""),e},ie=function(e,t,n){return!0===n&&(n=t),e.setAttribute(t,E(n)),e},oe=function(e,t){return e.append(t),t},se=function(e,t){return e.classList.add(t),e},ae=function(e,n){if(t(n))return n.forEach((function(t){return e.classList.add(t)})),e;if(s(n))for(var r in n)n[r]?e.classList.add(r):e.classList.remove(r);return e.className=n,e},ce=function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?le(e,r,n):ee(e,r);return e},le=function(e,n,r){return(t(r)||s(r))&&(r=function(e){return JSON.stringify(e)}(r)),ie(e,"data-"+n,r)},ue=function(e,t,n){return e=c(e)?x.createElement(e):e,s(t)&&(n=t,t=!1),c(t)&&fe(e,t),s(n)&&function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?ie(e,r,n):J(e,r)}(e,n),e},fe=function(e,t,n){if(void 0===n&&(n=!0),null===t)return e;var r="innerHTML";return Y(e,r)&&(e[r]=n?t.trim():t),e},he=function(e,t){return X(e).insertBefore(t,R(e,!0)),t},de=function(e,t){return X(e).insertBefore(t,e),t},pe=function(e,t,n){return o(n)&&(n+="px"),e.style[f(t)]=E(n),e},ve=function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?pe(e,r,n):ne(e,r);return e},ge=function(e,t,n){if(void 0===n&&(n=!0),null===t)return e;var r="textContent";return Y(e,r)&&(e[r]=n?t.trim():t),e},me=function(e,t,n){return e.classList.toggle(t,n),e},ye={},ke=function(e,t,n,r){t.dispatchEvent(function(e,t,n){return ye[e]=new Event(e,t)}(e,n))},be=function(e,t,n){t.removeEventListener(e,n)},we=function(e){return e&&e.preventDefault()},Ee=function(e){return e&&e.stopPropagation()},xe=function(e,t,n){e.forEach((function(e){return be(e,t,n)}))},Pe=function(e,t,n,r){void 0===r&&(r=!1),t.addEventListener(e,n,r)},Se=function(e,t,n,r){void 0===r&&(r=!1),e.forEach((function(e){return Pe(e,t,n,r)}))},Ae=':scope>:where([tabindex]):not([tabindex="-1"]):not(.not\\:active)';function _e(e){e&&n(e.focus)&&e.focus()}function Te(e){if(!e.defaultPrevented){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;if(n===e.target){if(!i&&!o&&!s)"ArrowLeft"===r||"End"===r?(_e([].slice.call($(Ae,n)).pop()),t=!0):"ArrowRight"!==r&&"Home"!==r||(_e(C(Ae,n)),t=!0);t&&(we(e),Ee(e))}}}function He(e){if(!e.defaultPrevented){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=R(i);t&&q(t,"not:active");)t=R(t);for(n=I(i);n&&q(n,"not:active");)n=I(n);"ArrowLeft"===o?(_e(n),r=!0):"ArrowRight"===o?(_e(t),r=!0):"End"===o?(_e([].slice.call($(Ae,X(i))).pop()),r=!0):"Home"===o&&(_e(C(Ae,X(i))),r=!0),r&&(we(e),Ee(e))}}}var Le=ue("dialog"),De=ue("form","",{method:"dialog"}),Ke=ue("div");function Ce(e){var t=this;be("cancel",t,Ce),be("close",t,$e),be("submit",t,Oe),t.x(b(t.returnValue)),n(t.c)&&t.c.call(t,t.open)}function $e(e){var t=this;be("cancel",t,Ce),be("close",t,$e),be("submit",t,Oe),t.v(b(t.returnValue)),n(t.c)&&t.c.call(t,t.open)}function Oe(e){$e.call(this,e)}function je(e,t){var r;for(fe(De,""),c(e)?(fe(Ke,e.trim()),e=Ke.childNodes):V(e)&&(e=[e]),e=Array.from(e);r=e.shift();)oe(De,r);Le.showModal(),Le.returnValue=null,n(t)&&t.call(Le,Le.open);var i=C("[autofocus]",De);return i&&(n(i.focus)&&i.focus(),n(i.select)&&i.select()),new Promise((function(e,n){Le.c=t,Le.v=e,Le.x=n,Pe("cancel",Le,Ce),Pe("close",Le,$e),Pe("submit",Le,Oe)}))}function Fe(){var e=this,t=X(e.form);t.returnValue=e.value,ke("reset"===e.type?"cancel":"close",t),t.open&&t.close()}function Re(e){var t,n,r=e.key;"ArrowLeft"===r||"ArrowUp"===r?((n=I(this))&&n.focus(),we(e)):"ArrowDown"!==r&&"ArrowRight"!==r||((t=R(this))&&t.focus(),we(e))}oe(S,Le),oe(Le,De);var Xe=ue("p"),Ue=ue("p","",{role:"group"}),Ie=ue("button","OK",{class:"button",type:"submit",value:"true"});Pe("keydown",Ie,Re),Pe("click",Ie,Fe),oe(Ue,Ie),je.alert=function(e){return fe(Xe,e),je([Xe,Ue])};var Ne=ue("p"),We=ue("p","",{role:"group"}),Me=ue("button","OK",{class:"button",type:"submit",value:"true"}),Be=ue("button","Cancel",{autofocus:!0,class:"button",type:"reset",value:"false"});Pe("click",Be,Fe),Pe("click",Me,Fe),Pe("keydown",Be,Re),Pe("keydown",Me,Re),oe(We,Me),oe(We,Be),je.confirm=function(e){return fe(Ne,e),je([Ne,We])};var qe=ue("p"),ze=ue("input",!1,{autofocus:!0,class:"input",type:"text"}),Ye=ue("p"),Ve=ue("p","",{role:"group"}),Ge=ue("button","OK",{class:"button",type:"submit",value:""}),Je=ue("button","Cancel",{class:"button",type:"reset",value:"false"});function Qe(){Ge.value=this.value}Pe("click",Je,Fe),Pe("click",Ge,Fe),Pe("input",ze,Qe),Pe("keydown",Je,Re),Pe("keydown",Ge,Re),Pe("keyup",ze,Qe),oe(Ve,Ge),oe(Ve,Je),oe(Ye,ze),je.prompt=function(e,t){return fe(qe,e),ze.value=Ge.value=t,je([qe,Ye,Ve])};var Ze=function(e,t){var n;return function(){var r=arguments,i=this;n&&clearTimeout(n),n=setTimeout((function(){return e.apply(i,r)}),t)}},et=function(e,t){return function(){var n=arguments,r=this;setTimeout((function(){return e.apply(r,n)}),t)}},tt=function(e){return[e.offsetLeft,e.offsetTop]},nt=function(e){var t,n,r,i,o,s,a;return G(e)?(i=e.pageXOffset||A.scrollLeft||S.scrollLeft,o=e.pageYOffset||A.scrollTop||S.scrollTop,r=e.innerWidth,t=e.innerHeight):(i=(n=e.getBoundingClientRect()).left,o=n.top,r=n.width,t=n.height,s=n.right,a=n.bottom),[i,o,r,t,s,a]},rt=function(e){return G(e)?[e.innerWidth,e.innerHeight]:[e.offsetWidth,e.offsetHeight]},it=function(e){return[e.scrollLeft,e.scrollTop]},ot=function(e,t){return e.scrollLeft=t[0],e.scrollTop=t[1],e};function st(e){var t={};return e.hooks=t,e.fire=function(n,r){return a(t[n])?(t[n].forEach((function(t){return t.apply(e,r)})),e):e},e.off=function(n,r){if(!a(n))return t={},e;if(a(t[n]))if(a(r)){for(var i=0,o=t[n].length;i<o;++i)if(r===t[n][i]){t[n].splice(i,1);break}0===j&&delete t[n]}else delete t[n];return e},e.on=function(n,r){return a(t[n])||(t[n]=[]),a(r)&&t[n].push(r),e},e}var at="OP",ct="i",lt="$",ut="v",ft="ArrowDown",ht="ArrowLeft",dt="ArrowRight",pt="ArrowUp",vt="End",gt="Enter",mt="Escape",yt="Home",kt="Tab",bt="â€Œ";function wt(e){var t=x.createRange();t.selectNodeContents(e);var n=P.getSelection();n.removeAllRanges(),n.addRange(t)}function Et(n,i){void 0===i&&(i={});var o=this;if(!n)return o;if(n[at])return n[at];if(!r(o,Et))return new Et(n,i);var s=st(o),a=s.fire;function c(){return[b(u()),o.options]}function u(){if(ae){for(var e=[],t=0,r=p(de);t<r;++t)d(de[t])&&e.push(f(de[t]));return e}var i=n.value;return""!==i?i:null}function f(e){var t=e.value||M(e);return""!==t?t:null}function d(e){return B(e,"selected")}function v(e){J(e,"selected"),e.selected=!1}function y(e){Q(e,R+"selected")}function k(e){ie(e,"selected",!0),e.selected=!0}function S(e){se(e,R+"selected")}function A(e){e=e||bt,Te.title=e.replace(/<.*?>/g,""),fe(Te,e)}function _(e){if(ae)for(var t,r=l(t),i=0,o=p(de);i<o;++i)t=f(de[i]),r.includes(b(t))?k(de[i]):v(de[i]);else n.value=e}s.hooks,o.state=i=w({},Et.state,i),o.options={},o.source=n,Et.instances[n.id||n.name||m(Et.instances)]=o,n[at]=o;var H=i.class,K=H+"__",C=H+"--",$=K+"input",j=K+"option",R=j+"--",U=K+"options",I=K+"value",W=K+"values",z=ue(n,{class:K+"source",tabindex:-1}),Y="input"===F(z)?ue("span","",{class:$}):null,V=Y?n.placeholder:"",G=ue("span",V),Z=ue("span","",{contenteditable:"",tabindex:0}),ee=function(){return z.disabled},ne=L(z),ae=z.multiple,le=0,de=z.options,ye=i.parent||x,ke="input"===F(z)?0:z.size,Ee=z.title,Ae=u(),_e=ue("div",{class:H,tabindex:!Y&&!ee()&&0,title:Ee}),Te=ue("div",bt,{class:W}),He=z.list,Le=0,De=0,Ke=ue("div",{class:U,tabindex:-1}),Ce=[],$e=!1,Oe=!1;function je(){Q(_e,C+"focus"),a("blur",c())}function Fe(){se(_e,C+"focus"),a("focus",c())}function Re(){se(_e,C+"open"),a("enter",c())}function Xe(){ae||ke||(Q(_e,C+"open"),a("exit",c()))}function Ue(){Le=g(N(_e,"border-bottom-width")),De=g(N(_e,"border-top-width")),Dt(_e)}function Ie(e){me(_e,C+"open",e);var t=We();return a(t?"enter":"exit",c()),t}function Ne(e,t,n,r){return ue("span",e,{class:I+" "+r,"data-index":t,"data-value":n}).outerHTML}function We(){return q(_e,C+"open")}function Me(){(Y?Z:_e).focus()}function Be(e){if(de&&!ee()){var t,n,r,o=[],s=this,l=s[lt],u=Ae;if(le=s[ct],Ae=s[ut],e&&e.isTrusted&&Me(),we(e),ae&&($e||Oe)){!function(e){return q(e,R+"selected")}(s)?(k(l),S(s)):(v(l),y(s));for(var f,h=0,g=p(de);h<g;++h)d(de[h])&&(t=M(f=Ce[h]),n=f[ct],r=f[ut],o.push(Ne(t,n,r,D(f,!1))));return A(o.join("<span>"+i.join+"</span>")),void a("change",c())}t=M(s),n=s[ct],r=s[ut],t&&Y&&(fe(G,bt),ge(Z,t)),A(Ne(t,n,r,D(s,!1))),Y&&(wt(Z),_(t)),Ce.forEach((function(e){Ae===e[ut]?(k(e[lt]),S(e)):(v(e[lt]),y(e))})),Ae!==u&&a("change",c())}}function qe(e){je()}function ze(e){if(!ee()){if(le=z.selectedIndex,ke)return Re();Y?Z.focus():Ie()&&Ue()}}function Ye(e){le=z.selectedIndex,Fe()}function Ve(e){if(de){$e=e.ctrlKey,Oe=e.shiftKey;var t=e.key,n=le,r=Ce[n],i=function(e){return q(e,R+"disabled")},o=function(e){return Be.call(e)},s=We();if(ft===t){for(;(r=Ce[++n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),we(e)}else if(pt===t){for(;(r=Ce[--n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),we(e)}else if(vt===t){for(n=p(de);(r=Ce[--n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),we(e)}else if(gt===t)r&&o(r),Ie(),we(e);else if(mt===t)!ke&&Xe();else if(yt===t){for(n=-1;(r=Ce[++n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),we(e)}else kt===t&&(!Y&&r&&o(r),!ke&&Xe());We()&&!$e&&!Oe&&Ue()}}function Ge(){$e=Oe=!1}function Je(){var e=M(Z);null!==e&&_(E(e)),je()}function Qe(){if(de){var e,t,n=M(this);le=-1,wt(this);for(var r=0,i=p(de);r<i;++r)e=de[r],t=Ce[r],n===M(e)?(le=r,k(e),S(t)):(v(e),y(t));Fe(),Ie()&&Ue()}}ae&&!ke&&(z.size=ke=i.size),Y&&He&&(ne=L(He),de=He.options,ke=null,Ae&&(fe(G,bt),ge(Z,Ae))),Y&&(oe(Y,Z),oe(Y,G)),oe(_e,Y||Te),he(z,_e);var xt=Ze((function(t,n,r){var i,o,s=M(t);if(null===s){fe(G,V),Ke.hidden=!1;for(var a=0,c=p(Ce);a<c;++a)fe(o=Ce[a],M(o)),o.hidden=!1}else if(fe(G,bt),r!==(s=h(s))&&ft!==n&&ht!==n&&dt!==n&&pt!==n&&gt!==n){for(var l,u=0,f=p(Ce);u<f;++u)v((o=Ce[u])[lt]),y(o),(l=M(o))&&h(l).includes(s)?(!i&&(i=o),fe(o,l.replace(RegExp(s.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(function(e){return"<mark>"+e+"</mark>"}))),o.hidden=!1):(fe(o,l),o.hidden=!0);i?(le=i[ct],k(i[lt]),S(i),Ke.hidden=!1):Ke.hidden=!0,r=s}else{for(var d,g=0,m=0,b=p(Ce);m<b;++m)o=Ce[m],d=O(o),e("</mark>",d)&&++g;if(g<=1)for(var w,E=0,x=p(Ce);E<x;++E)o=Ce[E],w=M(o),fe(o,w),o.hidden=!1}gt!==n&&mt!==n&&kt!==n&&(Re(),Ue())}),1);function Pt(e){var t=this,n=e.key;Ve(e),xt(t,n,M(t))}function St(){Ge()}var At=et((function(e,t){var n=M(e);fe(t,null!==n?bt:V),ge(e,n),wt(e)}),1);function _t(){At(Z,G)}function Tt(e){var t=e.target;if(t!==_e)for(;(t=X(t))&&_e!==t;);_e!==t&&Xe()}function Ht(){We()&&Dt(_e,1)}function Lt(n,r){if("optgroup"!==F(n)){var i=T(n,"value",!1),s=i,a=M(n),c=n.title,l=ue("a",a,{class:j,title:c||a});i=i||a,l[ct]=le,l[lt]=n,l[ut]=i,ce(l,{index:le,value:s}),o.options[i]=a,n.disabled?se(l,R+"disabled"):Pe("click",l,Be),oe(r,l),Ce.push(l),""===s&&(i=null),t(Ae)&&e(i,Ae)||i===Ae?(se(l,R+"selected"),A(Ne(a,le,s,D(l,!1))),k(n)):v(n),++le}else{var u=ue("span",{class:j+"-group"+(n.disabled?" "+R+"disabled":"")}),f=L(n);u.title=n.label;for(var h=0,d=p(f);h<d;++h)Lt(f[h],u);oe(r,u)}}function Dt(e,t){if(!ke){var n=nt(e),r=n[0],i=n[1],o=n[2],s=n[3],l=rt(P)[1],u=l-i-s;ve(Ke,{bottom:"",left:r,"max-height":u,top:i+s-De,width:o}),u<(l-s)/2?(ve(Ke,{top:"",bottom:l-i-Le,"max-height":(u=i)+De}),Q(e,C+"down"),se(e,C+"up")):(Q(e,C+"up"),se(e,C+"down"))}if(!t){var f=Ce.find((function(e){return q(e,R+"selected")}));if(f){var h=rt(f)[1],d=rt(Ke)[1],p=tt(f),v=p[0],g=p[1],m=it(Ke)[1];g<m?ot(Ke,[v,g]):g+h-d>m&&ot(Ke,[v,g+h-d])}}a("fit",c())}Se(["resize","scroll"],P,Ht),Pe("click",ye,Tt),Pe("focus",z,Me),Pe("click",_e,ze),Y?(Pe("blur",Z,Je),Pe("focus",Z,Qe),Pe("keydown",Z,Pt),Pe("keyup",Z,St),Pe("paste",Z,_t)):(Pe("blur",_e,qe),Pe("focus",_e,Ye),Pe("keydown",_e,Ve),Pe("keyup",_e,Ge));var Kt=p(ne);if(Kt){oe(_e,Ke);for(var Ct=0;Ct<Kt;++Ct)Lt(ne[Ct],Ke);if(ke){var $t=Ce[0],Ot=rt($t)[1]*ke;pe(Ke,"max-height",Ot)}}return ke&&(se(_e,C+"down"),se(_e,C+"open")),o.get=function(e){void 0===e&&(e=!0);var t=u();return e?b(t):t},o.pop=function(){return n[at]?(delete n[at],xe(["resize","scroll"],P,Ht),be("click",ye,Tt),be("focus",z,Me),Q(z,K+"source"),be("click",_e,ze),Y?(be("blur",Z,Je),be("focus",Z,Qe),be("keydown",Z,Pt),be("keyup",Z,St),be("paste",Z,_t)):(be("blur",_e,qe),be("focus",_e,Ye),be("keydown",_e,Ve),be("keyup",_e,Ge)),re(_e),te(_e),a("pop",c())):o},o.set=function(e){return de?(_(E(e)),Ce.forEach((function(e,t){var n=de[t];me(e,R+"selected",n&&d(n))})),a("change",c()),o):o},o.self=_e,o}function xt(e){for(var t in Et.instances)Et.instances[t].pop(),delete Et.instances[t];var n=$('.input[list]:not([type="hidden"]),.select');n&&p(n)&&n.forEach((function(e){var t;Q(e,"input"),Q(e,"select");var n=D(e),r=new Et(e,null!=(t=K(e,"state"))?t:{});ae(r.self,n)})),1===e&&P._.on("change",xt)}Et.instances={},Et.state={class:"option-picker",join:", ",parent:null,size:5},Et.version="1.3.10",P.OP=Et;var Pt=function(e,t){return void 0===t&&(t=""),e.replace(St("["+t+At.replace(/./g,"\\$&")+"]"),"\\$&")},St=function(e,t){return function(e){return r(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,a(t)?t:"g"))},At="!$^*()+=[]{}|:<>,.?/-",_t="TP",Tt="a",Ht="ArrowLeft",Lt="ArrowRight",Dt="Home",Kt="Backspace",Ct="Delete",$t="End",Ot="Enter",jt="Tab";function Ft(n,i){void 0===i&&(i={});var s=this;if(!n)return s;if(n[_t])return n[_t];if(!r(s,Ft))return new Ft(n,i);var a=function(){return n.disabled},l=function(){return n.readOnly},f=T(n,"placeholder"),d=T(n,"tabindex"),v=st(s);v.hooks;var g=v.fire;s.state=i=w({},Ft.state,c(i)?{join:i}:i||{}),s.source=n,Ft.instances[n.id||n.name||m(Ft.instances)]=s,n[_t]=s;var k,b,E,S=i.class,A=S+"__",_=S+"--",D=U(n),K=ue("div",{class:S,tabindex:!a()&&-1}),C=ue("span",{class:A+"tag "+A+"input"}),$=ue("input",{class:A+"copy",tabindex:-1,type:"text"}),O=ue("span",{contenteditable:!a()&&"true",spellcheck:"false",style:"white-space:pre;"}),j=ue("span"),F=ue("span",{class:A+"tags"}),N=0,W={};function B(e,t){var n=u(e,s.tags);return t&&g("get.tag",[e,n]),o(n)?e:null}function Y(){W={};var e,t=L(F),n=p(t)-1;for(e=0;e<n;++e)q(t[e],A+"tag--selected")&&(W[e]=t[e])}function V(e,t){o(t)?(t=t<0?0:t,s.tags.splice(t,0,e)):s.tags.push(e),n.value=s.tags.join(i.join)}function G(e,t){var n=ue("span",{class:A+"tag",tabindex:!a()&&!l()&&0,title:e}),r=ue("a",{class:A+"tag-x",href:"",tabindex:-1,target:"_top"});Pe("click",r,De),oe(n,r),Pe("click",n,Le),Se(["blur","focus"],n,Ae),z(F)&&(o(t)&&s.tags[t]?de(L(F,t),n):de(C,n))}function J(t){if(t=t?t.split(i.join):[],z(K))for(var r,o,a;r=I(C);)ne(a=r.title),e(a,t)||(o=u(a,s.tags),g("change",[a,o]),g("let.tag",[a,o]));s.tags=[],n.value="";for(var c,l=0,f=i.max;l<f&&t[l];++l)""!==(c=me(t[l]))&&(G(c),V(c),g("change",[c,l]),g("set.tag",[c,l]))}function ee(e){var t=u(e,s.tags);o(t)&&t>=0&&(s.tags.splice(t,1),n.value=s.tags.join(i.join))}function ne(e){var t,n=u(e,s.tags);if(o(n)&&n>=0&&(t=L(F,n))){be("click",t,Le),xe(["blur","focus"],t,Ae);var r=H(t);r&&(be("click",r,De),te(r)),te(t)}}function re(e){te($),ce("",1)}function ie(e){oe(K,$),$.value=s.tags.join(i.join),$.focus(),$.select()}function ce(e,t){if(ge(O,e),ge(j,e?"":f),t){O.focus();var n=x.createRange(),r=P.getSelection();n.selectNodeContents(O),n.collapse(!1),r.removeAllRanges(),r.addRange(n)}}function le(e){ve(e,(function(){Q(this,A+"tag--selected")}))}function fe(e){ve(e,(function(){se(this,A+"tag--selected")}))}function pe(){if(!a()&&!l()){var e=ye(M(O)).trim(),t=i.pattern;if(t&&e&&!St(t,"").test(e))return g("not.tag",[e,-1]),void ce(e,1);if(ce(""),e=me(e))if(B(e))g("has.tag",[e,u(e,s.tags)]);else{G(e),V(e);var n=p(s.tags);g("change",[e,n]),g("set.tag",[e,n])}}}function ve(e,t){var n,r=L(F),i=p(r)-1;for(n=0;n<i;++n)e!==r[n]&&t.call(r[n],n)}function me(e){return ye(s.f(e)).trim()}function ye(e){return e=e||"",i.escape.forEach((function(t){e=e.split(t).join("")})),e}function ke(e){"blur"===e.type?(le(),Z(K,[_+"focus",_+"focus-self"])):ae(K,[_+"focus",_+"focus-self"])}function Ae(e){if(!l()){W={};var t=this,n=e.type,r=t.title,i=s.tags,o=u(r,i),a=A+"tag--";"blur"===n?(!k&&!b||b&&E)&&(le(t),Q(t,a+"selected"),Z(K,[_+"focus",_+"focus-tag"])):(se(t,a+"selected"),ae(K,[_+"focus",_+"focus-tag"]),N=o,W[o]=t),g(n+".tag",[r,o])}}function _e(e){var t=s.tags,n=e.type,r=A+"text--";Q(K,_+"focus-tag"),"blur"===n?(Q(C,r+"focus"),Z(K,[_+"focus",_+"focus-input"]),pe()):(se(C,r+"focus"),ae(K,[_+"focus",_+"focus-input"]),le(C)),g(n,[t,p(t)])}function Te(e){"blur"===e.type?Q(K,_+"focus"):se(K,_+"focus")}function He(e){e&&K===e.target&&O.focus();var t=s.tags;g("click",[t,p(t)])}function Le(){var e=this.title,t=s.tags;g("click.tag",[e,u(e,t)])}function De(e){if(!a()&&!l()){var t=X(this).title,n=u(t,s.tags);ne(t),ee(t),ce("",1),g("change",[t,n]),g("click.tag",[t,n]),g("let.tag",[t,n])}we(e)}function Ke(e){var t=e.type;"copy"===t?et((function(){return re()}),1)():"cut"===t?(!l()&&J(""),et((function(){return re()}),1)()):"paste"===t&&et((function(){!l()&&J($.value),re()}),1)(),et((function(){var e=s.tags;g(t,[e,p(e)])}),1)()}function Ce(){le(),Q(K,_+"focus-self")}function $e(){O.focus()}function Oe(e){if(!a()&&!l()){s.tags;var t,n,r,i,o,c,u=e.key,f=k=e.ctrlKey,h=b=e.shiftKey,d=A+"tag--";if(E=jt===u,!f){if(!h&&(Kt===u||Ct===u)){Y(),c=W;var v=Kt===u;for(n in c)ne(o=(t=c[n]).title),ee(o);return N=+(y(c)[0]||0),(t=L(F,v?N-1:N))?C===t?ce("",1):t.focus():ce("",1),void we(e)}if(Dt===u)return void((t=L(F,0))&&(t.focus(),we(e)));if($t===u&&(t=L(F,p(s.tags)-1)))return t.focus(),void we(e);if(Ht===u){if(t=L(F,N-1)){var g=q(t,d+"selected");return t.focus(),we(e),h?(r=R(t),void(g&&Q(r,d+"selected"))):void le(t)}if(!h)return void le(L(F,0))}if(Lt===u&&(t=L(F,N+1))){var m=q(t,d+"selected");return C!==t||h?t.focus():ce("",1),we(e),h?(i=I(t),void(m&&Q(i,d+"selected"))):void le(t)}}Tt===u&&(ie(),fe(),Y(),we(e))}}function je(t){Ee(t),l()&&jt!==t.key&&we(t);var n,r=i.escape,o=I(C),a=p(s.tags),c=i.max,u=M(O)||"",h=t.key,d=k=t.ctrlKey,v=Ot===h;b=t.shiftKey;var m=E=jt===h;if(v&&(h="\n"),m&&(h="\t"),et((function(){u=M(O)||"",ge(j,u?"":f),e(function(e){var t,n=P.getSelection();if(n.rangeCount>0)return(t=n.getRangeAt(0).cloneRange()).collapse(!0),t.setStart(e,0),(t+"").slice(-1)}(O),r)&&(a<c?pe():(ce(""),g("max.tags",[c])),we(t))}),1)(),""===u&&Dt===h&&(n=L(F,0)))return n.focus(),void we(t);if(""===u&&$t===h&&(n=L(F,p(s.tags)-1)))return n.focus(),void we(t);if(d&&""===u&&Tt===h)return ie(),fe(),Y(),void we(t);if(e(h,r))return a<c?pe():(ce(""),g("max.tags",[c])),void we(t);if(!m){if(!d&&v)return Xe()&&D&&D.dispatchEvent(new Event("submit",{cancelable:!0})),void we(t);if(o&&""===u&&!l()){if(Kt===h)return ne(n=s.tags[a-1]),ee(n),g("change",[n,a-1]),g("let.tag",[n,a-1]),void we(t);if(Ht===h)return void o.focus()}}}function Fe(){k=b=!1}function Re(){et((function(){a()||l()||M(O).split(i.join).forEach((function(t){e(t,s.tags)||(G(t),V(t))})),ce("")}),1)()}function Xe(e){if(!a()){var t=i.min;return pe(),t>0&&p(s.tags)<t?(ce("",1),g("min.tags",[t]),void we(e)):1}}return ce(""),oe(K,F),oe(C,O),oe(C,j),oe(F,C),se(n,A+"source"),he(n,K),ue(n,{tabindex:-1}),Pe("blur",K,Ce),Pe("click",K,He),Pe("focus",n,$e),Pe("keydown",K,Oe),Pe("keydown",O,je),Pe("keyup",K,Fe),Pe("paste",O,Re),Se(["blur","focus"],K,Te),Se(["blur","focus"],$,ke),Se(["blur","focus"],O,_e),Se(["copy","cut","paste"],$,Ke),D&&Pe("submit",D,Xe),s.blur=function(){return!a()&&O.blur(),s},s.click=function(){return K.click(),He(),s},s.f=function(e){return h(e||"").replace(/[^ a-z\d-]/g,"").trim()},s.focus=function(){return a()||ce(M(O),1),s},s.get=function(e){return a()?null:B(e,1)},s.input=O,s.let=function(e){if(!a()&&!l()){var n=i.min;if(e)if(t(e))e.forEach((function(e){if(n>0&&p(s.tags)<n)return g("min.tags",[n]),s;ne(e),ee(e)}));else{if(n>0&&p(s.tags)<n)return g("min.tags",[n]),s;ne(e),ee(e)}else J("")}return s},s.pop=function(){if(!n[_t])return s;delete n[_t];var e=s.tags;return Q(n,A+"source"),be("blur",K,Ce),be("click",K,He),be("focus",n,$e),be("keydown",K,Oe),be("keydown",O,je),be("keyup",K,Fe),be("paste",O,Re),xe(["blur","focus"],K,Te),xe(["blur","focus"],$,ke),xe(["blur","focus"],O,_e),xe(["copy","cut","paste"],$,Ke),D&&be("submit",D,Xe),e.forEach(ne),ue(n,{tabindex:d}),te(K),g("pop",[e])},s.self=K,s.set=function(e,n){if(!e)return s;if(!a()&&!l())if(t(e))J(e.join(i.join));else{var r=s.tags,o=i.max;B(e)?g("has.tag",[e,u(e,r)]):p(r)<o?(G(e,n),V(e,n)):g("max.tags",[o])}return s},s.source=s.output=n,s.state=i,s.tags=[],J(n.value),s}function Rt(e){for(var t in Ft.instances)Ft.instances[t].pop(),delete Ft.instances[t];var n=$('.lot\\:field.type\\:query .input:not([type="hidden"])');n&&p(n)&&n.forEach((function(e){var t;Q(e,"input");var n=D(e),r=new Ft(e,null!=(t=K(e,"state"))?t:{});ae(r.self,n)})),1===e&&P._.on("change",Rt)}Ft.instances={},Ft.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null},Ft.version="3.4.18",P.TP=Ft;var Xt,Ut={blur:0,click:0,copy:0,cut:0,focus:0,input:0,keydown:"key.down",keyup:"key.up",mousedown:"mouse.down",mouseenter:"mouse.enter",mouseleave:"mouse.exit",mousemove:"mouse.move",mouseup:"mouse.up",paste:0,scroll:0,touchend:"mouse.up",touchmove:"mouse.move",touchstart:"mouse.down",wheel:"scroll"};function It(e){return e.disabled}function Nt(e){return e.readOnly}function Wt(e){return e.value.replace(/\r/g,"")}function Mt(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function Bt(e,t){var n=this;return e?r(n,Bt)?(e["_"+Bt.name]=st(n,Bt.prototype),n.attach(e,w({},Bt.state,i(t)||c(t)?{tab:t}:t||{}))):new Bt(e,t):n}function qt(e){var t=this["_"+Bt.name],n=e.type,r=Wt(this);r!==Xt&&(Xt=r,t.fire("change",[e])),t.fire(Ut[n]||n,[e])}Bt.esc=Pt,Bt.state={tab:"\t",with:[]},Bt.S=function(e,t,n){var r=this,i=n.slice(e,t);r.after=n.slice(t),r.before=n.slice(0,e),r.end=t,r.length=p(i),r.start=e,r.value=i,r.toString=function(){return i}},Bt.version="4.1.3",Bt.x=At,Object.defineProperty(Bt,"name",{value:"TextEditor"});var zt=Bt.prototype;function Yt(){var e=this,t=e.constructor.prototype;return e._history=[],e._historyState=-1,!n(t.history)&&(t.history=function(e){var t=this._active,n=this._history;return!!t&&(a(e)?a(n[e])?n[e]:null:n)}),!n(t.loss)&&(t.loss=function(e){var t,n=this,r=n._active;n._history;var i=n._historyState;return!!r&&(!0===e?(n._history=[],n._historyState=-1,null):(t=n._history.splice(a(e)?e:i,1),n._historyState=v(i-1,[-1]),t))}),!n(t.record)&&(t.record=function(e){var t,n,r=this,i=r.$(),o=i.end,s=i.start,c=r._active,l=r._history,u=r._historyState;return c?(t=l[u]||[],(n=[r.get(),[s,o],Date.now()])[0]===t[0]&&n[1][0]===t[1][0]&&n[1][1]===t[1][1]||(++u,r._history[a(e)?e:u]=n,r._historyState=u),r):r}),!n(t.redo)&&(t.redo=function(){var e,t=this,n=t._active,r=t._history,i=t._historyState;return n&&(e=r[t._historyState=v(i+1,[0,p(r)-1])])?t.set(e[0]).select(e[1][0],e[1][1]):t}),!n(t.undo)&&(t.undo=function(){var e,t=this,n=t._active,r=t._history,i=t._historyState;return n&&(e=r[t._historyState=v(i-1,[0,p(r)-1])])?t.set(e[0]).select(e[1][0],e[1][1]):t}),e}function Vt(e){var t=this;return t.commands={},t.key=null,t.keys={},t.queue={},t.self=e||t,t}zt.$=function(){var e=this.self;return new Bt.S(e.selectionStart,e.selectionEnd,Wt(e))},zt.attach=function(e,r){var i=this;for(var o in e=e||i.self,r=r||i.state,i._active=!0,i._value=Wt(e),i.self=e,i.state=r,Ut)Pe(o,e,qt);if(a(r)&&t(r.with))for(var l=0,u=p(r.with);l<u;++l){var f=r.with[l];c(f)&&(f=Bt[f]),n(f)?f.call(i,e,r):s(f)&&n(f.attach)&&f.attach.call(i,e,r)}return i},zt.blur=function(){var e=this,t=e._active,n=e.self;return t?(n.blur(),e):e},zt.detach=function(){var e=this,r=e.self,i=e.state;for(var o in e._active=!1,Ut)be(o,r,qt);if(t(i.with))for(var a=0,l=p(i.with);a<l;++a){var u=i.with[a];c(u)&&(u=Bt[u]),s(u)&&n(u.detach)&&u.detach.call(e,r,i)}return e},zt.focus=function(e){var t,n,r=this,i=r._active,o=r.self;return i?(-1===e?t=n=0:1===e&&(t=p(Wt(o)),n=o.scrollHeight),a(t)&&a(n)&&(o.selectionStart=o.selectionEnd=t,o.scrollTop=n),o.focus(),r):r},zt.get=function(){var e=this._active,t=this.self;return!!e&&(!It(t)&&Wt(t)||null)},zt.insert=function(e,t,n){var r=this,i=/^[\s\S]*?$/;return r._active?(n&&r.replace(i,""),-1===t?i=/$/:1===t&&(i=/^/),r.replace(i,e,t)):r},zt.let=function(){var e=this,t=e._active,n=e.self;return t?(n.value=e._value,e):e},zt.match=function(e,r){var i=this,o=i.$(),s=o.after,a=o.before,c=o.value;if(t(e)){var l=[a.match(e[0]),c.match(e[1]),s.match(e[2])];return n(r)?r.call(i,l[0]||[],l[1]||[],l[2]||[]):[!!l[0],!!l[1],!!l[2]]}var u=c.match(e);return n(r)?r.call(i,u||[]):!!u},zt.peel=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value;e=Pt(e),t=Pt(t);var c=St(e+"$",""),l=St("^"+t,"");return n?r.replace(St("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):c.test(s)&&l.test(o)?(s=s.replace(c,""),o=o.replace(l,""),r.set(s+a+o).select(s=p(s),s+p(a))):r.select()},zt.pull=function(e,t){void 0===t&&(t=!0);var n=this,r=n.state,o=n.$(),s=o.before,c=o.end,l=o.length,u=o.start,f=o.value;return i(e=a(e)?e:r.tab)&&(e=" ".repeat(e)),""!==s&&"\n"!==s.slice(-1)&&e!==s.slice(-p(e))&&n.select(u-=p(s.split("\n").pop()),l?c:u),e=Pt(e),l?t?n.replace(St("^"+e,"gm"),""):n.insert(f.split("\n").map((function(t){return St("^("+e+")*$","").test(t)?t:t.replace(St("^"+e,""),"")})).join("\n")):n.replace(St(e+"$",""),"",-1)},zt.push=function(e,t){void 0===t&&(t=!1);var n=this,r=n.state,o=n.$(),s=o.before,c=o.end,l=o.length,u=o.start;return i(e=a(e)?e:r.tab)&&(e=" ".repeat(e)),""!==s&&"\n"!==s.slice(-1)&&e!==s.slice(-p(e))&&n.select(u-=p(s.split("\n").pop()),l?c:u),l?n.replace(St("^"+(t?"":"(?!$)"),"gm"),e):n.insert(e,-1)},zt.replace=function(e,t,n){var r=this.$(),i=r.after,o=r.before,s=r.value;return-1===n?o=o.replace(e,t):1===n?i=i.replace(e,t):s=s.replace(e,t),this.set(o+s+i).select(o=p(o),o+p(s))},zt.select=function(){var e=this,t=e._active,n=e.self;if(!t)return e;if(It(n)||Nt(n))return n.focus(),e;for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var s,a,c,l,u=p(i),f=e.$(),h=f.start,d=f.end;if(s=P.pageXOffset||A.scrollLeft||S.scrollLeft,a=P.pageYOffset||A.scrollTop||S.scrollTop,c=n.scrollLeft,l=n.scrollTop,0===u)i[0]=h,i[1]=d;else if(1===u){if(!0===i[0])return n.focus(),n.select(),e;i[1]=i[0]}return n.focus(),n.selectionStart=i[0],n.selectionEnd=i[1],n.scrollLeft=c,n.scrollTop=l,P.scroll(s,a),e},zt.set=function(e){var t=this,n=t._active,r=t.self;return n?(It(r)||Nt(r)||(r.value=e),t):t},zt.trim=function(e,t,n,r,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==r&&!1!==r&&(r=r||"");var o=this.$(),s=o.after,a=o.before,c=o.value,l=Mt(s,-1),u=Mt(a,1);return s=!1!==t?(l||!i?t:"")+Mt(s,-1):s,a=!1!==e?Mt(a,1)+(u||!i?e:""):a,!1!==r&&(c=Mt(c,1)),!1!==n&&(c=Mt(c,-1)),this.set(a+c+s).select(a=p(a),a+p(c))},zt.wrap=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value;return n?r.replace(/^[\s\S]*?$/,e+"$&"+t):r.set(s+e+a+t+o).select(s=p(s+e),s+p(a))},Object.defineProperty(zt,"value",{get:function(){return this.self.value},set:function(e){this.self.value=e}}),Object.defineProperty(Yt,"name",{value:"TextEditor.History"});var Gt=Vt.prototype;Gt.command=function(e){var t=this;if(c(e))return e===t.toString();var n=t.keys[t.toString()];return!!a(n)&&n},Gt.fire=function(e){var r,i,o=this,s=o.self||o;if(n(e))r=e.call(s),i=!0;else if(c(e)&&(e=o.commands[e]))r=e.call(s),i=!0;else if(t(e)){var l=e[1]||[];(e=o.commands[e[0]])&&(r=e.apply(s,l),i=!0)}return i?!a(r)||r:null},Gt.pull=function(e){var t=this;return t.key=null,a(e)?(delete t.queue[e],t):(t.queue={},t)},Gt.push=function(e){var t=this;return t.queue[t.key=e]=1,t},Gt.toString=function(){return y(this.queue).join("-")},Object.defineProperty(Vt,"name",{value:"Key"});var Jt=Ze((function(e){return e.pull()}),1e3),Qt="_Key";function Zt(e){this._event=e,this[Qt].pull()}function en(e){Zt.call(this,e)}function tn(e){var t,n,r=this[Qt];r.push(e.key),this._event=e,(t=r.command())&&(!1===(n=r.fire(t))?(we(e),Ee(e)):null===n&&console.warn("Unknown command: `"+t+"`")),Jt(r)}function nn(e){this._event=e,this[Qt].pull(e.key)}var rn={attach:function(){var e=this,t=e.constructor.prototype,r=new Vt(e);return e.commands=w(e.commands=r.commands,e.state.commands||{}),e.keys=w(e.keys=r.keys,e.state.keys||{}),!n(t.command)&&(t.command=function(e,t){return this.commands[e]=t,this}),!n(t.k)&&(t.k=function(e){var t,n=this[Qt]+"";return a(e)&&"-"!==e&&(t=""!==n?n.split(/-(?!$)/):[],!1!==e)?t.join(e):!1===e?"-"===n?[n]:t:n}),!n(t.key)&&(t.key=function(e,t){return this.keys[e]=t,this}),e.on("blur",Zt),e.on("input",en),e.on("key.down",tn),e.on("key.up",nn),e[Qt]=r,e},detach:function(){var e=this;return e[Qt].pull(),e.off("blur",Zt),e.off("input",en),e.off("key.down",tn),e.off("key.up",nn),delete e[Qt],e},name:"TextEditor.Key"},on="Alt-",sn="Control-",an="Shift-",cn=Ze((function(e){return e.record()}),10);function ln(t){var n=this,r=n.k(!1).pop(),o=n.k();if(cn(n),!t.defaultPrevented&&!n.keys[o]){var s,a,c=n.state.tab||"\t",l=n.state.pairs||{},u=k(l);i(c)&&(c=" ".repeat(c));var f=n.$(),h=f.after,d=f.before,v=f.end,g=f.start,m=f.value,y=h.split("\n").shift(),b=d.split("\n").pop(),w=/^\s+/.exec(b),E=w&&w[0]||"";if(sn+an+"Enter"===o)return d||h?(we(t),n.select(g-p(b)).wrap(E,"\n").insert(m).record(),!1):void 0;if(sn+"Enter"===o&&(d||h))return we(t),n.select(v+p(y)).wrap("\n"+E,"").insert(m).record(),!1;if(on!==o+"-"&&sn!==o+"-"){if(" "===o)return s=l[a=d.slice(-1)],!m&&s&&a&&s===h[0]?(we(t),n.wrap(" "," ")):void 0;if("Backspace"===o||"Delete"===o){if(s=l[a=d.slice(-1)],"\\"===a)return;return m?h&&d&&s&&s===h[0]&&!d.endsWith("\\"+a)?(we(t),n.record().peel(a,s).record()):void 0:(s=l[a=d.trim().slice(-1)])&&a&&(h.startsWith(" "+s)&&d.endsWith(a+" ")||h.startsWith("\n"+E+s)&&d.endsWith(a+"\n"+E))?(we(t),n.trim("","").record()):"Delete"!==o&&b.endsWith(c)?(we(t),n.pull(c).record()):h&&d&&!d.endsWith("\\"+a)&&s===h[0]&&a===d.slice(-1)?(we(t),n.peel(a,s).record()):void 0}if("Enter"!==o&&an+"Enter"!==o){if("\\"!==(a=d.slice(-1))){if(s=e(h[0],u)?h[0]:l[a],!m&&h&&d&&s&&r===s)return we(t),n.select(g+1).record();for(a in l){if(s=l[a],r===a&&s)return we(t),n.wrap(a,s).record();if(r===s){if(m)return we(t),n.record().wrap(a,s).record();break}}var x,P,S,A=[];if(m){for(x in l)(P=l[x])&&A.push("(?:\\"+x+"(?:\\\\.|[^\\"+x+(P!==x?"\\"+P:"")+"])*\\"+P+")");if(A.push("\\w+"),A.push("\\s+"),A.push("[\\s\\S]"),sn+"ArrowLeft"===o)return we(t),(S=St("("+A.join("|")+")$","").exec(d))?n.insert("").select(g-p(S[0])).insert(m).record():n.select();if(sn+"ArrowRight"===o)return we(t),(S=h.match(St("^("+A.join("|")+")","")))?n.insert("").select(v+p(S[0])-p(m)).insert(m).record():n.select()}if(v+=p(y),g-=p(b),m=b+m+y,sn+"ArrowUp"===o){if(we(t),!e("\n",d))return n.select();n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"$2",1),n.replace(/(^|\n)([^\n]*?)$/,"",-1);var _=n.$();return d=_.before,g=_.start,b=d.split("\n").pop(),n.select(g-=p(b)).wrap(m,"\n"),n.select(g,g+p(m)),n.record()}if(sn+"ArrowDown"===o){if(we(t),!e("\n",h))return n.select();n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"",1),n.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var T=n.$();return h=T.after,v=T.end,y=h.split("\n").shift(),n.select(v+=p(y)).wrap("\n",m),v+=1,n.select(v,v+p(m)),n.record()}}}else if(!m){if(h&&d&&(s=l[a=d.slice(-1)])&&s===h[0])return we(t),n.wrap("\n"+E+(a!==s?c:""),"\n"+E).record();if(E)return we(t),n.insert("\n"+E,-1).record()}}else we(t)}}var un={attach:function(){var e=this,t=e.constructor.prototype;return e.state=w({pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"}},e.state),!n(t.alert)&&(t.alert=function(e,t){return P.alert&&P.alert(e),n(t)&&t.call(this,!0)}),!n(t.confirm)&&(t.confirm=function(e,t){return n(t)&&t.call(this,P.confirm&&P.confirm(e))}),!n(t.insertBlock)&&(t.insertBlock=function(e,t){var n=this,r=n.$(),i=r.after,o=r.before,s=r.end,a=r.start,c=i.split("\n").shift(),l=p(c),u=o.split("\n").pop(),f=p(u),h=/^\s+/.exec(u),d=h&&h[0]||"";return-1===t?n.select(a-f).insert("\n",1).push(d).insert(e,1,!1):1===t?n.select(s+l).insert("\n",-1).push(d).insert(e,1,!1):n.select(a-f,s+l).insert(e,t,!0).wrap(d,"")}),!n(t.peelBlock)&&(t.peelBlock=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.end,c=i.start,l=i.value,u=p(t),f=o.split("\n").shift(),h=p(f),d=s.split("\n").pop(),v=p(d),g=p(e);return n&&t===l.slice(-u)&&e===l.slice(0,g)||t===f.slice(-u)&&e===d.slice(0,g)?r.select(c-v+(n?0:g),a+h-(n?0:u)).peel(e,t,n):r.select(c,a)}),!n(t.prompt)&&(t.prompt=function(e,t,r){return n(r)&&r.call(this,!!P.prompt&&P.prompt(e,t))}),!n(t.selectBlock)&&(t.selectBlock=function(e){void 0===e&&(e=!0);var t=this,n=t.$(),r=n.after,i=n.before,o=n.end,s=n.start,a=n.value,c=r.split("\n").shift(),l=p(c),u=i.split("\n").pop(),f=p(u);if(!e){var h=/\s+$/.exec(c),d=/^\s+/.exec(u);h&&(l-=p(h[0])),d&&(f-=p(d[0]))}if(t.select(s-f,o+l),!e){var v,g=t.$();if(o=g.end,s=g.start,a=g.value,v=/^(\s+)?[\s\S]+?(\s+)?$/.exec(a))return t.select(s+p(v[1]||""),o-p(v[2]||""))}return t}),!n(t.toggle)&&(t.toggle=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value,c=p(t),l=p(e);return n&&t===a.slice(-c)&&e===a.slice(0,l)||t===o.slice(0,c)&&e===s.slice(-l)?r.peel(e,t,n):r.wrap(e,t,n)}),!n(t.toggleBlock)&&(t.toggleBlock=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value,c=p(t),l=o.split("\n").shift(),u=s.split("\n").pop(),f=p(e);return n&&t===a.slice(-c)&&e===a.slice(0,f)||t===l.slice(-c)&&e===u.slice(0,f)?r.peelBlock(e,t,n):r.wrapBlock(e,t,n)}),!n(t.wrapBlock)&&(t.wrapBlock=function(e,t,n){var r=this.$(),i=r.after,o=r.before,s=r.end,a=r.start,c=i.split("\n").shift(),l=p(c),u=o.split("\n").pop(),f=p(u);return this.select(a-f,s+l).wrap(e,t,n)}),e.on("key.down",ln).record()},detach:function(){return this.off("key.down",ln)},name:"TextEditor.Source"};function fn(e){for(var t;t=Bt.instances.pop();)t.detach();var n,r,i,o=$(".lot\\:field.type\\:source .textarea");o&&p(o)&&o.forEach((function(e){var t;(n=new Bt(e,r=null!=(t=K(e,"state"))?t:{})).key("Escape",(function(){var e=X(this.self,"[tabindex]:not(.not\\:active)");return!e||(e.focus({focusVisible:!0}),!1)})),"HTML"!==(i=r.type||e.form.elements["data[type]"]||e.form.elements["page[type]"]||e.form.elements["file[type]"]||"text/plain")&&"text/html"!==i||(n.command("blocks",(function(){})),n.command("bold",(function(){})),n.command("code",(function(){})),n.command("image",(function(){})),n.command("italic",(function(){})),n.command("link",(function(){})),n.command("quote",(function(){})),n.command("underline",(function(){})),n.key('Control-Shift-"',"quote"),n.key("Control-'","quote"),n.key("Control-b","bold"),n.key("Control-e","code"),n.key("Control-h","blocks"),n.key("Control-i","italic"),n.key("Control-l","link"),n.key("Control-o","image"),n.key("Control-u","underline")),Bt.instances.push(n)})),1===e&&P._.on("change",fn)}Bt.instances=[],Bt.state.with.push(Yt),Bt.state.with.push(rn),Bt.state.with.push(un),P.TextEditor=Bt;var hn=':scope>:where(.lot\\:file[tabindex],.lot\\:folder[tabindex]):not([tabindex="-1"]):not(.not\\:active)';function dn(e){e&&n(e.focus)&&e.focus()}function pn(e){if(!e.defaultPrevented){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=R(i);t&&q(t,"not:active");)t=R(t);for(n=I(i);n&&q(n,"not:active");)n=I(n);"ArrowDown"===o?(dn(t),r=!0):"ArrowUp"===o?(dn(n),r=!0):"End"===o?(dn([].slice.call($(hn,X(i))).pop()),r=!0):"Home"===o&&(dn(C(hn,X(i))),r=!0),r&&(we(e),Ee(e))}}}function vn(e){if(!e.defaultPrevented){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;if(n===e.target){if(!i&&!o&&!s)"ArrowDown"===r||"Home"===r?(dn(C(hn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(dn([].slice.call($(hn,n)).pop()),t=!0);t&&(we(e),Ee(e))}}}var gn=':scope>ul>li>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function mn(e){e&&n(e.focus)&&e.focus()}function yn(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if((t=X(s,"[aria-orientation]"))&&(o="v"===(T(t,"aria-orientation")||[""])[0]),!c&&!l&&!u){if(t=X(s)){for(n=R(t);n&&(q(n,"as:separator")||q(n,"not:active"));)n=R(n);for(r=I(t);r&&(q(r,"as:separator")||q(r,"not:active"));)r=I(r)}"Arrow"+(o?"Up":"Left")===a?(mn(r&&H(r)),i=!0):"Arrow"+(o?"Down":"Right")===a?(mn(n&&H(n)),i=!0):"End"===a?((t=X(s,".lot\\:links[tabindex]"))&&mn([].slice.call($(gn,t)).pop()),i=!0):"Home"===a&&((t=X(s,".lot\\:links[tabindex]"))&&mn(C(gn,t)),i=!0)}i&&(we(e),Ee(e))}}function kn(e){if(!e.defaultPrevented){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(n="v"===(T(r,"aria-orientation")||[""])[0],o||s||a||("Arrow"+(n?"Down":"Right")===i||"Home"===i?(mn(C(gn,r)),t=!0):"Arrow"+(n?"Up":"Left")!==i&&"End"!==i||(mn([].slice.call($(gn,r)).pop()),t=!0)),t&&(we(e),Ee(e)))}}var bn=":where(a,[tabindex]):not(.not\\:active)";function wn(e){e&&n(e.focus)&&e.focus()}function En(e,t){$(".lot\\:menu[tabindex].is\\:enter").forEach((function(n){e!==n&&(Q(X(n),"is:active"),Q(I(n),"is:active"),Q(n,"is:enter"),t&&ie(t,"aria-expanded","false"))}))}function xn(){En(0)}function Pn(e){if(!e.defaultPrevented){var t=this,n=R(t);En(n,t),P.setTimeout((function(){me(n,"is:enter"),me(X(t),"is:active"),me(t,"is:active"),ie(t,"aria-expanded",q(t,"is:active")?"true":"false")}),1),we(e),Ee(e)}}function Sn(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key;if(n=X(s)){for(r=R(n);r&&(q(r,"as:separator")||q(r,"not:active"));)r=R(r);for(i=I(n);i&&(q(i,"as:separator")||q(i,"not:active"));)i=I(i)}"ArrowDown"===a?(wn(r&&H(r)),o=!0):"ArrowLeft"===a||"Escape"===a||"Tab"===a?((n=X(s,".lot\\:menu[tabindex].is\\:enter"))?(Q(X(s),"is:active"),Q(n,"is:enter"),Q(s,"is:active"),ie(I(n),"aria-expanded","false"),"Tab"!==a&&wn(I(n))):"Escape"===a&&wn(X(s,".lot\\:menu[tabindex]")),o="Tab"!==a):"ArrowRight"===a?((r=R(s))&&q(r,"lot:menu")&&(ie(s,"aria-expanded","true"),se(X(s),"is:active"),se(r,"is:enter"),se(s,"is:active"),P.setTimeout((function(){wn(C(bn,r))}),1)),o=!0):"ArrowUp"===a?((t=i&&H(i))?wn(t):(t=X(s,".lot\\:menu[tabindex].is\\:enter"))&&q(t,"level:1")&&(Q(t,"is:enter"),(t=I(t))&&(Q(t,"is:active"),Q(X(t),"is:active"),ie(t,"aria-expanded","false"),P.setTimeout((function(){wn(t)}),1))),o=!0):"End"===a?((n=X(s,".lot\\:menu[tabindex]"))&&wn([].slice.call($(bn,n)).pop()),o=!0):"Home"===a&&((n=X(s,".lot\\:menu[tabindex]"))&&wn(C(bn,n)),o=!0),o&&(we(e),Ee(e))}}function An(e){if(!e.defaultPrevented){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;n===e.target&&(i||o||s||("ArrowDown"===r||"Home"===r?(wn(C(bn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(wn([].slice.call($(bn,n)).pop()),t=!0)),t&&(we(e),Ee(e)))}}function _n(e){if(!e.defaultPrevented){var t,n=this,r=e.key,i=R(n),o=X(n);i&&o&&q(i,"lot:menu")&&(" "===r||"Enter"===r||"Tab"===r?"Tab"===r?q(i,"is:enter")&&ke("click",n):(ke("click",n),P.setTimeout((function(){wn(C(bn,i))}),1),t=!0):"ArrowDown"===r&&q(i,"level:1")&&(ie(n,"aria-expanded","true"),se(X(n),"is:active"),se(i,"is:enter"),se(n,"is:active"),P.setTimeout((function(){wn(C(bn,i))}),1),t=!0)),t&&(we(e),Ee(e))}}var Tn=':scope>ul>li>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function Hn(e){e&&n(e.focus)&&e.focus()}function Ln(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if((t=X(s,"[aria-orientation]"))&&(o="v"===(T(t,"aria-orientation")||[""])[0]),!c&&!l&&!u){if(t=X(s)){for(n=R(t);n&&(q(n,"as:separator")||q(n,"not:active"));)n=R(n);for(r=I(t);r&&(q(r,"as:separator")||q(r,"not:active"));)r=I(r)}"Arrow"+(o?"Up":"Left")===a?(Hn(r&&H(r)),i=!0):"Arrow"+(o?"Down":"Right")===a?(Hn(n&&H(n)),i=!0):"End"===a?((t=X(s,".lot\\:menus[tabindex]"))&&Hn([].slice.call($(Tn,t)).pop()),i=!0):"Home"===a&&((t=X(s,".lot\\:menus[tabindex]"))&&Hn(C(Tn,t)),i=!0)}i&&(we(e),Ee(e))}}function Dn(e){if(!e.defaultPrevented){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(n="v"===(T(r,"aria-orientation")||[""])[0],o||s||a||("Arrow"+(n?"Down":"Right")===i||"Home"===i?(Hn(C(Tn,r)),t=!0):"Arrow"+(n?"Up":"Left")!==i&&"End"!==i||(Hn([].slice.call($(Tn,r)).pop()),t=!0)),t&&(we(e),Ee(e)))}}var Kn=':scope>.lot\\:page[tabindex]:not([tabindex="-1"]):not(.not\\:active)';function Cn(e){e&&n(e.focus)&&e.focus()}function $n(e){if(!e.defaultPrevented){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=R(i);t&&q(t,"not:active");)t=R(t);for(n=I(i);n&&q(n,"not:active");)n=I(n);"ArrowDown"===o?(Cn(t),r=!0):"ArrowUp"===o?(Cn(n),r=!0):"End"===o?(Cn([].slice.call($(Kn,X(i))).pop()),r=!0):"Home"===o&&(Cn(C(Kn,X(i))),r=!0),r&&(we(e),Ee(e))}}}function On(e){if(!e.defaultPrevented){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;n===e.target&&(i||o||s||("ArrowDown"===r||"Home"===r?(Cn(C(Kn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(Cn([].slice.call($(Kn,n)).pop()),t=!0)),t&&(we(e),Ee(e)))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fn={exports:{}};"undefined"!=typeof self&&self,Fn.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){var n=this;if(r(this,e),this.config=e.mergeSettings(t),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw Error("Something wrong with your selector ðŸ˜­");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=e.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler"].forEach((function(e){n[e]=n[e].bind(n)})),this.init()}return o(e,[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)}},{key:"init",value:function(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this)}},{key:"buildSliderFrame",value:function(){var e=this.selectorWidth/this.perPage,t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length;this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=e*t+"px",this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");var n=document.createDocumentFragment();if(this.config.loop)for(var r=this.innerElements.length-this.perPage;r<this.innerElements.length;r++){var i=this.buildSliderFrameItem(this.innerElements[r].cloneNode(!0));n.appendChild(i)}for(var o=0;o<this.innerElements.length;o++){var s=this.buildSliderFrameItem(this.innerElements[o]);n.appendChild(s)}if(this.config.loop)for(var a=0;a<this.perPage;a++){var c=this.buildSliderFrameItem(this.innerElements[a].cloneNode(!0));n.appendChild(c)}this.sliderFrame.appendChild(n),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}},{key:"buildSliderFrameItem",value:function(e){var t=document.createElement("div");return t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.width=(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length)+"%",t.appendChild(e),t}},{key:"resolveSlidesNumber",value:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"===i(this.config.perPage))for(var e in this.perPage=1,this.config.perPage)window.innerWidth>=e&&(this.perPage=this.config.perPage[e])}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide-e<0){this.disableTransition();var r=this.currentSlide+this.innerElements.length,i=r+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(o+s)+"px, 0, 0)",this.currentSlide=r-e}else this.currentSlide=this.currentSlide-e;else this.currentSlide=Math.max(this.currentSlide-e,0);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide+e>this.innerElements.length-this.perPage){this.disableTransition();var r=this.currentSlide-this.innerElements.length,i=r+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(o+s)+"px, 0, 0)",this.currentSlide=r+e}else this.currentSlide=this.currentSlide+e;else this.currentSlide=Math.min(this.currentSlide+e,this.innerElements.length-this.perPage);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"disableTransition",value:function(){this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing}},{key:"enableTransition",value:function(){this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing}},{key:"goTo",value:function(e,t){if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.perPage),n!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),t&&t.call(this))}}},{key:"slideToCurrent",value:function(e){var t=this,n=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,r=(this.config.rtl?1:-1)*n*(this.selectorWidth/this.perPage);e?requestAnimationFrame((function(){requestAnimationFrame((function(){t.enableTransition(),t.sliderFrame.style[t.transformProperty]="translate3d("+r+"px, 0, 0)"}))})):this.sliderFrame.style[this.transformProperty]="translate3d("+r+"px, 0, 0)"}},{key:"updateAfterDrag",value:function(){var e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),n=this.config.multipleDrag?Math.ceil(t/(this.selectorWidth/this.perPage)):1,r=e>0&&this.currentSlide-n<0,i=e<0&&this.currentSlide+n>this.innerElements.length-this.perPage;e>0&&t>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(n):e<0&&t>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(n),this.slideToCurrent(r||i)}},{key:"resizeHandler",value:function(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}},{key:"touchstartHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}},{key:"touchendHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(e){if(e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mousedownHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}},{key:"mouseupHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(e){if(e.preventDefault(),this.pointerDown){"A"===e.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=e.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mouseleaveHandler",value:function(e){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}},{key:"clickHandler",value:function(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}},{key:"remove",value:function(e,t){if(e<0||e>=this.innerElements.length)throw Error("Item to remove doesn't exist ðŸ˜­");var n=e<this.currentSlide,r=this.currentSlide+this.perPage-1===e;(n||r)&&this.currentSlide--,this.innerElements.splice(e,1),this.buildSliderFrame(),t&&t.call(this)}},{key:"insert",value:function(e,t,n){if(t<0||t>this.innerElements.length+1)throw Error("Unable to inset it at this index ðŸ˜­");if(-1!==this.innerElements.indexOf(e))throw Error("The same item in a carousel? Really? Nope ðŸ˜­");var r=t<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=r?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.buildSliderFrame(),n&&n.call(this)}},{key:"prepend",value:function(e,t){this.insert(e,0),t&&t.call(this)}},{key:"append",value:function(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(this.detachEvents(),this.selector.style.cursor="auto",e){for(var n=document.createDocumentFragment(),r=0;r<this.innerElements.length;r++)n.appendChild(this.innerElements[r]);this.selector.innerHTML="",this.selector.appendChild(n),this.selector.removeAttribute("style")}t&&t.call(this)}}],[{key:"mergeSettings",value:function(e){var t={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:function(){},onChange:function(){}},n=e;for(var r in n)t[r]=n[r];return t}},{key:"webkitOrNot",value:function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}}]),e}();t.default=s,e.exports=t.default}]);var Rn=jn(Fn.exports);Rn.instances=[],P.Siema=Rn;var Xn='a[target^="stack:"]:not(.not\\:active)';function Un(e){e&&n(e.focus)&&e.focus()}function In(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey;if(!c&&!l)if("ArrowDown"===a||"ArrowRight"===a||"PageDown"===a){if(r=X(X(s)))for(n=R(r);n&&q(n,"not:active");)n=R(n);(t=n&&H(n))&&("ArrowRight"===a&&q(X(t),"can:toggle")||ke("click",H(t)),Un(H(t))),o=!0}else if("ArrowUp"===a||"ArrowLeft"===a||"PageUp"===a){if(r=X(X(s)))for(i=I(r);i&&q(i,"not:active");)i=I(i);(t=i&&H(i))&&("ArrowLeft"===a&&q(X(t),"can:toggle")||ke("click",H(t)),Un(H(t))),o=!0}else" "===a||"Enter"===a?(q(X(X(s)),"can:toggle")&&(ke("click",s),Un(s)),o=!0):"End"===a?((r=X(s,".lot\\:stacks[tabindex]"))&&(t=[].slice.call($(Xn,r)).pop())&&(ke("click",t),Un(t)),o=!0):"Home"===a&&((r=X(s,".lot\\:stacks[tabindex]"))&&(t=C(Xn,r))&&(ke("click",t),Un(t)),o=!0);o&&(we(e),Ee(e))}}function Nn(e){if(!e.defaultPrevented){var t,n,r,i,o=this,s=e.key,a=e.altKey,c=e.ctrlKey,l=e.shiftKey;if(a&&c&&!l)t=(t=C(Xn+".is\\:current",o))&&X(X(t)),"PageDown"===s?((t=(n=t&&R(t))&&C(Xn,n))&&(ke("click",t),Un(t)),i=!0):"PageUp"===s&&((t=(r=t&&I(t))&&C(Xn,r))&&(ke("click",t),Un(t)),i=!0);else if(!a&&!c&&!l){if(o!==e.target)return;"ArrowDown"===s||"ArrowRight"===s||"Home"===s||"PageDown"===s?((t=C(Xn,o))&&(ke("click",t),Un(t)),i=!0):"ArrowUp"!==s&&"ArrowLeft"!==s&&"End"!==s&&"PageUp"!==s||((t=[].slice.call($(Xn,o)).pop())&&(ke("click",t),Un(t)),i=!0)}i&&(we(e),Ee(e))}}var Wn='a[target^="tab:"]:not(.not\\:active)';function Mn(e){e&&n(e.focus)&&e.focus()}function Bn(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey;if(!c&&!l)if("ArrowDown"===a){if(q(s,"can:toggle")&&!q(s,"is:current"))t=s;else{if(r=X(s))for(n=R(r);n&&q(n,"not:active");)n=R(n);t=n&&H(n)}t&&(ke("click",t),Mn(t)),o=!0}else if("ArrowLeft"===a||"PageUp"===a){if(r=X(s))for(i=I(r);i&&q(i,"not:active");)i=I(i);(t=i&&H(i))&&(ke("click",t),Mn(t)),o=!0}else if("ArrowRight"===a||"PageDown"===a){if(r=X(s))for(n=R(r);n&&q(n,"not:active");)n=R(n);(t=n&&H(n))&&(ke("click",t),Mn(t)),o=!0}else if("ArrowUp"===a){if(q(s,"can:toggle")&&q(s,"is:current"))t=s;else{if(r=X(s))for(i=I(r);i&&q(i,"not:active");)i=I(i);t=i&&H(i)}t&&(ke("click",t),Mn(t)),o=!0}else" "===a||"Enter"===a?(q(s,"can:toggle")&&(ke("click",s),Mn(s)),o=!0):"End"===a?((r=X(s,".lot\\:tabs[tabindex]"))&&(t=[].slice.call($(Wn,r)).pop())&&(ke("click",t),Mn(t)),o=!0):"Home"===a&&((r=X(s,".lot\\:tabs[tabindex]"))&&(t=C(Wn,r))&&(ke("click",t),Mn(t)),o=!0);o&&(we(e),Ee(e))}}function qn(e){if(!e.defaultPrevented){var t,n,r,i,o=this,s=e.key,a=e.altKey,c=e.ctrlKey,l=e.shiftKey;if(a&&c&&!l)t=(t=C(Wn+".is\\:current",o))&&X(t),"PageDown"===s?((t=(n=t&&R(t))&&H(n))&&(ke("click",t),Mn(t)),i=!0):"PageUp"===s&&((t=(r=t&&I(t))&&H(r))&&(ke("click",t),Mn(t)),i=!0);else if(!a&&!c&&!l){if(o!==e.target)return;"ArrowDown"===s||"ArrowRight"===s||"PageDown"===s||"ArrowUp"===s||"ArrowLeft"===s||"PageUp"===s?((t=C(Wn+".is\\:current",o))&&(ke("click",t),Mn(t)),i=!0):"Home"===s?((t=C(Wn,o))&&(ke("click",t),Mn(t)),i=!0):"End"===s&&((t=[].slice.call($(Wn,o)).pop())&&(ke("click",t),Mn(t)),i=!0)}i&&(we(e),Ee(e))}}var zn=':scope>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function Yn(e){e&&n(e.focus)&&e.focus()}function Vn(e){e&&n(e.select)&&e.select()}function Gn(e){if(!e.defaultPrevented){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if(!c&&!l&&!u){for(r=R(s);r&&q(r,"not:active");)r=R(r);for(i=I(s);i&&q(i,"not:active");)i=I(i);"ArrowLeft"===a?(o=!("selectionStart"in s&&0!==s.selectionStart))&&(Yn(i),Vn(i)):"ArrowRight"===a?(o=!("selectionEnd"in s&&s.selectionEnd<p(s.value||"")))&&(Yn(r),Vn(r)):"End"===a?(o=!("selectionEnd"in s&&p(s.value||"")))&&(n=X(s,".lot\\:tasks[tabindex]"))&&(t=[].slice.call($(zn,n)).pop())&&(Yn(t),Vn(t)):"Home"===a&&(o=!("selectionStart"in s&&p(s.value||"")))&&(n=X(s,".lot\\:tasks[tabindex]"))&&(t=C(zn,n))&&(Yn(t),Vn(t))}o&&(we(e),Ee(e))}}function Jn(e){if(!e.defaultPrevented){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(o||s||a||("ArrowLeft"===i||"End"===i?((t=[].slice.call($(zn,r)).pop())&&(Yn(t),Vn(t)),n=!0):"ArrowRight"!==i&&"Home"!==i||((t=C(zn,r))&&(Yn(t),Vn(t)),n=!0)),n&&(we(e),Ee(e)))}}Vt.instances=[];var Qn=Ze((function(e){return e.pull()}),1e3),Zn=new Vt(P);Vt.instances.push(Zn),Zn.keys.Escape=function(){var e=x.activeElement,t=e&&X(X(e),"[tabindex]:not(.not\\:active)");return t&&t.focus({focusVisible:!0}),!t},Zn.keys.F3=function(){var e,t=(e="get",x.forms[e]||null),n=t&&t.query;return n&&n.focus(),!1},Zn.keys.F10=function(){var e,t=C(".lot\\:bar a:any-link");return t&&(t.focus(),(e=X(t))&&q(e,"has:menu")&&t.click()),!1},Pe("blur",P,(function(e){this._event=e,Zn.pull()})),Pe("keydown",P,(function(e){this._event=e,Zn.push(e.key);var t=Zn.command();if(t){var n=Zn.fire(t);!1===n?(we(e),Ee(e)):null===n&&console.error("Unknown command:",t)}Qn(Zn)})),Pe("keyup",P,(function(e){this._event=e,Zn.pull(e.key)}));var er,tr={commands:Zn.commands,keys:Zn.keys},nr=st(tr),rr=nr.fire;nr.hooks,nr.off,nr.on,P.Key=Vt,P._=tr,Pe("beforeload",x,(function(){return rr("let")})),Pe("load",x,(function(){return rr("get")})),Pe("DOMContentLoaded",x,(function(){return rr("set")})),function e(t){var n=$(".lot\\:bar[tabindex]");n&&p(n)&&n.forEach((function(e){$(Ae,e).forEach((function(e){Pe("keydown",e,He)})),Pe("keydown",e,Te)})),1===t&&P._.on("change",e)}(1),P._.dialog=je,xt(1),Rt(1),fn(1),function e(t){var n=$(":where(.lot\\:files,.lot\\:folders)[tabindex]");n&&p(n)&&n.forEach((function(e){$(hn,e).forEach((function(e){Pe("keydown",e,pn)})),Pe("keydown",e,vn)})),1===t&&P._.on("change",e)}(1),function e(t){var n=$(".lot\\:links[tabindex]");n&&p(n)&&n.forEach((function(e){var t=$(gn,e);t&&p(t)&&t.forEach((function(e){Pe("keydown",e,yn)})),Pe("keydown",e,kn)})),1===t&&P._.on("change",e)}(1),function e(t){be("click",x,xn);var n=$(".has\\:menu"),r=$(".lot\\:menu[tabindex]>ul>li>"+bn);n&&p(n)&&(n.forEach((function(e){var t=C(".lot\\:menu[tabindex]",e),n=I(t);t&&n&&(Pe("click",n,Pn),Pe("keydown",n,_n))})),Pe("click",x,xn)),r&&p(r)&&r.forEach((function(e){Pe("keydown",e,Sn)}));var i=$(".lot\\:menu[tabindex]");i&&p(i)&&i.forEach((function(e){Pe("keydown",e,An)})),1===t&&P._.on("change",e)}(1),function e(t){var n=$(".lot\\:menus[tabindex]");n&&p(n)&&n.forEach((function(e){var t=$(Tn,e);t&&p(t)&&t.forEach((function(e){Pe("keydown",e,Ln)})),Pe("keydown",e,Dn)})),1===t&&P._.on("change",e)}(1),function e(t){var n=$(".lot\\:pages[tabindex]");n&&p(n)&&n.forEach((function(e){$(Kn,e).forEach((function(e){Pe("keydown",e,$n)})),Pe("keydown",e,On)})),1===t&&P._.on("change",e)}(1),(er=$(".siema"))&&p(er)&&er.forEach((function(e){var t=new Rn({duration:600,loop:!0,selector:e}),n=P.setInterval((function(){return t.next()}),5e3);Pe("mousedown",e,(function(){return P.clearInterval(n)})),Pe("touchstart",e,(function(){return P.clearInterval(n)})),Rn.instances.push(t)})),_.on("change.stack",(function(){return ke("resize",P)})),_.on("change.tab",(function(){return ke("resize",P)})),function e(t){var n=$(".lot\\:stacks[tabindex]");n&&p(n)&&n.forEach((function(e){var t,n,r=[].slice.call(L(e)),i=ue("input");function o(e){var o,s=this,a=X(X(s)),c=X(a,".lot\\:stacks");q(a,"has:link")||(r.forEach((function(e){e!==a&&(Q(o=C('a[target^="stack:"]',e),"is:current"),Q(e,"is:current"),ie(o,"aria-expanded","false"))})),q(a,"can:toggle")?(ie(s,"aria-expanded",T(s,"aria-expanded")?"false":"true"),me(a,"is:current"),me(s,"is:current")):(ie(s,"aria-expanded","true"),se(a,"is:current"),se(s,"is:current")),o=q(s,"is:current"),i.value=n=o?K(a,"value"):null,me(c,"has:current",o),P._.fire.call(a,"change.stack",[n,t]),we(e))}i.type="hidden",i.name=t=K(e,"name"),t&&oe(e,i),r.forEach((function(e){var t=C(Xn,e);Pe("click",t,o),Pe("keydown",t,In)}));var s=r.find((function(e,t){return 0!==t&&q(e,"is:current")}));s&&(i.value=K(s,"value")),Pe("keydown",e,Nn)})),1===t&&P._.on("change",e)}(1),function e(t){var n=$(".lot\\:tabs[tabindex]");n&&p(n)&&n.forEach((function(e){var t,n,r=[].slice.call(L(e)),i=[].slice.call($(Wn,r.shift())),o=ue("input");function s(e){var s,a=this,c=r[a._tabIndex],l=X(a),u=X(l,".lot\\:tabs");q(l,"has:link")||(i.forEach((function(e){if(e!==a){Q(X(e),"is:current"),Q(e,"is:current"),ie(e,"aria-selected","false"),ie(e,"tabindex","-1");var t=r[e._tabIndex];t&&Q(t,"is:current")}})),q(l,"can:toggle")?(me(l,"is:current"),me(a,"is:current"),ie(a,"aria-selected",q(a,"is:current")?"true":"false"),ie(a,"tabindex",q(a,"is:current")?"0":"-1")):(se(l,"is:current"),se(a,"is:current"),ie(a,"aria-selected","true"),ie(a,"tabindex","0")),s=q(a,"is:current"),c&&(o.value=n=s?K(a,"value"):null,me(c,"is:current",s),me(u,"has:current",s),P._.fire.call(c,"change.tab",[n,t])),we(e))}o.type="hidden",o.name=t=K(e,"name"),t&&oe(e,o),i.forEach((function(e,t){e._tabIndex=t,Pe("click",e,s),Pe("keydown",e,Bn)}));var a=i.find((function(e,t){return 0!==t&&q(X(e),"is:current")}));a&&(o.value=K(a,"value")),Pe("keydown",e,qn)})),1===t&&P._.on("change",e)}(1),function e(t){var n=$(".lot\\:tasks[tabindex]");n&&p(n)&&n.forEach((function(e){var t=$(zn,e);t&&p(t)&&t.forEach((function(e){Pe("keydown",e,Gn)})),Pe("keydown",e,Jn)})),1===t&&P._.on("change",e)}(1)}();