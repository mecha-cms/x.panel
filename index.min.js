!function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},n=function(e){return"function"==typeof e},r=function(e,t){return e&&a(t)&&e instanceof t},i=function(e){return o(e)&&0==e%1},o=function(e){return"number"==typeof e},s=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||r(e,Object))},a=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},c=function(e){return"string"==typeof e},l=function(e){return t(e)?e:[e]},u=function(e,t){var n=t.indexOf(e);return-1!==n?n:null},f=function(e){return e.replace(/[-_.](\w)/g,(function(e,t){return d(t)}))},h=function(e){return e.toLowerCase()},d=function(e){return e.toUpperCase()},p=function(e){return e.length},v=function(e,t){return a(t[0])&&e<t[0]?t[0]:a(t[1])&&e>t[1]?t[1]:e},g=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},m=function(e){return p(y(e))},y=function(e){return Object.keys(e)},k=function(e){return Object.values(e)};function b(e,t){var n,r,i,o={},a=t?"%5D":"";for(n in e)r=E(n),i=e[n],s(i)?o=A({},o,b(i,t+r+a+"%5B")):o[t+r+a]=i;return o}var w=function(e){var t,n,r=[],i=b(e,"");for(t in i)n=!0!==(n=i[t])?"="+E(T(n)):"",r.push(t+n);return p(r)?"?"+r.join("&"):null},E=function(e){return encodeURIComponent(e)},x=function e(n){if(t(n))return n.map((function(t){return e(t)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(n))return g(n);if(s(n)){for(var r in n)n[r]=e(n[r]);return n}return"false"!==n&&("null"===n?null:"true"===n||n)};var S=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);var r={},i=e&&"?"===e[0]?e.slice(1):e;return""===i||i.split("&").forEach((function(e){var i=e.split("="),o=P(i[0]),s=a(i[1])?P(i[1]):n;s=t?x(s):s,"]"===o.slice(-1)?function(e,t,n){var r,i,o=t.split("["),s=p(o);for(r=0;r<s-1;++r)e=e[i=""===(i="]"===o[r].slice(-1)?o[r].slice(0,-1):o[r])?m(i):i]||(e[i]={});e[""===(i="]"===o[r].slice(-1)?o[r].slice(0,-1):o[r])?m(e):i]=n}(r,o,s):r[o]=s})),r},A=function n(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];for(var c=i.shift(),l=0,u=p(i);l<u;++l)for(var f in i[l])if(a(c[f]))if(t(c[f])&&t(i[l][f])){c[f]=[].concat(c[f]);for(var h=0,d=p(i[l][f]);h<d;++h)e(i[l][f][h],c[f])||c[f].push(i[l][f][h])}else s(c[f])&&s(i[l][f])?c[f]=n({},c[f],i[l][f]):c[f]=i[l][f];else c[f]=i[l][f];return c},P=function(e){return decodeURIComponent(e)},T=function e(n){if(t(n))return n.map((function(t){return e(n)}));if(s(n)){for(var r in n)n[r]=e(n[r]);return n}return!1===n?"false":null===n?"null":!0===n?"true":""+n},H=document,L=window,C=H.body,D=H.documentElement,K=function(e,t,n){if(void 0===n&&(n=!0),!G(e,t))return null;var r=e.getAttribute(t);return n?x(r):r},$=function(e){return e.firstElementChild||null},O=function(e,t){var n=e.children;return o(t)?n[t]||null:n||[]},R=function(e,t){void 0===t&&(t=!0);var n=(Y(e,"className")||"").trim();return t?n.split(/\s+/).filter((function(e){return""!==e})):n},F=function(e,t,n){void 0===n&&(n=!0);var r=K(e,"data-"+t,n),i=(r+"").trim();return n&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(r))?i:r},X=function(e,t){return(t||H).querySelector(e)},U=function(e,t){return(t||H).querySelectorAll(e)},I=function(e,t){void 0===t&&(t=!0);var n="innerHTML";if(!Z(e,n))return!1;var r=e[n];return""!==(r=t?r.trim():r)?r:null},N=function(e){return h(e&&e.nodeName||"")||null},W=function(e,t){return e["next"+(t?"":"Element")+"Sibling"]||null},M=function(e,t){return t?e.closest(t)||null:e.parentNode||null},B=function(e){var t="form";return Z(e,t)&&t===N(e[t])?e[t]:M(e,t)},q=function(e,t){return e.previousElementSibling||null},z=function(e,t,n){void 0===n&&(n=!0);var r=L.getComputedStyle(e).getPropertyValue(t);return n&&(r=x(r)),r||""===r||0===r?r:null},Y=function(e,t){return Z(e,t)&&e[t]||null},V=function(e,t){void 0===t&&(t=!0);var n="textContent";if(!Z(e,n))return!1;var r=e[n];return""!==(r=t?r.trim():r)?r:null},G=function(e,t){return e.hasAttribute(t)},J=function(e,t){return e.classList.contains(t)},Q=function(e,t){return null!==M(e,t)},Z=function(e,t){return t in e},ee=function(e){return r(e,Node)},te=function(e){return e===L},ne=function(e,t){return e.removeAttribute(t),e},re=function(e,t){return e.classList.remove(t),e},ie=function(e,n){if(t(n))return n.forEach((function(t){return e.classList.remove(t)})),e;if(s(n)){for(var r in n)n[r]&&e.classList.remove(r);return e}return e.className="",e},oe=function(e,t){return ne(e,"data-"+t)},se=function(e){var t=M(e);return e.remove(),t},ae=function(e,t){return e.style[f(t)]=null,e},ce=function(e){var t="textContent";return Z(e,t)&&(e[t]=""),e},le=function(e,t,n){return!0===n&&(n=t),e.setAttribute(t,T(n)),e},ue=function(e,t){return e.append(t),t},fe=function(e,t){return e.classList.add(t),e},he=function(e,n){if(t(n))return n.forEach((function(t){return e.classList.add(t)})),e;if(s(n))for(var r in n)n[r]?e.classList.add(r):e.classList.remove(r);return e.className=n,e},de=function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?pe(e,r,n):oe(e,r);return e},pe=function(e,n,r){return(t(r)||s(r))&&(r=function(e){return JSON.stringify(e)}(r)),le(e,"data-"+n,r)},ve=function(e,t,n){return e=c(e)?H.createElement(e):e,s(t)&&(n=t,t=!1),c(t)&&ge(e,t),s(n)&&function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?le(e,r,n):ne(e,r)}(e,n),e},ge=function(e,t,n){if(void 0===n&&(n=!0),null===t)return e;var r="innerHTML";return Z(e,r)&&(e[r]=n?t.trim():t),e},me=function(e,t){return M(e).insertBefore(t,W(e,!0)),t},ye=function(e,t){return M(e).insertBefore(t,e),t},ke=function(e,t,n){return o(n)&&(n+="px"),e.style[f(t)]=T(n),e},be=function(e,t){var n;for(var r in t)(n=t[r])||""===n||0===n?ke(e,r,n):ae(e,r);return e},we=function(e,t,n){if(void 0===n&&(n=!0),null===t)return e;var r="textContent";return Z(e,r)&&(e[r]=n?t.trim():t),e},Ee=function(e,t,n){return e.classList.toggle(t,n),e},xe=L.history,Se=L.location,_e={},Ae=function(e,t,n,r){t.dispatchEvent(function(e,t,n){return _e[e]=new Event(e,t)}(e,n))},Pe=function(e,t,n){t.removeEventListener(e,n)},Te=function(e){return e&&e.preventDefault()},He=function(e){return e&&e.stopPropagation()},Le=function(e,t,n){e.forEach((function(e){return Pe(e,t,n)}))},Ce=function(e,t,n,r){void 0===r&&(r=!1),t.addEventListener(e,n,r)},De=function(e,t,n,r){void 0===r&&(r=!1),e.forEach((function(e){return Ce(e,t,n,r)}))},Ke=':scope>:where([tabindex]):not([tabindex="-1"]):not(.not\\:active)';function $e(e){e&&n(e.focus)&&e.focus()}function Oe(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function je(e){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;if(n===e.target){if(!i&&!o&&!s)"ArrowLeft"===r||"End"===r?($e([].slice.call(U(Ke,n)).pop()),t=!0):"ArrowRight"!==r&&"Home"!==r||($e(X(Ke,n)),t=!0);t&&(Te(e),He(e))}}function Re(e){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=W(i);t&&J(t,"not:active");)t=W(t);for(n=q(i);n&&J(n,"not:active");)n=q(n);"ArrowLeft"===o?($e(n),r=!0):"ArrowRight"===o?($e(t),r=!0):"End"===o?($e([].slice.call(U(Ke,M(i))).pop()),r=!0):"Home"===o&&($e(X(Ke,M(i))),r=!0),r&&(Te(e),He(e))}}function Fe(e,t,n){return Pe(e,t,n),Ce(e,t,n)}var Xe=ve("dialog"),Ue=ve("form","",{method:"dialog"}),Ie=ve("div");function Ne(e){var t=this;Pe("cancel",t,Ne),Pe("close",t,We),Pe("submit",t,Me),t.x(x(t.returnValue)),n(t.c)&&t.c.call(t,t.open)}function We(e){var t=this;Pe("cancel",t,Ne),Pe("close",t,We),Pe("submit",t,Me),t.v(x(t.returnValue)),n(t.c)&&t.c.call(t,t.open)}function Me(e){We.call(this,e)}function Be(e,t){var r;for(ge(Ue,""),c(e)?(ge(Ie,e.trim()),e=Ie.childNodes):ee(e)&&(e=[e]),e=Array.from(e);r=e.shift();)ue(Ue,r);Xe.showModal(),Xe.returnValue=null,n(t)&&t.call(Xe,Xe.open);var i=X("[autofocus]",Ue);return i&&(n(i.focus)&&i.focus(),n(i.select)&&i.select()),new Promise((function(e,n){Xe.c=t,Xe.v=e,Xe.x=n,Fe("cancel",Xe,Ne),Fe("close",Xe,We),Fe("submit",Xe,Me)}))}function qe(){var e=this,t=M(e.form);t.returnValue=e.value,Ae("reset"===e.type?"cancel":"close",t),t.open&&t.close()}function ze(e){var t,n,r=e.key;"ArrowLeft"===r||"ArrowUp"===r?((n=q(this))&&n.focus(),Te(e)):"ArrowDown"!==r&&"ArrowRight"!==r||((t=W(this))&&t.focus(),Te(e))}ue(C,Xe),ue(Xe,Ue);var Ye=ve("p"),Ve=ve("p","",{role:"group"}),Ge=ve("button","OK",{class:"button",type:"submit",value:"true"});Fe("keydown",Ge,ze),Fe("click",Ge,qe),ue(Ve,Ge),Be.alert=function(e){return ge(Ye,e),Be([Ye,Ve])};var Je=ve("p"),Qe=ve("p","",{role:"group"}),Ze=ve("button","OK",{class:"button",type:"submit",value:"true"}),et=ve("button","Cancel",{autofocus:!0,class:"button",type:"reset",value:"false"});Fe("click",et,qe),Fe("click",Ze,qe),Fe("keydown",et,ze),Fe("keydown",Ze,ze),ue(Qe,Ze),ue(Qe,et),Be.confirm=function(e){return ge(Je,e),Be([Je,Qe])};var tt=ve("p"),nt=ve("input",!1,{autofocus:!0,class:"input",type:"text"}),rt=ve("p"),it=ve("p","",{role:"group"}),ot=ve("button","OK",{class:"button",type:"submit",value:""}),st=ve("button","Cancel",{class:"button",type:"reset",value:"false"});function at(){ot.value=this.value}Fe("click",st,qe),Fe("click",ot,qe),Fe("input",nt,at),Fe("keydown",st,ze),Fe("keydown",ot,ze),Fe("keyup",nt,at),ue(it,ot),ue(it,st),ue(rt,nt),Be.prompt=function(e,t){return ge(tt,e),nt.value=ot.value=t,Be([tt,rt,it])};var ct=function(e,t){var n;return function(){var r=arguments,i=this;n&&clearTimeout(n),n=setTimeout((function(){return e.apply(i,r)}),t)}},lt=function(e,t){return function(){var n=arguments,r=this;setTimeout((function(){return e.apply(r,n)}),t)}},ut=function(e){return[e.offsetLeft,e.offsetTop]},ft=function(e){var t,n,r,i,o,s,a;return te(e)?(i=e.pageXOffset||D.scrollLeft||C.scrollLeft,o=e.pageYOffset||D.scrollTop||C.scrollTop,r=e.innerWidth,t=e.innerHeight):(i=(n=e.getBoundingClientRect()).left,o=n.top,r=n.width,t=n.height,s=n.right,a=n.bottom),[i,o,r,t,s,a]},ht=function(e){return te(e)?[e.innerWidth,e.innerHeight]:[e.offsetWidth,e.offsetHeight]},dt=function(e){return[e.scrollLeft,e.scrollTop]},pt=function(e,t){return e.scrollLeft=t[0],e.scrollTop=t[1],e};function vt(e){var t={};return e.hooks=t,e.fire=function(n,r){return a(t[n])?(t[n].forEach((function(t){return t.apply(e,r)})),e):e},e.off=function(n,r){if(!a(n))return t={},e;if(a(t[n]))if(a(r)){for(var i=0,o=t[n].length;i<o;++i)if(r===t[n][i]){t[n].splice(i,1);break}0===j&&delete t[n]}else delete t[n];return e},e.on=function(n,r){return a(t[n])||(t[n]=[]),a(r)&&t[n].push(r),e},e}var gt="OP",mt="i",yt="$",kt="v",bt="ArrowDown",wt="ArrowLeft",Et="ArrowRight",xt="ArrowUp",St="End",_t="Enter",At="Escape",Pt="Home",Tt="Tab",Ht="‌";function Lt(e){var t=H.createRange();t.selectNodeContents(e);var n=L.getSelection();n.removeAllRanges(),n.addRange(t)}function Ct(n,i){void 0===i&&(i={});var o=this;if(!n)return o;if(n[gt])return n[gt];if(!r(o,Ct))return new Ct(n,i);var s=vt(o),a=s.fire;function c(){return[x(u()),o.options]}function u(){if(ee){for(var e=[],t=0,r=p(ie);t<r;++t)d(ie[t])&&e.push(f(ie[t]));return e}var i=n.value;return""!==i?i:null}function f(e){var t=e.value||V(e);return""!==t?t:null}function d(e){return G(e,"selected")}function v(e){ne(e,"selected"),e.selected=!1}function y(e){re(e,$+"selected")}function k(e){le(e,"selected",!0),e.selected=!0}function b(e){fe(e,$+"selected")}function w(e){e=e||Ht,xe.title=e.replace(/<.*?>/g,""),ge(xe,e)}function E(e){if(ee)for(var t,r=l(t),i=0,o=p(ie);i<o;++i)t=f(ie[i]),r.includes(x(t))?k(ie[i]):v(ie[i]);else n.value=e}s.hooks,o.state=i=A({},Ct.state,i),o.options={},o.source=n,Ct.instances[n.id||n.name||m(Ct.instances)]=o,n[gt]=o;var S=i.class,_=S+"__",P=S+"--",C=_+"input",D=_+"option",$=D+"--",j=_+"options",F=_+"value",X=_+"values",U=ve(n,{class:_+"source",tabindex:-1}),W="input"===N(U)?ve("span","",{class:C}):null,B=W?n.placeholder:"",q=ve("span",B),Y=ve("span","",{contenteditable:"",tabindex:0}),Q=function(){return U.disabled},Z=O(U),ee=U.multiple,te=0,ie=U.options,oe=i.parent||H,ae="input"===N(U)?0:U.size,he=U.title,pe=u(),ye=ve("div",{class:S,tabindex:!W&&!Q()&&0,title:he}),xe=ve("div",Ht,{class:X}),Se=U.list,_e=0,Ae=0,He=ve("div",{class:j,tabindex:-1}),Ke=[],$e=!1,Oe=!1;function je(){re(ye,P+"focus"),a("blur",c())}function Re(){fe(ye,P+"focus"),a("focus",c())}function Fe(){fe(ye,P+"open"),a("enter",c())}function Xe(){ee||ae||(re(ye,P+"open"),a("exit",c()))}function Ue(){_e=g(z(ye,"border-bottom-width")),Ae=g(z(ye,"border-top-width")),at(ye)}function Ie(e){Ee(ye,P+"open",e);var t=We();return a(t?"enter":"exit",c()),t}function Ne(e,t,n,r){return ve("span",e,{class:F+" "+r,"data-index":t,"data-value":n}).outerHTML}function We(){return J(ye,P+"open")}function Me(){(W?Y:ye).focus()}function Be(e){if(ie&&!Q()){var t,n,r,o=[],s=this,l=s[yt],u=pe;if(te=s[mt],pe=s[kt],e&&e.isTrusted&&Me(),Te(e),ee&&($e||Oe)){!function(e){return J(e,$+"selected")}(s)?(k(l),b(s)):(v(l),y(s));for(var f,h=0,g=p(ie);h<g;++h)d(ie[h])&&(t=V(f=Ke[h]),n=f[mt],r=f[kt],o.push(Ne(t,n,r,R(f,!1))));return w(o.join("<span>"+i.join+"</span>")),void a("change",c())}t=V(s),n=s[mt],r=s[kt],t&&W&&(ge(q,Ht),we(Y,t)),w(Ne(t,n,r,R(s,!1))),W&&(Lt(Y),E(t)),Ke.forEach((function(e){pe===e[kt]?(k(e[yt]),b(e)):(v(e[yt]),y(e))})),pe!==u&&a("change",c())}}function qe(e){je()}function ze(e){if(!Q()){if(te=U.selectedIndex,ae)return Fe();W?Y.focus():Ie()&&Ue()}}function Ye(e){te=U.selectedIndex,Re()}function Ve(e){if(ie){$e=e.ctrlKey,Oe=e.shiftKey;var t=e.key,n=te,r=Ke[n],i=function(e){return J(e,$+"disabled")},o=function(e){return Be.call(e)},s=We();if(bt===t){for(;(r=Ke[++n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),Te(e)}else if(xt===t){for(;(r=Ke[--n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),Te(e)}else if(St===t){for(n=p(ie);(r=Ke[--n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),Te(e)}else if(_t===t)r&&o(r),Ie(),Te(e);else if(At===t)!ae&&Xe();else if(Pt===t){for(n=-1;(r=Ke[++n])&&(i(r)||r.hidden););r&&(o(r),Ie(s)),Te(e)}else Tt===t&&(!W&&r&&o(r),!ae&&Xe());We()&&!$e&&!Oe&&Ue()}}function Ge(){$e=Oe=!1}function Je(){var e=V(Y);null!==e&&E(T(e)),je()}function Qe(){if(ie){var e,t,n=V(this);te=-1,Lt(this);for(var r=0,i=p(ie);r<i;++r)e=ie[r],t=Ke[r],n===V(e)?(te=r,k(e),b(t)):(v(e),y(t));Re(),Ie()&&Ue()}}ee&&!ae&&(U.size=ae=i.size),W&&Se&&(Z=O(Se),ie=Se.options,ae=null,pe&&(ge(q,Ht),we(Y,pe))),W&&(ue(W,Y),ue(W,q)),ue(ye,W||xe),me(U,ye);var Ze=ct((function(t,n,r){var i,o,s=V(t);if(null===s){ge(q,B),He.hidden=!1;for(var a=0,c=p(Ke);a<c;++a)ge(o=Ke[a],V(o)),o.hidden=!1}else if(ge(q,Ht),r!==(s=h(s))&&bt!==n&&wt!==n&&Et!==n&&xt!==n&&_t!==n){for(var l,u=0,f=p(Ke);u<f;++u)v((o=Ke[u])[yt]),y(o),(l=V(o))&&h(l).includes(s)?(!i&&(i=o),ge(o,l.replace(RegExp(s.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(function(e){return"<mark>"+e+"</mark>"}))),o.hidden=!1):(ge(o,l),o.hidden=!0);i?(te=i[mt],k(i[yt]),b(i),He.hidden=!1):He.hidden=!0,r=s}else{for(var d,g=0,m=0,w=p(Ke);m<w;++m)o=Ke[m],d=I(o),e("</mark>",d)&&++g;if(g<=1)for(var E,x=0,S=p(Ke);x<S;++x)o=Ke[x],E=V(o),ge(o,E),o.hidden=!1}_t!==n&&At!==n&&Tt!==n&&(Fe(),Ue())}),1);function et(e){var t=this,n=e.key;Ve(e),Ze(t,n,V(t))}function tt(){Ge()}var nt=lt((function(e,t){var n=V(e);ge(t,null!==n?Ht:B),we(e,n),Lt(e)}),1);function rt(){nt(Y,q)}function it(e){var t=e.target;if(t!==ye)for(;(t=M(t))&&ye!==t;);ye!==t&&Xe()}function ot(){We()&&at(ye,1)}function st(n,r){if("optgroup"!==N(n)){var i=K(n,"value",!1),s=i,a=V(n),c=n.title,l=ve("a",a,{class:D,title:c||a});i=i||a,l[mt]=te,l[yt]=n,l[kt]=i,de(l,{index:te,value:s}),o.options[i]=a,n.disabled?fe(l,$+"disabled"):Ce("click",l,Be),ue(r,l),Ke.push(l),""===s&&(i=null),t(pe)&&e(i,pe)||i===pe?(fe(l,$+"selected"),w(Ne(a,te,s,R(l,!1))),k(n)):v(n),++te}else{var u=ve("span",{class:D+"-group"+(n.disabled?" "+$+"disabled":"")}),f=O(n);u.title=n.label;for(var h=0,d=p(f);h<d;++h)st(f[h],u);ue(r,u)}}function at(e,t){if(!ae){var n=ft(e),r=n[0],i=n[1],o=n[2],s=n[3],l=ht(L)[1],u=l-i-s;be(He,{bottom:"",left:r,"max-height":u,top:i+s-Ae,width:o}),u<(l-s)/2?(be(He,{top:"",bottom:l-i-_e,"max-height":(u=i)+Ae}),re(e,P+"down"),fe(e,P+"up")):(re(e,P+"up"),fe(e,P+"down"))}if(!t){var f=Ke.find((function(e){return J(e,$+"selected")}));if(f){var h=ht(f)[1],d=ht(He)[1],p=ut(f),v=p[0],g=p[1],m=dt(He)[1];g<m?pt(He,[v,g]):g+h-d>m&&pt(He,[v,g+h-d])}}a("fit",c())}De(["resize","scroll"],L,ot),Ce("click",oe,it),Ce("focus",U,Me),Ce("click",ye,ze),W?(Ce("blur",Y,Je),Ce("focus",Y,Qe),Ce("keydown",Y,et),Ce("keyup",Y,tt),Ce("paste",Y,rt)):(Ce("blur",ye,qe),Ce("focus",ye,Ye),Ce("keydown",ye,Ve),Ce("keyup",ye,Ge));var Dt=p(Z);if(Dt){ue(ye,He);for(var Kt=0;Kt<Dt;++Kt)st(Z[Kt],He);if(ae){var $t=Ke[0],Ot=ht($t)[1]*ae;ke(He,"max-height",Ot)}}return ae&&(fe(ye,P+"down"),fe(ye,P+"open")),o.get=function(e){void 0===e&&(e=!0);var t=u();return e?x(t):t},o.pop=function(){return n[gt]?(delete n[gt],Le(["resize","scroll"],L,ot),Pe("click",oe,it),Pe("focus",U,Me),re(U,_+"source"),Pe("click",ye,ze),W?(Pe("blur",Y,Je),Pe("focus",Y,Qe),Pe("keydown",Y,et),Pe("keyup",Y,tt),Pe("paste",Y,rt)):(Pe("blur",ye,qe),Pe("focus",ye,Ye),Pe("keydown",ye,Ve),Pe("keyup",ye,Ge)),ce(ye),se(ye),a("pop",c())):o},o.set=function(e){return ie?(E(T(e)),Ke.forEach((function(e,t){var n=ie[t];Ee(e,$+"selected",n&&d(n))})),a("change",c()),o):o},o.self=ye,o}function Dt(e){for(var t in Ct.instances)Ct.instances[t].pop(),delete Ct.instances[t];var n=U('.input[list]:not([type="hidden"]),.select');n&&p(n)&&n.forEach((function(e){var t;re(e,"input"),re(e,"select");var n=R(e),r=new Ct(e,null!=(t=F(e,"state"))?t:{});he(r.self,n)})),1===e&&L._.on("change",Dt)}Ct.instances={},Ct.state={class:"option-picker",join:", ",parent:null,size:5},Ct.version="1.3.10",L.OP=Ct;var Kt=function(e,t){return void 0===t&&(t=""),e.replace($t("["+t+Ot.replace(/./g,"\\$&")+"]"),"\\$&")},$t=function(e,t){return function(e){return r(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,a(t)?t:"g"))},Ot="!$^*()+=[]{}|:<>,.?/-",jt="TP",Rt="a",Ft="ArrowLeft",Xt="ArrowRight",Ut="Home",It="Backspace",Nt="Delete",Wt="End",Mt="Enter",Bt="Tab";function qt(n,i){void 0===i&&(i={});var s=this;if(!n)return s;if(n[jt])return n[jt];if(!r(s,qt))return new qt(n,i);var a=function(){return n.disabled},l=function(){return n.readOnly},f=K(n,"placeholder"),d=K(n,"tabindex"),v=vt(s);v.hooks;var g=v.fire;s.state=i=A({},qt.state,c(i)?{join:i}:i||{}),s.source=n,qt.instances[n.id||n.name||m(qt.instances)]=s,n[jt]=s;var k,b,w,E=i.class,x=E+"__",S=E+"--",_=B(n),P=ve("div",{class:E,tabindex:!a()&&-1}),T=ve("span",{class:x+"tag "+x+"input"}),C=ve("input",{class:x+"copy",tabindex:-1,type:"text"}),D=ve("span",{contenteditable:!a()&&"true",spellcheck:"false",style:"white-space:pre;"}),j=ve("span"),R=ve("span",{class:x+"tags"}),F=0,X={};function U(e,t){var n=u(e,s.tags);return t&&g("get.tag",[e,n]),o(n)?e:null}function I(){X={};var e,t=O(R),n=p(t)-1;for(e=0;e<n;++e)J(t[e],x+"tag--selected")&&(X[e]=t[e])}function N(e,t){o(t)?(t=t<0?0:t,s.tags.splice(t,0,e)):s.tags.push(e),n.value=s.tags.join(i.join)}function z(e,t){var n=ve("span",{class:x+"tag",tabindex:!a()&&!l()&&0,title:e}),r=ve("a",{class:x+"tag-x",href:"",tabindex:-1,target:"_top"});Ce("click",r,_e),ue(n,r),Ce("click",n,Se),De(["blur","focus"],n,ke),Q(R)&&(o(t)&&s.tags[t]?ye(O(R,t),n):ye(T,n))}function Y(t){if(t=t?t.split(i.join):[],Q(P))for(var r,o,a;r=q(T);)Z(a=r.title),e(a,t)||(o=u(a,s.tags),g("change",[a,o]),g("let.tag",[a,o]));s.tags=[],n.value="";for(var c,l=0,f=i.max;l<f&&t[l];++l)""!==(c=de(t[l]))&&(z(c),N(c),g("change",[c,l]),g("set.tag",[c,l]))}function G(e){var t=u(e,s.tags);o(t)&&t>=0&&(s.tags.splice(t,1),n.value=s.tags.join(i.join))}function Z(e){var t,n=u(e,s.tags);if(o(n)&&n>=0&&(t=O(R,n))){Pe("click",t,Se),Le(["blur","focus"],t,ke);var r=$(t);r&&(Pe("click",r,_e),se(r)),se(t)}}function ee(e){se(C),ne("",1)}function te(e){ue(P,C),C.value=s.tags.join(i.join),C.focus(),C.select()}function ne(e,t){if(we(D,e),we(j,e?"":f),t){D.focus();var n=H.createRange(),r=L.getSelection();n.selectNodeContents(D),n.collapse(!1),r.removeAllRanges(),r.addRange(n)}}function oe(e){le(e,(function(){re(this,x+"tag--selected")}))}function ae(e){le(e,(function(){fe(this,x+"tag--selected")}))}function ce(){if(!a()&&!l()){var e=pe(V(D)).trim(),t=i.pattern;if(t&&e&&!$t(t,"").test(e))return g("not.tag",[e,-1]),void ne(e,1);if(ne(""),e=de(e))if(U(e))g("has.tag",[e,u(e,s.tags)]);else{z(e),N(e);var n=p(s.tags);g("change",[e,n]),g("set.tag",[e,n])}}}function le(e,t){var n,r=O(R),i=p(r)-1;for(n=0;n<i;++n)e!==r[n]&&t.call(r[n],n)}function de(e){return pe(s.f(e)).trim()}function pe(e){return e=e||"",i.escape.forEach((function(t){e=e.split(t).join("")})),e}function ge(e){"blur"===e.type?(oe(),ie(P,[S+"focus",S+"focus-self"])):he(P,[S+"focus",S+"focus-self"])}function ke(e){if(!l()){X={};var t=this,n=e.type,r=t.title,i=s.tags,o=u(r,i),a=x+"tag--";"blur"===n?(!k&&!b||b&&w)&&(oe(t),re(t,a+"selected"),ie(P,[S+"focus",S+"focus-tag"])):(fe(t,a+"selected"),he(P,[S+"focus",S+"focus-tag"]),F=o,X[o]=t),g(n+".tag",[r,o])}}function be(e){var t=s.tags,n=e.type,r=x+"text--";re(P,S+"focus-tag"),"blur"===n?(re(T,r+"focus"),ie(P,[S+"focus",S+"focus-input"]),ce()):(fe(T,r+"focus"),he(P,[S+"focus",S+"focus-input"]),oe(T)),g(n,[t,p(t)])}function Ee(e){"blur"===e.type?re(P,S+"focus"):fe(P,S+"focus")}function xe(e){e&&P===e.target&&D.focus();var t=s.tags;g("click",[t,p(t)])}function Se(){var e=this.title,t=s.tags;g("click.tag",[e,u(e,t)])}function _e(e){if(!a()&&!l()){var t=M(this).title,n=u(t,s.tags);Z(t),G(t),ne("",1),g("change",[t,n]),g("click.tag",[t,n]),g("let.tag",[t,n])}Te(e)}function Ae(e){var t=e.type;"copy"===t?lt((function(){return ee()}),1)():"cut"===t?(!l()&&Y(""),lt((function(){return ee()}),1)()):"paste"===t&&lt((function(){!l()&&Y(C.value),ee()}),1)(),lt((function(){var e=s.tags;g(t,[e,p(e)])}),1)()}function Ke(){oe(),re(P,S+"focus-self")}function $e(){D.focus()}function Oe(e){if(!a()&&!l()){s.tags;var t,n,r,i,o,c,u=e.key,f=k=e.ctrlKey,h=b=e.shiftKey,d=x+"tag--";if(w=Bt===u,!f){if(!h&&(It===u||Nt===u)){I(),c=X;var v=It===u;for(n in c)Z(o=(t=c[n]).title),G(o);return F=+(y(c)[0]||0),(t=O(R,v?F-1:F))?T===t?ne("",1):t.focus():ne("",1),void Te(e)}if(Ut===u)return void((t=O(R,0))&&(t.focus(),Te(e)));if(Wt===u&&(t=O(R,p(s.tags)-1)))return t.focus(),void Te(e);if(Ft===u){if(t=O(R,F-1)){var g=J(t,d+"selected");return t.focus(),Te(e),h?(r=W(t),void(g&&re(r,d+"selected"))):void oe(t)}if(!h)return void oe(O(R,0))}if(Xt===u&&(t=O(R,F+1))){var m=J(t,d+"selected");return T!==t||h?t.focus():ne("",1),Te(e),h?(i=q(t),void(m&&re(i,d+"selected"))):void oe(t)}}Rt===u&&(te(),ae(),I(),Te(e))}}function je(t){He(t),l()&&Bt!==t.key&&Te(t);var n,r=i.escape,o=q(T),a=p(s.tags),c=i.max,u=V(D)||"",h=t.key,d=k=t.ctrlKey,v=Mt===h;b=t.shiftKey;var m=w=Bt===h;if(v&&(h="\n"),m&&(h="\t"),lt((function(){u=V(D)||"",we(j,u?"":f),e(function(e){var t,n=L.getSelection();if(n.rangeCount>0)return(t=n.getRangeAt(0).cloneRange()).collapse(!0),t.setStart(e,0),(t+"").slice(-1)}(D),r)&&(a<c?ce():(ne(""),g("max.tags",[c])),Te(t))}),1)(),""===u&&Ut===h&&(n=O(R,0)))return n.focus(),void Te(t);if(""===u&&Wt===h&&(n=O(R,p(s.tags)-1)))return n.focus(),void Te(t);if(d&&""===u&&Rt===h)return te(),ae(),I(),void Te(t);if(e(h,r))return a<c?ce():(ne(""),g("max.tags",[c])),void Te(t);if(!m){if(!d&&v)return Xe()&&_&&_.dispatchEvent(new Event("submit",{cancelable:!0})),void Te(t);if(o&&""===u&&!l()){if(It===h)return Z(n=s.tags[a-1]),G(n),g("change",[n,a-1]),g("let.tag",[n,a-1]),void Te(t);if(Ft===h)return void o.focus()}}}function Re(){k=b=!1}function Fe(){lt((function(){a()||l()||V(D).split(i.join).forEach((function(t){e(t,s.tags)||(z(t),N(t))})),ne("")}),1)()}function Xe(e){if(!a()){var t=i.min;return ce(),t>0&&p(s.tags)<t?(ne("",1),g("min.tags",[t]),void Te(e)):1}}return ne(""),ue(P,R),ue(T,D),ue(T,j),ue(R,T),fe(n,x+"source"),me(n,P),ve(n,{tabindex:-1}),Ce("blur",P,Ke),Ce("click",P,xe),Ce("focus",n,$e),Ce("keydown",P,Oe),Ce("keydown",D,je),Ce("keyup",P,Re),Ce("paste",D,Fe),De(["blur","focus"],P,Ee),De(["blur","focus"],C,ge),De(["blur","focus"],D,be),De(["copy","cut","paste"],C,Ae),_&&Ce("submit",_,Xe),s.blur=function(){return!a()&&D.blur(),s},s.click=function(){return P.click(),xe(),s},s.f=function(e){return h(e||"").replace(/[^ a-z\d-]/g,"").trim()},s.focus=function(){return a()||ne(V(D),1),s},s.get=function(e){return a()?null:U(e,1)},s.input=D,s.let=function(e){if(!a()&&!l()){var n=i.min;if(e)if(t(e))e.forEach((function(e){if(n>0&&p(s.tags)<n)return g("min.tags",[n]),s;Z(e),G(e)}));else{if(n>0&&p(s.tags)<n)return g("min.tags",[n]),s;Z(e),G(e)}else Y("")}return s},s.pop=function(){if(!n[jt])return s;delete n[jt];var e=s.tags;return re(n,x+"source"),Pe("blur",P,Ke),Pe("click",P,xe),Pe("focus",n,$e),Pe("keydown",P,Oe),Pe("keydown",D,je),Pe("keyup",P,Re),Pe("paste",D,Fe),Le(["blur","focus"],P,Ee),Le(["blur","focus"],C,ge),Le(["blur","focus"],D,be),Le(["copy","cut","paste"],C,Ae),_&&Pe("submit",_,Xe),e.forEach(Z),ve(n,{tabindex:d}),se(P),g("pop",[e])},s.self=P,s.set=function(e,n){if(!e)return s;if(!a()&&!l())if(t(e))Y(e.join(i.join));else{var r=s.tags,o=i.max;U(e)?g("has.tag",[e,u(e,r)]):p(r)<o?(z(e,n),N(e,n)):g("max.tags",[o])}return s},s.source=s.output=n,s.state=i,s.tags=[],Y(n.value),s}function zt(e){for(var t in qt.instances)qt.instances[t].pop(),delete qt.instances[t];var n=U('.lot\\:field.type\\:query .input:not([type="hidden"])');n&&p(n)&&n.forEach((function(e){var t;re(e,"input");var n=R(e),r=new qt(e,null!=(t=F(e,"state"))?t:{});he(r.self,n)})),1===e&&L._.on("change",zt)}qt.instances={},qt.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null},qt.version="3.4.18",L.TP=qt;var Yt,Vt={blur:0,click:0,copy:0,cut:0,focus:0,input:0,keydown:"key.down",keyup:"key.up",mousedown:"mouse.down",mouseenter:"mouse.enter",mouseleave:"mouse.exit",mousemove:"mouse.move",mouseup:"mouse.up",paste:0,scroll:0,touchend:"mouse.up",touchmove:"mouse.move",touchstart:"mouse.down",wheel:"scroll"};function Gt(e){return e.disabled}function Jt(e){return e.readOnly}function Qt(e){return e.value.replace(/\r/g,"")}function Zt(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function en(e,t){var n=this;return e?r(n,en)?(e["_"+en.name]=vt(n,en.prototype),n.attach(e,A({},en.state,i(t)||c(t)?{tab:t}:t||{}))):new en(e,t):n}function tn(e){var t=this["_"+en.name],n=e.type,r=Qt(this);r!==Yt&&(Yt=r,t.fire("change",[e])),t.fire(Vt[n]||n,[e])}en.esc=Kt,en.state={tab:"\t",with:[]},en.S=function(e,t,n){var r=this,i=n.slice(e,t);r.after=n.slice(t),r.before=n.slice(0,e),r.end=t,r.length=p(i),r.start=e,r.value=i,r.toString=function(){return i}},en.version="4.1.3",en.x=Ot,Object.defineProperty(en,"name",{value:"TextEditor"});var nn=en.prototype;function rn(){var e=this,t=e.constructor.prototype;return e._history=[],e._historyState=-1,!n(t.history)&&(t.history=function(e){var t=this._active,n=this._history;return!!t&&(a(e)?a(n[e])?n[e]:null:n)}),!n(t.loss)&&(t.loss=function(e){var t,n=this,r=n._active;n._history;var i=n._historyState;return!!r&&(!0===e?(n._history=[],n._historyState=-1,null):(t=n._history.splice(a(e)?e:i,1),n._historyState=v(i-1,[-1]),t))}),!n(t.record)&&(t.record=function(e){var t,n,r=this,i=r.$(),o=i.end,s=i.start,c=r._active,l=r._history,u=r._historyState;return c?(t=l[u]||[],(n=[r.get(),[s,o],Date.now()])[0]===t[0]&&n[1][0]===t[1][0]&&n[1][1]===t[1][1]||(++u,r._history[a(e)?e:u]=n,r._historyState=u),r):r}),!n(t.redo)&&(t.redo=function(){var e,t=this,n=t._active,r=t._history,i=t._historyState;return n&&(e=r[t._historyState=v(i+1,[0,p(r)-1])])?t.set(e[0]).select(e[1][0],e[1][1]):t}),!n(t.undo)&&(t.undo=function(){var e,t=this,n=t._active,r=t._history,i=t._historyState;return n&&(e=r[t._historyState=v(i-1,[0,p(r)-1])])?t.set(e[0]).select(e[1][0],e[1][1]):t}),e}function on(e){var t=this;return t.commands={},t.key=null,t.keys={},t.queue={},t.self=e||t,t}nn.$=function(){var e=this.self;return new en.S(e.selectionStart,e.selectionEnd,Qt(e))},nn.attach=function(e,r){var i=this;for(var o in e=e||i.self,r=r||i.state,i._active=!0,i._value=Qt(e),i.self=e,i.state=r,Vt)Ce(o,e,tn);if(a(r)&&t(r.with))for(var l=0,u=p(r.with);l<u;++l){var f=r.with[l];c(f)&&(f=en[f]),n(f)?f.call(i,e,r):s(f)&&n(f.attach)&&f.attach.call(i,e,r)}return i},nn.blur=function(){var e=this,t=e._active,n=e.self;return t?(n.blur(),e):e},nn.detach=function(){var e=this,r=e.self,i=e.state;for(var o in e._active=!1,Vt)Pe(o,r,tn);if(t(i.with))for(var a=0,l=p(i.with);a<l;++a){var u=i.with[a];c(u)&&(u=en[u]),s(u)&&n(u.detach)&&u.detach.call(e,r,i)}return e},nn.focus=function(e){var t,n,r=this,i=r._active,o=r.self;return i?(-1===e?t=n=0:1===e&&(t=p(Qt(o)),n=o.scrollHeight),a(t)&&a(n)&&(o.selectionStart=o.selectionEnd=t,o.scrollTop=n),o.focus(),r):r},nn.get=function(){var e=this._active,t=this.self;return!!e&&(!Gt(t)&&Qt(t)||null)},nn.insert=function(e,t,n){var r=this,i=/^[\s\S]*?$/;return r._active?(n&&r.replace(i,""),-1===t?i=/$/:1===t&&(i=/^/),r.replace(i,e,t)):r},nn.let=function(){var e=this,t=e._active,n=e.self;return t?(n.value=e._value,e):e},nn.match=function(e,r){var i=this,o=i.$(),s=o.after,a=o.before,c=o.value;if(t(e)){var l=[a.match(e[0]),c.match(e[1]),s.match(e[2])];return n(r)?r.call(i,l[0]||[],l[1]||[],l[2]||[]):[!!l[0],!!l[1],!!l[2]]}var u=c.match(e);return n(r)?r.call(i,u||[]):!!u},nn.peel=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value;e=Kt(e),t=Kt(t);var c=$t(e+"$",""),l=$t("^"+t,"");return n?r.replace($t("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):c.test(s)&&l.test(o)?(s=s.replace(c,""),o=o.replace(l,""),r.set(s+a+o).select(s=p(s),s+p(a))):r.select()},nn.pull=function(e,t){void 0===t&&(t=!0);var n=this,r=n.state,o=n.$(),s=o.before,c=o.end,l=o.length,u=o.start,f=o.value;return i(e=a(e)?e:r.tab)&&(e=" ".repeat(e)),""!==s&&"\n"!==s.slice(-1)&&e!==s.slice(-p(e))&&n.select(u-=p(s.split("\n").pop()),l?c:u),e=Kt(e),l?t?n.replace($t("^"+e,"gm"),""):n.insert(f.split("\n").map((function(t){return $t("^("+e+")*$","").test(t)?t:t.replace($t("^"+e,""),"")})).join("\n")):n.replace($t(e+"$",""),"",-1)},nn.push=function(e,t){void 0===t&&(t=!1);var n=this,r=n.state,o=n.$(),s=o.before,c=o.end,l=o.length,u=o.start;return i(e=a(e)?e:r.tab)&&(e=" ".repeat(e)),""!==s&&"\n"!==s.slice(-1)&&e!==s.slice(-p(e))&&n.select(u-=p(s.split("\n").pop()),l?c:u),l?n.replace($t("^"+(t?"":"(?!$)"),"gm"),e):n.insert(e,-1)},nn.replace=function(e,t,n){var r=this.$(),i=r.after,o=r.before,s=r.value;return-1===n?o=o.replace(e,t):1===n?i=i.replace(e,t):s=s.replace(e,t),this.set(o+s+i).select(o=p(o),o+p(s))},nn.select=function(){var e=this,t=e._active,n=e.self;if(!t)return e;if(Gt(n)||Jt(n))return n.focus(),e;for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var s,a,c,l,u=p(i),f=e.$(),h=f.start,d=f.end;if(s=L.pageXOffset||D.scrollLeft||C.scrollLeft,a=L.pageYOffset||D.scrollTop||C.scrollTop,c=n.scrollLeft,l=n.scrollTop,0===u)i[0]=h,i[1]=d;else if(1===u){if(!0===i[0])return n.focus(),n.select(),e;i[1]=i[0]}return n.focus(),n.selectionStart=i[0],n.selectionEnd=i[1],n.scrollLeft=c,n.scrollTop=l,L.scroll(s,a),e},nn.set=function(e){var t=this,n=t._active,r=t.self;return n?(Gt(r)||Jt(r)||(r.value=e),t):t},nn.trim=function(e,t,n,r,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==r&&!1!==r&&(r=r||"");var o=this.$(),s=o.after,a=o.before,c=o.value,l=Zt(s,-1),u=Zt(a,1);return s=!1!==t?(l||!i?t:"")+Zt(s,-1):s,a=!1!==e?Zt(a,1)+(u||!i?e:""):a,!1!==r&&(c=Zt(c,1)),!1!==n&&(c=Zt(c,-1)),this.set(a+c+s).select(a=p(a),a+p(c))},nn.wrap=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value;return n?r.replace(/^[\s\S]*?$/,e+"$&"+t):r.set(s+e+a+t+o).select(s=p(s+e),s+p(a))},Object.defineProperty(nn,"value",{get:function(){return this.self.value},set:function(e){this.self.value=e}}),Object.defineProperty(rn,"name",{value:"TextEditor.History"});var sn=on.prototype;sn.command=function(e){var t=this;if(c(e))return e===t.toString();var n=t.keys[t.toString()];return!!a(n)&&n},sn.fire=function(e){var r,i,o=this,s=o.self||o;if(n(e))r=e.call(s),i=!0;else if(c(e)&&(e=o.commands[e]))r=e.call(s),i=!0;else if(t(e)){var l=e[1]||[];(e=o.commands[e[0]])&&(r=e.apply(s,l),i=!0)}return i?!a(r)||r:null},sn.pull=function(e){var t=this;return t.key=null,a(e)?(delete t.queue[e],t):(t.queue={},t)},sn.push=function(e){var t=this;return t.queue[t.key=e]=1,t},sn.toString=function(){return y(this.queue).join("-")},Object.defineProperty(on,"name",{value:"Key"});var an=ct((function(e){return e.pull()}),1e3),cn="_Key";function ln(e){this._event=e,this[cn].pull()}function un(e){ln.call(this,e)}function fn(e){var t,n,r=this[cn];r.push(e.key),this._event=e,(t=r.command())&&(!1===(n=r.fire(t))?(Te(e),He(e)):null===n&&console.warn("Unknown command: `"+t+"`")),an(r)}function hn(e){this._event=e,this[cn].pull(e.key)}var dn={attach:function(){var e=this,t=e.constructor.prototype,r=new on(e);return e.commands=A(e.commands=r.commands,e.state.commands||{}),e.keys=A(e.keys=r.keys,e.state.keys||{}),!n(t.command)&&(t.command=function(e,t){return this.commands[e]=t,this}),!n(t.k)&&(t.k=function(e){var t,n=this[cn]+"";return a(e)&&"-"!==e&&(t=""!==n?n.split(/-(?!$)/):[],!1!==e)?t.join(e):!1===e?"-"===n?[n]:t:n}),!n(t.key)&&(t.key=function(e,t){return this.keys[e]=t,this}),e.on("blur",ln),e.on("input",un),e.on("key.down",fn),e.on("key.up",hn),e[cn]=r,e},detach:function(){var e=this;return e[cn].pull(),e.off("blur",ln),e.off("input",un),e.off("key.down",fn),e.off("key.up",hn),delete e[cn],e},name:"TextEditor.Key"},pn="Alt-",vn="Control-",gn="Shift-",mn=ct((function(e){return e.record()}),10);function yn(t){var n=this,r=n.k(!1).pop(),o=n.k();if(mn(n),!t.defaultPrevented&&!n.keys[o]){var s,a,c=n.state.tab||"\t",l=n.state.pairs||{},u=k(l);i(c)&&(c=" ".repeat(c));var f=n.$(),h=f.after,d=f.before,v=f.end,g=f.start,m=f.value,y=h.split("\n").shift(),b=d.split("\n").pop(),w=/^\s+/.exec(b),E=w&&w[0]||"";if(vn+gn+"Enter"===o)return d||h?(Te(t),n.select(g-p(b)).wrap(E,"\n").insert(m).record(),!1):void 0;if(vn+"Enter"===o&&(d||h))return Te(t),n.select(v+p(y)).wrap("\n"+E,"").insert(m).record(),!1;if(pn!==o+"-"&&vn!==o+"-"){if(" "===o)return s=l[a=d.slice(-1)],!m&&s&&a&&s===h[0]?(Te(t),n.wrap(" "," ")):void 0;if("Backspace"===o||"Delete"===o){if(s=l[a=d.slice(-1)],"\\"===a)return;return m?h&&d&&s&&s===h[0]&&!d.endsWith("\\"+a)?(Te(t),n.record().peel(a,s).record()):void 0:(s=l[a=d.trim().slice(-1)])&&a&&(h.startsWith(" "+s)&&d.endsWith(a+" ")||h.startsWith("\n"+E+s)&&d.endsWith(a+"\n"+E))?(Te(t),n.trim("","").record()):"Delete"!==o&&b.endsWith(c)?(Te(t),n.pull(c).record()):h&&d&&!d.endsWith("\\"+a)&&s===h[0]&&a===d.slice(-1)?(Te(t),n.peel(a,s).record()):void 0}if("Enter"!==o&&gn+"Enter"!==o){if("\\"!==(a=d.slice(-1))){if(s=e(h[0],u)?h[0]:l[a],!m&&h&&d&&s&&r===s)return Te(t),n.select(g+1).record();for(a in l){if(s=l[a],r===a&&s)return Te(t),n.wrap(a,s).record();if(r===s){if(m)return Te(t),n.record().wrap(a,s).record();break}}var x,S,_,A=[];if(m){for(x in l)(S=l[x])&&A.push("(?:\\"+x+"(?:\\\\.|[^\\"+x+(S!==x?"\\"+S:"")+"])*\\"+S+")");if(A.push("\\w+"),A.push("\\s+"),A.push("[\\s\\S]"),vn+"ArrowLeft"===o)return Te(t),(_=$t("("+A.join("|")+")$","").exec(d))?n.insert("").select(g-p(_[0])).insert(m).record():n.select();if(vn+"ArrowRight"===o)return Te(t),(_=h.match($t("^("+A.join("|")+")","")))?n.insert("").select(v+p(_[0])-p(m)).insert(m).record():n.select()}if(v+=p(y),g-=p(b),m=b+m+y,vn+"ArrowUp"===o){if(Te(t),!e("\n",d))return n.select();n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"$2",1),n.replace(/(^|\n)([^\n]*?)$/,"",-1);var P=n.$();return d=P.before,g=P.start,b=d.split("\n").pop(),n.select(g-=p(b)).wrap(m,"\n"),n.select(g,g+p(m)),n.record()}if(vn+"ArrowDown"===o){if(Te(t),!e("\n",h))return n.select();n.insert(""),n.replace(/^([^\n]*?)(\n|$)/,"",1),n.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var T=n.$();return h=T.after,v=T.end,y=h.split("\n").shift(),n.select(v+=p(y)).wrap("\n",m),v+=1,n.select(v,v+p(m)),n.record()}}}else if(!m){if(h&&d&&(s=l[a=d.slice(-1)])&&s===h[0])return Te(t),n.wrap("\n"+E+(a!==s?c:""),"\n"+E).record();if(E)return Te(t),n.insert("\n"+E,-1).record()}}else Te(t)}}var kn={attach:function(){var e=this,t=e.constructor.prototype;return e.state=A({pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"}},e.state),!n(t.alert)&&(t.alert=function(e,t){return L.alert&&L.alert(e),n(t)&&t.call(this,!0)}),!n(t.confirm)&&(t.confirm=function(e,t){return n(t)&&t.call(this,L.confirm&&L.confirm(e))}),!n(t.insertBlock)&&(t.insertBlock=function(e,t){var n=this,r=n.$(),i=r.after,o=r.before,s=r.end,a=r.start,c=i.split("\n").shift(),l=p(c),u=o.split("\n").pop(),f=p(u),h=/^\s+/.exec(u),d=h&&h[0]||"";return-1===t?n.select(a-f).insert("\n",1).push(d).insert(e,1,!1):1===t?n.select(s+l).insert("\n",-1).push(d).insert(e,1,!1):n.select(a-f,s+l).insert(e,t,!0).wrap(d,"")}),!n(t.peelBlock)&&(t.peelBlock=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.end,c=i.start,l=i.value,u=p(t),f=o.split("\n").shift(),h=p(f),d=s.split("\n").pop(),v=p(d),g=p(e);return n&&t===l.slice(-u)&&e===l.slice(0,g)||t===f.slice(-u)&&e===d.slice(0,g)?r.select(c-v+(n?0:g),a+h-(n?0:u)).peel(e,t,n):r.select(c,a)}),!n(t.prompt)&&(t.prompt=function(e,t,r){return n(r)&&r.call(this,!!L.prompt&&L.prompt(e,t))}),!n(t.selectBlock)&&(t.selectBlock=function(e){void 0===e&&(e=!0);var t=this,n=t.$(),r=n.after,i=n.before,o=n.end,s=n.start,a=n.value,c=r.split("\n").shift(),l=p(c),u=i.split("\n").pop(),f=p(u);if(!e){var h=/\s+$/.exec(c),d=/^\s+/.exec(u);h&&(l-=p(h[0])),d&&(f-=p(d[0]))}if(t.select(s-f,o+l),!e){var v,g=t.$();if(o=g.end,s=g.start,a=g.value,v=/^(\s+)?[\s\S]+?(\s+)?$/.exec(a))return t.select(s+p(v[1]||""),o-p(v[2]||""))}return t}),!n(t.toggle)&&(t.toggle=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value,c=p(t),l=p(e);return n&&t===a.slice(-c)&&e===a.slice(0,l)||t===o.slice(0,c)&&e===s.slice(-l)?r.peel(e,t,n):r.wrap(e,t,n)}),!n(t.toggleBlock)&&(t.toggleBlock=function(e,t,n){var r=this,i=r.$(),o=i.after,s=i.before,a=i.value,c=p(t),l=o.split("\n").shift(),u=s.split("\n").pop(),f=p(e);return n&&t===a.slice(-c)&&e===a.slice(0,f)||t===l.slice(-c)&&e===u.slice(0,f)?r.peelBlock(e,t,n):r.wrapBlock(e,t,n)}),!n(t.wrapBlock)&&(t.wrapBlock=function(e,t,n){var r=this.$(),i=r.after,o=r.before,s=r.end,a=r.start,c=i.split("\n").shift(),l=p(c),u=o.split("\n").pop(),f=p(u);return this.select(a-f,s+l).wrap(e,t,n)}),e.on("key.down",yn).record()},detach:function(){return this.off("key.down",yn)},name:"TextEditor.Source"};function bn(e){for(var t;t=en.instances.pop();)t.detach();var n,r,i,o=U(".lot\\:field.type\\:source .textarea");o&&p(o)&&o.forEach((function(e){var t;(n=new en(e,r=null!=(t=F(e,"state"))?t:{})).command("pull",(function(){return this.pull(),!1})),n.command("push",(function(){return this.push(),!1})),n.key("Control-[","pull"),n.key("Control-]","push"),n.key("Escape",(function(){var e=M(this.self,"[tabindex]:not(.not\\:active)");return!e||(e.focus({focusVisible:!0}),!1)})),"HTML"!==(i=r.type||e.form.elements["data[type]"]||e.form.elements["page[type]"]||e.form.elements["file[type]"]||"text/plain")&&"text/html"!==i||(n.command("blocks",(function(){})),n.command("bold",(function(){})),n.command("code",(function(){})),n.command("image",(function(){})),n.command("italic",(function(){})),n.command("link",(function(){})),n.command("quote",(function(){})),n.command("underline",(function(){})),n.key('Control-Shift-"',"quote"),n.key("Control-'","quote"),n.key("Control-b","bold"),n.key("Control-e","code"),n.key("Control-h","blocks"),n.key("Control-i","italic"),n.key("Control-l","link"),n.key("Control-o","image"),n.key("Control-u","underline")),en.instances.push(n)})),1===e&&L._.on("change",bn)}en.instances=[],en.state.with.push(rn),en.state.with.push(dn),en.state.with.push(kn),L.TextEditor=en;var wn=':scope>:where(.lot\\:file[tabindex],.lot\\:folder[tabindex]):not([tabindex="-1"]):not(.not\\:active)';function En(e){e&&n(e.focus)&&e.focus()}function xn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function Sn(e){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=W(i);t&&J(t,"not:active");)t=W(t);for(n=q(i);n&&J(n,"not:active");)n=q(n);"ArrowDown"===o?(En(t),r=!0):"ArrowUp"===o?(En(n),r=!0):"End"===o?(En([].slice.call(U(wn,M(i))).pop()),r=!0):"Home"===o&&(En(X(wn,M(i))),r=!0),r&&(Te(e),He(e))}}function _n(e){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;if(n===e.target){if(!i&&!o&&!s)"ArrowDown"===r||"Home"===r?(En(X(wn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(En([].slice.call(U(wn,n)).pop()),t=!0);t&&(Te(e),He(e))}}var An=':scope>ul>li>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function Pn(e){e&&n(e.focus)&&e.focus()}function Tn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function Hn(e){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if((t=M(s,"[aria-orientation]"))&&(o="v"===(K(t,"aria-orientation")||[""])[0]),!c&&!l&&!u){if(t=M(s)){for(n=W(t);n&&(J(n,"as:separator")||J(n,"not:active"));)n=W(n);for(r=q(t);r&&(J(r,"as:separator")||J(r,"not:active"));)r=q(r)}"Arrow"+(o?"Up":"Left")===a?(Pn(r&&$(r)),i=!0):"Arrow"+(o?"Down":"Right")===a?(Pn(n&&$(n)),i=!0):"End"===a?((t=M(s,".lot\\:links[tabindex]"))&&Pn([].slice.call(U(An,t)).pop()),i=!0):"Home"===a&&((t=M(s,".lot\\:links[tabindex]"))&&Pn(X(An,t)),i=!0)}i&&(Te(e),He(e))}function Ln(e){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(n="v"===(K(r,"aria-orientation")||[""])[0],o||s||a||("Arrow"+(n?"Down":"Right")===i||"Home"===i?(Pn(X(An,r)),t=!0):"Arrow"+(n?"Up":"Left")!==i&&"End"!==i||(Pn([].slice.call(U(An,r)).pop()),t=!0)),t&&(Te(e),He(e)))}var Cn=":where(a,[tabindex]):not(.not\\:active)";function Dn(e){e&&n(e.focus)&&e.focus()}function Kn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function $n(e,t){U(".lot\\:menu[tabindex].is\\:enter").forEach((function(n){e!==n&&(re(M(n),"is:active"),re(q(n),"is:active"),re(n,"is:enter"),t&&le(t,"aria-expanded","false"))}))}function On(){$n(0)}function jn(e){Te(e),He(e);var t=this,n=W(t);$n(n,t),L.setTimeout((function(){Ee(n,"is:enter"),Ee(M(t),"is:active"),Ee(t,"is:active"),le(t,"aria-expanded",J(t,"is:active")?"true":"false")}),1)}function Rn(e){var t,n,r,i,o,s=this,a=e.key;if(n=M(s)){for(r=W(n);r&&(J(r,"as:separator")||J(r,"not:active"));)r=W(r);for(i=q(n);i&&(J(i,"as:separator")||J(i,"not:active"));)i=q(i)}"ArrowDown"===a?(Dn(r&&$(r)),o=!0):"ArrowLeft"===a||"Escape"===a||"Tab"===a?((n=M(s,".lot\\:menu[tabindex].is\\:enter"))?(re(M(s),"is:active"),re(n,"is:enter"),re(s,"is:active"),le(q(n),"aria-expanded","false"),"Tab"!==a&&Dn(q(n))):"Escape"===a&&Dn(M(s,".lot\\:menu[tabindex]")),o="Tab"!==a):"ArrowRight"===a?((r=W(s))&&J(r,"lot:menu")&&(le(s,"aria-expanded","true"),fe(M(s),"is:active"),fe(r,"is:enter"),fe(s,"is:active"),L.setTimeout((function(){Dn(X(Cn,r))}),1)),o=!0):"ArrowUp"===a?((t=i&&$(i))?Dn(t):(t=M(s,".lot\\:menu[tabindex].is\\:enter"))&&J(t,"level:1")&&(re(t,"is:enter"),(t=q(t))&&(re(t,"is:active"),re(M(t),"is:active"),le(t,"aria-expanded","false"),L.setTimeout((function(){Dn(t)}),1))),o=!0):"End"===a?((n=M(s,".lot\\:menu[tabindex]"))&&Dn([].slice.call(U(Cn,n)).pop()),o=!0):"Home"===a&&((n=M(s,".lot\\:menu[tabindex]"))&&Dn(X(Cn,n)),o=!0),o&&(Te(e),He(e))}function Fn(e){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;n===e.target&&(i||o||s||("ArrowDown"===r||"Home"===r?(Dn(X(Cn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(Dn([].slice.call(U(Cn,n)).pop()),t=!0)),t&&(Te(e),He(e)))}function Xn(e){var t,n=this,r=e.key,i=W(n),o=M(n);i&&o&&J(i,"lot:menu")&&(" "===r||"Enter"===r||"Tab"===r?"Tab"===r?J(i,"is:enter")&&Ae("click",n):(Ae("click",n),L.setTimeout((function(){Dn(X(Cn,i))}),1),t=!0):"ArrowDown"===r&&J(i,"level:1")&&(le(n,"aria-expanded","true"),fe(M(n),"is:active"),fe(i,"is:enter"),fe(n,"is:active"),L.setTimeout((function(){Dn(X(Cn,i))}),1),t=!0)),t&&(Te(e),He(e))}var Un=':scope>ul>li>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function In(e){e&&n(e.focus)&&e.focus()}function Nn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function Wn(e){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if((t=M(s,"[aria-orientation]"))&&(o="v"===(K(t,"aria-orientation")||[""])[0]),!c&&!l&&!u){if(t=M(s)){for(n=W(t);n&&(J(n,"as:separator")||J(n,"not:active"));)n=W(n);for(r=q(t);r&&(J(r,"as:separator")||J(r,"not:active"));)r=q(r)}"Arrow"+(o?"Up":"Left")===a?(In(r&&$(r)),i=!0):"Arrow"+(o?"Down":"Right")===a?(In(n&&$(n)),i=!0):"End"===a?((t=M(s,".lot\\:menus[tabindex]"))&&In([].slice.call(U(Un,t)).pop()),i=!0):"Home"===a&&((t=M(s,".lot\\:menus[tabindex]"))&&In(X(Un,t)),i=!0)}i&&(Te(e),He(e))}function Mn(e){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(n="v"===(K(r,"aria-orientation")||[""])[0],o||s||a||("Arrow"+(n?"Down":"Right")===i||"Home"===i?(In(X(Un,r)),t=!0):"Arrow"+(n?"Up":"Left")!==i&&"End"!==i||(In([].slice.call(U(Un,r)).pop()),t=!0)),t&&(Te(e),He(e)))}var Bn=':scope>.lot\\:page[tabindex]:not([tabindex="-1"]):not(.not\\:active)';function qn(e){e&&n(e.focus)&&e.focus()}function zn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function Yn(e){var t,n,r,i=this,o=e.key;if(i===e.target){for(t=W(i);t&&J(t,"not:active");)t=W(t);for(n=q(i);n&&J(n,"not:active");)n=q(n);"ArrowDown"===o?(qn(t),r=!0):"ArrowUp"===o?(qn(n),r=!0):"End"===o?(qn([].slice.call(U(Bn,M(i))).pop()),r=!0):"Home"===o&&(qn(X(Bn,M(i))),r=!0),r&&(Te(e),He(e))}}function Vn(e){var t,n=this,r=e.key,i=e.altKey,o=e.ctrlKey,s=e.shiftKey;n===e.target&&(i||o||s||("ArrowDown"===r||"Home"===r?(qn(X(Bn,n)),t=!0):"ArrowUp"!==r&&"End"!==r||(qn([].slice.call(U(Bn,n)).pop()),t=!0)),t&&(Te(e),He(e)))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Gn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jn={exports:{}};"undefined"!=typeof self&&self,Jn.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){var n=this;if(r(this,e),this.config=e.mergeSettings(t),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw Error("Something wrong with your selector 😭");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=e.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler"].forEach((function(e){n[e]=n[e].bind(n)})),this.init()}return o(e,[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)}},{key:"init",value:function(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this)}},{key:"buildSliderFrame",value:function(){var e=this.selectorWidth/this.perPage,t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length;this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=e*t+"px",this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");var n=document.createDocumentFragment();if(this.config.loop)for(var r=this.innerElements.length-this.perPage;r<this.innerElements.length;r++){var i=this.buildSliderFrameItem(this.innerElements[r].cloneNode(!0));n.appendChild(i)}for(var o=0;o<this.innerElements.length;o++){var s=this.buildSliderFrameItem(this.innerElements[o]);n.appendChild(s)}if(this.config.loop)for(var a=0;a<this.perPage;a++){var c=this.buildSliderFrameItem(this.innerElements[a].cloneNode(!0));n.appendChild(c)}this.sliderFrame.appendChild(n),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}},{key:"buildSliderFrameItem",value:function(e){var t=document.createElement("div");return t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.width=(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length)+"%",t.appendChild(e),t}},{key:"resolveSlidesNumber",value:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"===i(this.config.perPage))for(var e in this.perPage=1,this.config.perPage)window.innerWidth>=e&&(this.perPage=this.config.perPage[e])}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide-e<0){this.disableTransition();var r=this.currentSlide+this.innerElements.length,i=r+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(o+s)+"px, 0, 0)",this.currentSlide=r-e}else this.currentSlide=this.currentSlide-e;else this.currentSlide=Math.max(this.currentSlide-e,0);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide+e>this.innerElements.length-this.perPage){this.disableTransition();var r=this.currentSlide-this.innerElements.length,i=r+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(o+s)+"px, 0, 0)",this.currentSlide=r+e}else this.currentSlide=this.currentSlide+e;else this.currentSlide=Math.min(this.currentSlide+e,this.innerElements.length-this.perPage);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"disableTransition",value:function(){this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing}},{key:"enableTransition",value:function(){this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing}},{key:"goTo",value:function(e,t){if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.perPage),n!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),t&&t.call(this))}}},{key:"slideToCurrent",value:function(e){var t=this,n=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,r=(this.config.rtl?1:-1)*n*(this.selectorWidth/this.perPage);e?requestAnimationFrame((function(){requestAnimationFrame((function(){t.enableTransition(),t.sliderFrame.style[t.transformProperty]="translate3d("+r+"px, 0, 0)"}))})):this.sliderFrame.style[this.transformProperty]="translate3d("+r+"px, 0, 0)"}},{key:"updateAfterDrag",value:function(){var e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),n=this.config.multipleDrag?Math.ceil(t/(this.selectorWidth/this.perPage)):1,r=e>0&&this.currentSlide-n<0,i=e<0&&this.currentSlide+n>this.innerElements.length-this.perPage;e>0&&t>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(n):e<0&&t>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(n),this.slideToCurrent(r||i)}},{key:"resizeHandler",value:function(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}},{key:"touchstartHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}},{key:"touchendHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(e){if(e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mousedownHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}},{key:"mouseupHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(e){if(e.preventDefault(),this.pointerDown){"A"===e.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=e.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mouseleaveHandler",value:function(e){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}},{key:"clickHandler",value:function(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}},{key:"remove",value:function(e,t){if(e<0||e>=this.innerElements.length)throw Error("Item to remove doesn't exist 😭");var n=e<this.currentSlide,r=this.currentSlide+this.perPage-1===e;(n||r)&&this.currentSlide--,this.innerElements.splice(e,1),this.buildSliderFrame(),t&&t.call(this)}},{key:"insert",value:function(e,t,n){if(t<0||t>this.innerElements.length+1)throw Error("Unable to inset it at this index 😭");if(-1!==this.innerElements.indexOf(e))throw Error("The same item in a carousel? Really? Nope 😭");var r=t<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=r?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.buildSliderFrame(),n&&n.call(this)}},{key:"prepend",value:function(e,t){this.insert(e,0),t&&t.call(this)}},{key:"append",value:function(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(this.detachEvents(),this.selector.style.cursor="auto",e){for(var n=document.createDocumentFragment(),r=0;r<this.innerElements.length;r++)n.appendChild(this.innerElements[r]);this.selector.innerHTML="",this.selector.appendChild(n),this.selector.removeAttribute("style")}t&&t.call(this)}}],[{key:"mergeSettings",value:function(e){var t={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:function(){},onChange:function(){}},n=e;for(var r in n)t[r]=n[r];return t}},{key:"webkitOrNot",value:function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}}]),e}();t.default=s,e.exports=t.default}]);var Qn=Gn(Jn.exports);function Zn(e,t,n){return Pe(e,t,n),Ce(e,t,n)}Qn.instances=[];var er=0;function tr(){L.clearInterval(this._[er])}function nr(){tr.call(this)}L.Siema=Qn;var rr='a[target^="stack:"]:not(.not\\:active)';function ir(e){e&&n(e.focus)&&e.focus()}function or(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function sr(e){if(t(e)){for(var n=[],r=0,i=p(e);r<i;++r)if(null!==e[r]){if(t(e[r])){if(null===(e[r]=sr(e[r]))||0===e[r].length)continue}else if(s(e[r])&&(null===(e[r]=sr(e[r]))||0===m(e[r])))continue;n.push(e[r])}return 0!==p(n)?n:null}for(var o in e)null!==e[o]?(t(e[o])||s(e[o]))&&(null!==(e[o]=sr(e[o]))&&0!==m(e[o])||delete e[o]):delete e[o];return 0!==m(e)?e:null}var ar=0,cr=2;function lr(e){var t,n,r=this,i=M(M(r)),o=M(i,".lot\\:stacks"),s=r._[ar].name;if(!J(i,"has:link")){r._[cr].forEach((function(e){e!==i&&(re(t=X('a[target^="stack:"]',e),"is:current"),re(e,"is:current"),le(t,"aria-expanded","false"))})),J(i,"can:toggle")?(le(r,"aria-expanded",K(r,"aria-expanded")?"false":"true"),Ee(i,"is:current"),Ee(r,"is:current")):(le(r,"aria-expanded","true"),fe(i,"is:current"),fe(r,"is:current")),t=J(r,"is:current"),r._[ar].value=n=t?F(i,"value"):null,Ee(o,"has:current",t);var a=Se.pathname,c=Se.search,l=S(c),u=S(s+"="+n);l=A(l,u.query||{}),null===n&&(l=sr(l)),xe.replaceState({},"",a+(null!==l?w(l):"")),L._.fire.call(i,"change.stack",[n,s]),Te(e)}}function ur(e){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey;if(!c&&!l)if("ArrowDown"===a||"ArrowRight"===a||"PageDown"===a){if(r=M(M(s)))for(n=W(r);n&&J(n,"not:active");)n=W(n);(t=n&&$(n))&&("ArrowRight"===a&&J(M(t),"can:toggle")||Ae("click",$(t)),ir($(t))),o=!0}else if("ArrowUp"===a||"ArrowLeft"===a||"PageUp"===a){if(r=M(M(s)))for(i=q(r);i&&J(i,"not:active");)i=q(i);(t=i&&$(i))&&("ArrowLeft"===a&&J(M(t),"can:toggle")||Ae("click",$(t)),ir($(t))),o=!0}else" "===a||"Enter"===a?(J(M(M(s)),"can:toggle")&&(Ae("click",s),ir(s)),o=!0):"End"===a?((r=M(s,".lot\\:stacks[tabindex]"))&&(t=[].slice.call(U(rr,r)).pop())&&(Ae("click",t),ir(t)),o=!0):"Home"===a&&((r=M(s,".lot\\:stacks[tabindex]"))&&(t=X(rr,r))&&(Ae("click",t),ir(t)),o=!0);o&&(Te(e),He(e))}function fr(e){var t,n,r,i,o=this,s=e.key,a=e.altKey,c=e.ctrlKey,l=e.shiftKey;if(a&&c&&!l)t=(t=X(rr+".is\\:current",o))&&M(M(t)),"PageDown"===s?((t=(n=t&&W(t))&&X(rr,n))&&(Ae("click",t),ir(t)),i=!0):"PageUp"===s&&((t=(r=t&&q(t))&&X(rr,r))&&(Ae("click",t),ir(t)),i=!0);else if(!a&&!c&&!l){if(o!==e.target)return;"ArrowDown"===s||"ArrowRight"===s||"Home"===s||"PageDown"===s?((t=X(rr,o))&&(Ae("click",t),ir(t)),i=!0):"ArrowUp"!==s&&"ArrowLeft"!==s&&"End"!==s&&"PageUp"!==s||((t=[].slice.call(U(rr,o)).pop())&&(Ae("click",t),ir(t)),i=!0)}i&&(Te(e),He(e))}var hr='a[target^="tab:"]:not(.not\\:active)';function dr(e){e&&n(e.focus)&&e.focus()}function pr(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function vr(e){if(t(e)){for(var n=[],r=0,i=p(e);r<i;++r)if(null!==e[r]){if(t(e[r])){if(null===(e[r]=vr(e[r]))||0===e[r].length)continue}else if(s(e[r])&&(null===(e[r]=vr(e[r]))||0===m(e[r])))continue;n.push(e[r])}return 0!==p(n)?n:null}for(var o in e)null!==e[o]?(t(e[o])||s(e[o]))&&(null!==(e[o]=vr(e[o]))&&0!==m(e[o])||delete e[o]):delete e[o];return 0!==m(e)?e:null}var gr=0,mr=1,yr=2,kr=3;function br(e){var t,n,r=this,i=r._[yr][r._[mr]],o=M(r),s=M(o,".lot\\:tabs"),a=r._[gr].name;if(!J(o,"has:link")){if(r._[kr].forEach((function(e){if(e!==r){re(M(e),"is:current"),re(e,"is:current"),le(e,"aria-selected","false"),le(e,"tabindex","-1");var t=r._[yr][e._[mr]];t&&re(t,"is:current")}})),J(o,"can:toggle")?(Ee(o,"is:current"),Ee(r,"is:current"),le(r,"aria-selected",J(r,"is:current")?"true":"false"),le(r,"tabindex",J(r,"is:current")?"0":"-1")):(fe(o,"is:current"),fe(r,"is:current"),le(r,"aria-selected","true"),le(r,"tabindex","0")),t=J(r,"is:current"),i){r._[gr].value=n=t?F(r,"value"):null,Ee(i,"is:current",t),Ee(s,"has:current",t);var c=Se.pathname,l=Se.search,u=S(l),f=S(a+"="+n);u=A(u,f.query||{}),null===n&&(u=vr(u)),xe.replaceState({},"",c+(null!==u?w(u):"")),L._.fire.call(i,"change.tab",[n,a])}Te(e)}}function wr(e){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey;if(!c&&!l)if("ArrowDown"===a){if(J(s,"can:toggle")&&!J(s,"is:current"))t=s;else{if(r=M(s))for(n=W(r);n&&J(n,"not:active");)n=W(n);t=n&&$(n)}t&&(Ae("click",t),dr(t)),o=!0}else if("ArrowLeft"===a||"PageUp"===a){if(r=M(s))for(i=q(r);i&&J(i,"not:active");)i=q(i);(t=i&&$(i))&&(Ae("click",t),dr(t)),o=!0}else if("ArrowRight"===a||"PageDown"===a){if(r=M(s))for(n=W(r);n&&J(n,"not:active");)n=W(n);(t=n&&$(n))&&(Ae("click",t),dr(t)),o=!0}else if("ArrowUp"===a){if(J(s,"can:toggle")&&J(s,"is:current"))t=s;else{if(r=M(s))for(i=q(r);i&&J(i,"not:active");)i=q(i);t=i&&$(i)}t&&(Ae("click",t),dr(t)),o=!0}else" "===a||"Enter"===a?(J(s,"can:toggle")&&(Ae("click",s),dr(s)),o=!0):"End"===a?((r=M(s,".lot\\:tabs[tabindex]"))&&(t=[].slice.call(U(hr,r)).pop())&&(Ae("click",t),dr(t)),o=!0):"Home"===a&&((r=M(s,".lot\\:tabs[tabindex]"))&&(t=X(hr,r))&&(Ae("click",t),dr(t)),o=!0);o&&(Te(e),He(e))}function Er(e){var t,n,r,i,o=this,s=e.key,a=e.altKey,c=e.ctrlKey,l=e.shiftKey;if(a&&c&&!l)t=(t=X(hr+".is\\:current",o))&&M(t),"PageDown"===s?((t=(n=t&&W(t))&&$(n))&&(Ae("click",t),dr(t)),i=!0):"PageUp"===s&&((t=(r=t&&q(t))&&$(r))&&(Ae("click",t),dr(t)),i=!0);else if(!a&&!c&&!l){if(o!==e.target)return;"ArrowDown"===s||"ArrowRight"===s||"PageDown"===s||"ArrowUp"===s||"ArrowLeft"===s||"PageUp"===s?((t=X(hr+".is\\:current",o))&&(Ae("click",t),dr(t)),i=!0):"Home"===s?((t=X(hr,o))&&(Ae("click",t),dr(t)),i=!0):"End"===s&&((t=[].slice.call(U(hr,o)).pop())&&(Ae("click",t),dr(t)),i=!0)}i&&(Te(e),He(e))}var xr=':scope>:where(a,button,input,select,textarea,[tabindex]):not(:disabled):not([tabindex="-1"]):not(.not\\:active)';function Sr(e){e&&n(e.focus)&&e.focus()}function _r(e){e&&n(e.select)&&e.select()}function Ar(e,t,n){return Pe(e,t,n),Ce(e,t,n)}function Pr(e){var t,n,r,i,o,s=this,a=e.key,c=e.altKey,l=e.ctrlKey,u=e.shiftKey;if(!c&&!l&&!u){for(r=W(s);r&&J(r,"not:active");)r=W(r);for(i=q(s);i&&J(i,"not:active");)i=q(i);"ArrowLeft"===a?(o=!("selectionStart"in s&&0!==s.selectionStart))&&(Sr(i),_r(i)):"ArrowRight"===a?(o=!("selectionEnd"in s&&s.selectionEnd<p(s.value||"")))&&(Sr(r),_r(r)):"End"===a?(o=!("selectionEnd"in s&&p(s.value||"")))&&(n=M(s,".lot\\:tasks[tabindex]"))&&(t=[].slice.call(U(xr,n)).pop())&&(Sr(t),_r(t)):"Home"===a&&(o=!("selectionStart"in s&&p(s.value||"")))&&(n=M(s,".lot\\:tasks[tabindex]"))&&(t=X(xr,n))&&(Sr(t),_r(t))}o&&(Te(e),He(e))}function Tr(e){var t,n,r=this,i=e.key,o=e.altKey,s=e.ctrlKey,a=e.shiftKey;r===e.target&&(o||s||a||("ArrowLeft"===i||"End"===i?((t=[].slice.call(U(xr,r)).pop())&&(Sr(t),_r(t)),n=!0):"ArrowRight"!==i&&"Home"!==i||((t=X(xr,r))&&(Sr(t),_r(t)),n=!0)),n&&(Te(e),He(e)))}on.instances=[];var Hr=ct((function(e){return e.pull()}),1e3),Lr=new on(L);on.instances.push(Lr),Lr.keys.Escape=function(){var e=H.activeElement,t=e&&M(M(e),"[tabindex]:not(.not\\:active)");return t&&t.focus({focusVisible:!0}),!t},Lr.keys.F3=function(){var e,t=(e="get",H.forms[e]||null),n=t&&t.query;return n&&n.focus(),!1},Lr.keys.F10=function(){var e,t=X(".lot\\:bar a:any-link");return t&&(t.focus(),(e=M(t))&&J(e,"has:menu")&&t.click()),!1},Ce("blur",L,(function(e){this._event=e,Lr.pull()})),Ce("keydown",L,(function(e){this._event=e,Lr.push(e.key);var t=Lr.command();if(t){var n=Lr.fire(t);!1===n?(Te(e),He(e)):null===n&&console.error("Unknown command:",t)}Hr(Lr)})),Ce("keyup",L,(function(e){this._event=e,Lr.pull(e.key)}));var Cr={commands:Lr.commands,keys:Lr.keys},Dr=vt(Cr),Kr=Dr.fire;Dr.hooks,Dr.off,Dr.on,L.Key=on,L._=Cr,Ce("beforeload",H,(function(){return Kr("let")})),Ce("load",H,(function(){return Kr("get")})),Ce("DOMContentLoaded",H,(function(){return Kr("set")})),function e(t){var n=U(".lot\\:bar[tabindex]");n&&p(n)&&n.forEach((function(e){U(Ke,e).forEach((function(e){Oe("keydown",e,Re)})),Oe("keydown",e,je)})),1===t&&L._.on("change",e)}(1),L._.dialog=Be,Dt(1),zt(1),bn(1),function e(t){var n=U(":where(.lot\\:files,.lot\\:folders)[tabindex]");n&&p(n)&&n.forEach((function(e){U(wn,e).forEach((function(e){xn("keydown",e,Sn)})),xn("keydown",e,_n)})),1===t&&L._.on("change",e)}(1),function e(t){var n=U(".lot\\:links[tabindex]");n&&p(n)&&n.forEach((function(e){var t=U(An,e);t&&p(t)&&t.forEach((function(e){Tn("keydown",e,Hn)})),Tn("keydown",e,Ln)})),1===t&&L._.on("change",e)}(1),function e(t){Pe("click",H,On);var n=U(".has\\:menu"),r=U(".lot\\:menu[tabindex]>ul>li>"+Cn);n&&p(n)&&(n.forEach((function(e){var t=X(".lot\\:menu[tabindex]",e),n=q(t);t&&n&&(Kn("click",n,jn),Kn("keydown",n,Xn))})),Kn("click",H,On)),r&&p(r)&&r.forEach((function(e){Kn("keydown",e,Rn)}));var i=U(".lot\\:menu[tabindex]");i&&p(i)&&i.forEach((function(e){Kn("keydown",e,Fn)})),1===t&&L._.on("change",e)}(1),function e(t){var n=U(".lot\\:menus[tabindex]");n&&p(n)&&n.forEach((function(e){var t=U(Un,e);t&&p(t)&&t.forEach((function(e){Nn("keydown",e,Wn)})),Nn("keydown",e,Mn)})),1===t&&L._.on("change",e)}(1),function e(t){var n=U(".lot\\:pages[tabindex]");n&&p(n)&&n.forEach((function(e){U(Bn,e).forEach((function(e){zn("keydown",e,Yn)})),zn("keydown",e,Vn)})),1===t&&L._.on("change",e)}(1),function(e){for(var t;t=Qn.instances.pop();)t.destroy();var n=U(".siema");n&&p(n)&&n.forEach((function(e){var t=new Qn({duration:600,loop:!0,selector:e});e._=e._||{},e._[er]=L.setInterval((function(){return t.next()}),5e3),Zn("mousedown",e,tr),Zn("touchstart",e,nr),Qn.instances.push(t)})),_.on("change.stack",(function(){return Ae("resize",L)})),_.on("change.tab",(function(){return Ae("resize",L)}))}(),function e(t){var n=U(".lot\\:stacks[tabindex]");n&&p(n)&&n.forEach((function(e){var t,n,r,i=[].slice.call(O(e)).filter((function(e){return J(e,"lot:stack")})),o=ve("input");o.type="hidden",o.name=n=F(e,"name"),n&&ue(e,o),i.forEach((function(e,t){(r=X(rr,e))&&(r._=r._||{},r._[ar]=o,r._[1]=t,r._[cr]=i,or("click",r,lr),or("keydown",r,ur))})),(t=i.find((function(e,t){return 0!==t&&J(e,"is:current")})))&&(o.value=F(t,"value")),or("keydown",e,fr)})),1===t&&L._.on("change",e)}(1),function e(t){var n=U(".lot\\:tabs[tabindex]");n&&p(n)&&n.forEach((function(e){var t,n,r=[].slice.call(O(e)),i=[].slice.call(U(hr,r.shift())),o=ve("input");o.type="hidden",o.name=n=F(e,"name"),n&&ue(e,o),i.forEach((function(e,t){e._=e._||{},e._[gr]=o,e._[mr]=t,e._[yr]=r,e._[kr]=i,pr("click",e,br),pr("keydown",e,wr)})),(t=i.find((function(e,t){return 0!==t&&J(M(e),"is:current")})))&&(o.value=F(t,"value")),pr("keydown",e,Er)})),1===t&&L._.on("change",e)}(1),function e(t){var n=U(".lot\\:tasks[tabindex]");n&&p(n)&&n.forEach((function(e){var t=U(xr,e);t&&p(t)&&t.forEach((function(e){Ar("keydown",e,Pr)})),Ar("keydown",e,Tr)})),1===t&&L._.on("change",e)}(1)}();