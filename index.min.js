!function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&c(t)&&e instanceof t},i=function(e){return"number"==typeof e},o=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},c=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},a=function(e){return"string"==typeof e},u=function(e,t){var r=t.indexOf(e);return-1!==r?r:null},s=function(e){return e.replace(/[-_.](\w)/g,(function(e,t){return f(t)}))},l=function(e){return e.toLowerCase()},f=function(e){return e.toUpperCase()},p=function(e){return e.length},d=function(e,t){return c(t[0])&&e<t[0]?t[0]:c(t[1])&&e>t[1]?t[1]:e},v=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},h=function(e){return p(g(e))},g=function(e){return Object.keys(e)},y=function e(r){if(t(r))return r.map((function(t){return e(t)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(r))return v(r);if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},m=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,l=p(i);s<l;++s)for(var f in i[s])if(c(u[f]))if(t(u[f])&&t(i[s][f])){u[f]=[].concat(u[f]);for(var d=0,v=p(i[s][f]);d<v;++d)e(i[s][f][d],u[f])||u[f].push(i[s][f][d])}else o(u[f])&&o(i[s][f])?u[f]=r({},u[f],i[s][f]):u[f]=i[s][f];else u[f]=i[s][f];return u},b=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},k=document,w=window,x=k.body,E=k.documentElement,$=function(e,t,r){if(void 0===r&&(r=!0),!U(e,t))return null;var n=e.getAttribute(t);return r?y(n):n},A=function(e){return e.firstElementChild||null},L=function(e,t){var r=e.children;return i(t)?r[t]||null:r||[]},T=function(e,t){void 0===t&&(t=!0);var r=(O(e,"className")||"").trim();return t?r.split(/\s+/).filter((function(e){return""!==e})):r},K=function(e,t,r){void 0===r&&(r=!0);var n=$(e,"data-"+t,r),i=(n+"").trim();return r&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(n))?i:n},_=function(e,t){return(t||k).querySelector(e)},S=function(e,t){return(t||k).querySelectorAll(e)},P=function(e,t){void 0===t&&(t=!0);var r="innerHTML";if(!z(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null},H=function(e){return l(e&&e.nodeName||"")||null},q=function(e,t){return e["next"+(t?"":"Element")+"Sibling"]||null},C=function(e,t){return t?e.closest(t)||null:e.parentNode||null},R=function(e,t){return e["previous"+(t?"":"Element")+"Sibling"]||null},M=function(e,t,r){void 0===r&&(r=!0);var n=w.getComputedStyle(e).getPropertyValue(t);return r&&(n=y(n)),n||""===n||0===n?n:null},O=function(e,t){return z(e,t)&&e[t]||null},D=function(e,t){void 0===t&&(t=!0);var r="textContent";if(!z(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null},U=function(e,t){return e.hasAttribute(t)},W=function(e,t){return e.classList.contains(t)},N=function(e,t){return null!==C(e,t)},z=function(e,t){return t in e},B=function(e){return e===w},I=function(e,t){return e.removeAttribute(t),e},X=function(e,t){return e.classList.remove(t),e},V=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.remove(t)})),e;if(o(r)){for(var n in r)r[n]&&e.classList.remove(n);return e}return e.className="",e},F=function(e,t){return I(e,"data-"+t)},J=function(e){var t=C(e);return e.remove(),t},Y=function(e,t){return e.style[s(t)]=null,e},G=function(e,t,r){return!0===r&&(r=t),e.setAttribute(t,b(r)),e},Q=function(e,t){return e.append(t),t},Z=function(e,t){return e.classList.add(t),e},ee=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.add(t)})),e;if(o(r))for(var n in r)r[n]?e.classList.add(n):e.classList.remove(n);return e.className=r,e},te=function(e,r,n){return(t(n)||o(n))&&(n=function(e){return JSON.stringify(e)}(n)),G(e,"data-"+r,n)},re=function(e,t,r){return e=a(e)?k.createElement(e):e,o(t)&&(r=t,t=!1),a(t)&&ne(e,t),o(r)&&function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?G(e,n,r):I(e,n)}(e,r),e},ne=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="innerHTML";return z(e,n)&&(e[n]=r?t.trim():t),e},ie=function(e,t){return C(e).insertBefore(t,q(e,!0)),t},oe=function(e,t){return C(e).insertBefore(t,e),t},ce=function(e,t,r){return i(r)&&(r+="px"),e.style[s(t)]=b(r),e},ae=function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?ce(e,n,r):Y(e,n);return e},ue=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="textContent";return z(e,n)&&(e[n]=r?t.trim():t),e},se=function(e,t,r){return e.classList.toggle(t,r),e},le=w.location,fe={},pe=function(e,t,r,n){t.dispatchEvent(function(e,t,r){return r&&c(fe[e])?fe[e]:fe[e]=new Event(e,t)}(e,r,n))},de=function(e,t,r){t.removeEventListener(e,r)},ve=function(e){return e&&e.preventDefault()},he=function(e){return e&&e.stopPropagation()},ge=function(e,t,r){e.forEach((function(e){return de(e,t,r)}))},ye=function(e,t,r,n){void 0===n&&(n=!1),t.addEventListener(e,r,n)},me=function(e,t,r,n){void 0===n&&(n=!1),e.forEach((function(e){return ye(e,t,r,n)}))},be=":scope>[tabindex]:not(.not\\:active)";function ke(e){e&&r(e.focus)&&e.focus()}function we(){var e=S(".lot\\:bar[tabindex]");e&&p(e)&&e.forEach((function(e){S(be,e).forEach((function(e){ye("keydown",e,Ee)})),ye("keydown",e,xe)}))}function xe(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowLeft"===n||"End"===n?(ke([].slice.call(S(be,r)).pop()),t=!0):"ArrowRight"!==n&&"Home"!==n||(ke(_(be,r)),t=!0);t&&(ve(e),he(e))}}}function Ee(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&W(t,"not:active");)t=q(t);for(r=R(i);r&&W(r,"not:active");)r=R(r);"ArrowLeft"===o?(ke(r),n=!0):"ArrowRight"===o?(ke(t),n=!0):"End"===o?(ke([].slice.call(S(be,C(i))).pop()),n=!0):"Home"===o&&(ke(_(be,C(i))),n=!0),n&&(ve(e),he(e))}}}var $e=re("dialog"),Ae=re("form","",{method:"dialog"}),Le=re("div");function Te(e){var t=this;return de(e.type,t,Te),t.x(y(t.returnValue))}function Ke(e){var t=this;return de(e.type,t,Ke),t.v(y(t.returnValue))}function _e(e){var t;for(ne(Ae,""),a(e)&&(ne(Le,e.trim()),e=Le.childNodes),e=Array.from(e);t=e.shift();)Q(Ae,t);$e.showModal(),$e.returnValue=null;var n=_("[autofocus]",Ae);return n&&(r(n.focus)&&n.focus(),r(n.select)&&n.select()),new Promise((function(e,t){$e.v=e,$e.x=t,ye("cancel",$e,Te),ye("submit",$e,Ke)}))}function Se(){var e=this,t=C(e.form);t.returnValue=e.value,pe("reset"===e.type?"cancel":"close",t),t.open&&t.close()}function Pe(e){var t,r,n=e.key;"ArrowLeft"===n||"ArrowUp"===n?((r=R(this))&&r.focus(),ve(e)):"ArrowDown"!==n&&"ArrowRight"!==n||((t=q(this))&&t.focus(),ve(e))}Q(x,$e),Q($e,Ae);var He=re("p"),qe=re("p","",{role:"group"}),Ce=re("button","OK",{type:"submit",value:"true"});ye("keydown",Ce,Pe),ye("click",Ce,Se),Q(qe,Ce),_e.alert=function(e){return ne(He,e),_e([He,qe])};var Re=re("p"),je=re("p","",{role:"group"}),Me=re("button","OK",{type:"submit",value:"true"}),Oe=re("button","Cancel",{type:"reset",value:"false"});ye("click",Oe,Se),ye("click",Me,Se),ye("keydown",Oe,Pe),ye("keydown",Me,Pe),Q(je,Me),Q(je,Oe),_e.confirm=function(e){return ne(Re,e),_e([Re,je])};var De=re("p"),Ue=re("input",!1,{autofocus:!0,type:"text"}),We=re("p"),Ne=re("p","",{role:"group"}),ze=re("button","OK",{type:"submit",value:""}),Be=re("button","Cancel",{type:"reset",value:"false"});function Ie(){ze.value=this.value}ye("click",Be,Se),ye("click",ze,Se),ye("input",Ue,Ie),ye("keydown",Be,Pe),ye("keydown",ze,Pe),ye("keyup",Ue,Ie),Q(Ne,ze),Q(Ne,Be),Q(We,Ue),_e.prompt=function(e,t){return ne(De,e),Ue.value=ze.value=t,_e([De,We,Ne])};var Xe=function(e,t){var r;return function(){var n=arguments,i=this;r&&clearTimeout(r),r=setTimeout((function(){return e.apply(i,n)}),t)}},Ve=function(e,t){return function(){var r=arguments,n=this;setTimeout((function(){return e.apply(n,r)}),t)}},Fe=function(e){return B(e)?[e.innerWidth,e.innerHeight]:[e.offsetWidth,e.offsetHeight]},Je=function(e,t){return e.scrollLeft=t[0],e.scrollTop=t[1],e};function Ye(e){var t={};return e.hooks=t,e.fire=function(r,n){return c(t[r])?(t[r].forEach((function(t){return t.apply(e,n)})),e):e},e.off=function(r,n){if(!c(r))return t={},e;if(c(t[r]))if(c(n)){for(var i=0,o=t[r].length;i<o;++i)if(n===t[r][i]){t[r].splice(i,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,n){return c(t[r])||(t[r]=[]),c(n)&&t[r].push(n),e},e}var Ge="ArrowDown",Qe="ArrowUp",Ze="Enter",et="Escape",tt="â€Œ";function rt(e){var t=k.createRange();t.selectNodeContents(e);var r=w.getSelection();r.removeAllRanges(),r.addRange(t)}function nt(r,i){void 0===i&&(i={});var o=this;if(!r)return o;if(r.OP)return r.OP;if(!n(o,nt))return new nt(r,i);var c=Ye(o),a=c.fire;function u(){return[y(s()),o.options]}function s(){if(Ee){for(var e=[],t=0,n=p(Ae);t<n;++t)d(Ae[t])&&e.push(f(Ae[t]));return e}var i=r.value;return""!==i?i:null}function f(e){var t=e.value||D(e);return""!==t?t:null}function d(e){return U(e,"selected")}function g(e){I(e,"selected"),e.selected=!1}function A(e){X(e,Y+"selected")}function K(e){G(e,"selected",!0),e.selected=!0}function _(e){Z(e,Y+"selected")}function S(e){e=e||tt,Pe.title=e.replace(/<.*?>/g,""),ne(Pe,e)}function q(e){if(Ee)for(var n,i=function(e){return t(e)?e:[e]}(n),o=0,c=p(Ae);o<c;++o)n=f(Ae[o]),i.includes(y(n))?K(Ae[o]):g(Ae[o]);else r.value=e}c.hooks,o.state=i=m({},nt.state,i),o.options={},o.source=r,nt.instances[r.id||r.name||h(nt.instances)]=o,r.OP=o;var R=i.class,j=R+"__",O=R+"--",N=j+"input",V=j+"option",Y=V+"--",ee=j+"options",oe=j+"value",le=j+"values",fe=re(r,{class:j+"source",tabindex:-1}),pe="input"===H(fe)?re("span","",{class:N}):null,he=pe?r.placeholder:"",be=re("span",he),ke=re("span","",{contenteditable:"",tabindex:0}),we=function(){return fe.disabled},xe=L(fe),Ee=fe.multiple,$e=0,Ae=fe.options,Le=i.parent||k,Te="input"===H(fe)?0:fe.size,Ke=fe.title,_e=s(),Se=re("div",{class:R,tabindex:!pe&&!we()&&0,title:Ke}),Pe=re("div",tt,{class:le}),He=fe.list,qe=0,Ce=0,Re=re("div",{class:ee,tabindex:-1}),je=[],Me=!1,Oe=!1;function De(){X(Se,O+"focus"),a("blur",u())}function Ue(){Z(Se,O+"focus"),a("focus",u())}function We(){Z(Se,O+"open"),a("enter",u())}function Ne(){Ee||Te||(X(Se,O+"open"),a("exit",u()))}function ze(){qe=v(M(Se,"border-bottom-width")),Ce=v(M(Se,"border-top-width")),xt(Se)}function Be(e){se(Se,O+"open",e);var t=it();return a(t?"enter":"exit",u()),t}function Ie(e,t,r,n){return re("span",e,{class:oe+" "+n,"data-index":t,"data-value":r}).outerHTML}function it(){return W(Se,O+"open")}function ot(){(pe?ke:Se).focus()}function ct(e){if(Ae&&!we()){var t,r,n,o=[],c=this,s=c.$,l=_e;if($e=c.i,_e=c.v,e&&e.isTrusted&&ot(),ve(e),Ee&&(Me||Oe)){!function(e){return W(e,Y+"selected")}(c)?(K(s),_(c)):(g(s),A(c));for(var f,v=0,h=p(Ae);v<h;++v)d(Ae[v])&&(t=D(f=je[v]),r=f.i,n=f.v,o.push(Ie(t,r,n,T(f,!1))));return S(o.join("<span>"+i.join+"</span>")),void a("change",u())}t=D(c),r=c.i,n=c.v,t&&pe&&(ne(be,tt),ue(ke,t)),S(Ie(t,r,n,T(c,!1))),pe&&(rt(ke),q(t)),je.forEach((function(e){_e===e.v?(K(e.$),_(e)):(g(e.$),A(e))})),_e!==l&&a("change",u())}}function at(e){De()}function ut(e){if(!we()){if($e=fe.selectedIndex,Te)return We();pe?ke.focus():Be()&&ze()}}function st(e){$e=fe.selectedIndex,Ue()}function lt(e){if(Ae){Me=e.ctrlKey,Oe=e.shiftKey;var t=e.key,r=$e,n=je[r],i=function(e){return W(e,Y+"disabled")},o=function(e){return ct.call(e)},c=it();if(Ge===t){for(;(n=je[++r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),ve(e)}else if(Qe===t){for(;(n=je[--r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),ve(e)}else if("End"===t){for(r=p(Ae);(n=je[--r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),ve(e)}else if(Ze===t)n&&o(n),Be(),ve(e);else if(et===t)!Te&&Ne();else if("Home"===t){for(r=-1;(n=je[++r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),ve(e)}else"Tab"===t&&(!pe&&n&&o(n),!Te&&Ne());it()&&!Me&&!Oe&&ze()}}function ft(){Me=Oe=!1}function pt(){var e=D(ke);null!==e&&q(b(e)),De()}function dt(){if(Ae){var e,t,r=D(this);$e=-1,rt(this);for(var n=0,i=p(Ae);n<i;++n)e=Ae[n],t=je[n],r===D(e)?($e=n,K(e),_(t)):(g(e),A(t));Ue(),Be()&&ze()}}Ee&&!Te&&(fe.size=Te=i.size),pe&&He&&(xe=L(He),Ae=He.options,Te=null,_e&&(ne(be,tt),ue(ke,_e))),pe&&(Q(pe,ke),Q(pe,be)),Q(Se,pe||Pe),ie(fe,Se);var vt=Xe((function(t,r,n){var i,o,c=D(t);if(null===c){ne(be,he),Re.hidden=!1;for(var a=0,u=p(je);a<u;++a)ne(o=je[a],D(o)),o.hidden=!1}else if(ne(be,tt),n!==(c=l(c))&&Ge!==r&&"ArrowLeft"!==r&&"ArrowRight"!==r&&Qe!==r&&Ze!==r){for(var s,f=0,d=p(je);f<d;++f)g((o=je[f]).$),A(o),(s=D(o))&&l(s).includes(c)?(!i&&(i=o),ne(o,s.replace(RegExp(c.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(function(e){return"<mark>"+e+"</mark>"}))),o.hidden=!1):(ne(o,s),o.hidden=!0);i?($e=i.i,K(i.$),_(i),Re.hidden=!1):Re.hidden=!0,n=c}else{for(var v,h=0,y=0,m=p(je);y<m;++y)o=je[y],v=P(o),e("</mark>",v)&&++h;if(h<=1)for(var b,k=0,w=p(je);k<w;++k)o=je[k],b=D(o),ne(o,b),o.hidden=!1}Ze!==r&&et!==r&&"Tab"!==r&&(We(),ze())}),1);function ht(e){var t=this,r=e.key;lt(e),vt(t,r,D(t))}function gt(){ft()}var yt=Ve((function(e,t){var r=D(e);ne(t,null!==r?tt:he),ue(e,r),rt(e)}),1);function mt(){yt(ke,be)}function bt(e){var t=e.target;if(t!==Se)for(;(t=C(t))&&Se!==t;);Se!==t&&Ne()}function kt(){it()&&xt(Se,1)}function wt(r,n){if("optgroup"!==H(r)){var i=$(r,"value",!1),c=i,a=D(r),u=r.title,s=re("a",a,{class:V,title:u||a});i=i||a,s.i=$e,s.$=r,s.v=i,function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?te(e,n,r):F(e,n)}(s,{index:$e,value:c}),o.options[i]=a,r.disabled?Z(s,Y+"disabled"):ye("click",s,ct),Q(n,s),je.push(s),""===c&&(i=null),t(_e)&&e(i,_e)||i===_e?(Z(s,Y+"selected"),S(Ie(a,$e,c,T(s,!1))),K(r)):g(r),++$e}else{var l=re("span",{class:V+"-group"+(r.disabled?" "+Y+"disabled":"")}),f=L(r);l.title=r.label;for(var d=0,v=p(f);d<v;++d)wt(f[d],l);Q(n,l)}}function xt(e,t){if(!Te){var r=function(e){var t,r,n,i,o,c,a;return B(e)?(i=e.pageXOffset||E.scrollLeft||x.scrollLeft,o=e.pageYOffset||E.scrollTop||x.scrollTop,n=e.innerWidth,t=e.innerHeight):(i=(r=e.getBoundingClientRect()).left,o=r.top,n=r.width,t=r.height,c=r.right,a=r.bottom),[i,o,n,t,c,a]}(e),n=r[0],i=r[1],o=r[2],c=r[3],s=Fe(w)[1],l=s-i-c;ae(Re,{bottom:"",left:n,"max-height":l,top:i+c-Ce,width:o}),l<(s-c)/2?(ae(Re,{top:"",bottom:s-i-qe,"max-height":(l=i)+Ce}),X(e,O+"down"),Z(e,O+"up")):(X(e,O+"up"),Z(e,O+"down"))}if(!t){var f=je.find((function(e){return W(e,Y+"selected")}));if(f){var p=Fe(f)[1],d=Fe(Re)[1],v=[(m=f).offsetLeft,m.offsetTop],h=v[0],g=v[1],y=function(e){return[e.scrollLeft,e.scrollTop]}(Re)[1];g<y?Je(Re,[h,g]):g+p-d>y&&Je(Re,[h,g+p-d])}}var m;a("fit",u())}me(["resize","scroll"],w,kt),ye("click",Le,bt),ye("focus",fe,ot),ye("click",Se,ut),pe?(ye("blur",ke,pt),ye("focus",ke,dt),ye("keydown",ke,ht),ye("keyup",ke,gt),ye("paste",ke,mt)):(ye("blur",Se,at),ye("focus",Se,st),ye("keydown",Se,lt),ye("keyup",Se,ft));var Et=p(xe);if(Et){Q(Se,Re);for(var $t=0;$t<Et;++$t)wt(xe[$t],Re);if(Te){var At=je[0],Lt=Fe(At)[1]*Te;ce(Re,"max-height",Lt)}}return Te&&(Z(Se,O+"down"),Z(Se,O+"open")),o.get=function(e){void 0===e&&(e=!0);var t=s();return e?y(t):t},o.pop=function(){return r.OP?(delete r.OP,ge(["resize","scroll"],w,kt),de("click",Le,bt),de("focus",fe,ot),X(fe,j+"source"),de("click",Se,ut),pe?(de("blur",ke,pt),de("focus",ke,dt),de("keydown",ke,ht),de("keyup",ke,gt),de("paste",ke,mt)):(de("blur",Se,at),de("focus",Se,st),de("keydown",Se,lt),de("keyup",Se,ft)),function(e){var t="textContent";z(e,t)&&(e[t]="")}(Se),J(Se),a("pop",u())):o},o.set=function(e){return Ae?(q(b(e)),je.forEach((function(e,t){var r=Ae[t];se(e,Y+"selected",r&&d(r))})),a("change",u()),o):o},o.self=Se,o}function it(e){for(var t in nt.instances)nt.instances[t].pop(),delete nt.instances[t];var r=S("input[list],select");r&&p(r)&&r.forEach((function(e){var t,r=T(e),n=new nt(e,null!=(t=K(e,"state"))?t:{});ee(n.self,r)})),1===e&&w._.on("change",it)}nt.instances={},nt.state={class:"option-picker",join:", ",parent:null,size:5},nt.version="1.3.7",w.OP=nt;var ot=function(e,t){return void 0===t&&(t=""),e.replace(ct("["+t+at.replace(/./g,"\\$&")+"]"),"\\$&")},ct=function(e,t){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,c(t)?t:"g"))},at="!$^*()+=[]{}|:<>,.?/-",ut="ArrowLeft",st="Home",lt="Backspace",ft="Tab";function pt(r,o){void 0===o&&(o={});var c=this;if(!r)return c;if(r.TP)return r.TP;if(!n(c,pt))return new pt(r,o);var s=function(){return r.disabled},f=function(){return r.readOnly},d=$(r,"placeholder"),v=$(r,"tabindex"),y=Ye(c);y.hooks;var b=y.fire;c.state=o=m({},pt.state,a(o)?{join:o}:o||{}),c.source=r,pt.instances[r.id||r.name||h(pt.instances)]=c,r.TP=c;var x,E,T,K=o.class,_=K+"__",S=K+"--",P=function(e){var t="form";return z(e,t)&&t===H(e.form)?e.form:C(e,t)}(r),j=re("div",{class:K,tabindex:!s()&&-1}),M=re("span",{class:_+"tag "+_+"input"}),O=re("input",{class:_+"copy",tabindex:-1,type:"text"}),U=re("span",{contenteditable:!s()&&"true",spellcheck:"false",style:"white-space:pre;"}),B=re("span"),I=re("span",{class:_+"tags"}),F=0,Y={};function G(e,t){var r=u(e,c.tags);return t&&b("get.tag",[e,r]),i(r)?e:null}function te(){Y={};var e,t=L(I),r=p(t)-1;for(e=0;e<r;++e)W(t[e],_+"tag--selected")&&(Y[e]=t[e])}function ne(e,t){i(t)?(t=t<0?0:t,c.tags.splice(t,0,e)):c.tags.push(e),r.value=c.tags.join(o.join)}function ce(e,t){var r=re("span",{class:_+"tag",tabindex:!s()&&!f()&&0,title:e}),n=re("a",{class:_+"tag-x",href:"",tabindex:-1,target:"_top"});ye("click",n,He),Q(r,n),ye("click",r,Pe),me(["blur","focus"],r,Te),N(I)&&(i(t)&&c.tags[t]?oe(L(I,t),r):oe(M,r))}function ae(t){if(t=t?t.split(o.join):[],N(j))for(var n,i,a;n=R(M);)le(a=n.title),e(a,t)||(i=u(a,c.tags),b("change",[a,i]),b("let.tag",[a,i]));c.tags=[],r.value="";for(var s,l=0,f=o.max;l<f&&t[l];++l)""!==(s=$e(t[l]))&&(ce(s),ne(s),b("change",[s,l]),b("set.tag",[s,l]))}function se(e){var t=u(e,c.tags);i(t)&&t>=0&&(c.tags.splice(t,1),r.value=c.tags.join(o.join))}function le(e){var t,r=u(e,c.tags);if(i(r)&&r>=0&&(t=L(I,r))){de("click",t,Pe),ge(["blur","focus"],t,Te);var n=A(t);n&&(de("click",n,He),J(n)),J(t)}}function fe(e){J(O),e&&be("",1)}function pe(e){Q(j,O),O.value=c.tags.join(o.join),e&&(O.focus(),O.select())}function be(e,t){if(ue(U,e),ue(B,e?"":d),t){U.focus();var r=k.createRange(),n=w.getSelection();r.selectNodeContents(U),r.collapse(!1),n.removeAllRanges(),n.addRange(r)}}function ke(e){Ee(e,(function(){X(this,_+"tag--selected")}))}function we(e){Ee(e,(function(){Z(this,_+"tag--selected")}))}function xe(){if(!s()&&!f()){var e=Ae(D(U)).trim(),t=o.pattern;if(t&&e&&!ct(t,"").test(e))return b("not.tag",[e,-1]),void be(e,1);if(be(""),e=$e(e))if(G(e))b("has.tag",[e,u(e,c.tags)]);else{ce(e),ne(e);var r=p(c.tags);b("change",[e,r]),b("set.tag",[e,r])}}}function Ee(e,t){var r,n=L(I),i=p(n)-1;for(r=0;r<i;++r)e!==n[r]&&t.call(n[r],r)}function $e(e){return Ae(c.f(e)).trim()}function Ae(e){return e=e||"",o.escape.forEach((function(t){e=e.split(t).join("")})),e}function Le(e){"blur"===e.type?(ke(),V(j,[S+"focus",S+"focus-self"])):ee(j,[S+"focus",S+"focus-self"])}function Te(e){if(!f()){Y={};var t=this,r=e.type,n=t.title,i=c.tags,o=u(n,i),a=_+"tag--";"blur"===r?(!x&&!E||E&&T)&&(ke(t),X(t,a+"selected"),V(j,[S+"focus",S+"focus-tag"])):(Z(t,a+"selected"),ee(j,[S+"focus",S+"focus-tag"]),F=o,Y[o]=t),b(r+".tag",[n,o])}}function Ke(e){var t=c.tags,r=e.type,n=_+"text--";X(j,S+"focus-tag"),"blur"===r?(X(M,n+"focus"),V(j,[S+"focus",S+"focus-input"]),xe()):(Z(M,n+"focus"),ee(j,[S+"focus",S+"focus-input"]),ke(M)),b(r,[t,p(t)])}function _e(e){"blur"===e.type?X(j,S+"focus"):Z(j,S+"focus")}function Se(e){e&&j===e.target&&U.focus();var t=c.tags;b("click",[t,p(t)])}function Pe(){var e=this.title,t=c.tags;b("click.tag",[e,u(e,t)])}function He(e){if(!s()&&!f()){var t=C(this).title,r=u(t,c.tags);le(t),se(t),be("",1),b("change",[t,r]),b("click.tag",[t,r]),b("let.tag",[t,r])}ve(e)}function qe(e){var t=e.type;"copy"===t?Ve((function(){return fe(1)}))():"cut"===t?(!f()&&ae(""),Ve((function(){return fe(1)}))()):"paste"===t&&Ve((function(){!f()&&ae(O.value),fe(1)}))(),Ve((function(){var e=c.tags;b(t,[e,p(e)])}),1)()}function Ce(){ke(),X(j,S+"focus-self")}function Re(){U.focus()}function je(e){if(!s()&&!f()){c.tags;var t,r,n,i,o,a,u=e.key,l=x=e.ctrlKey,d=E=e.shiftKey,v=_+"tag--";if(T=ft===u,!l){if(!d&&(lt===u||"Delete"===u)){te(),a=Y;var h=lt===u;for(r in a)le(o=(t=a[r]).title),se(o);return F=+(g(a)[0]||0),(t=L(I,h?F-1:F))?M===t?be("",1):t.focus():be("",1),void ve(e)}if(st===u)return void((t=L(I,0))&&(t.focus(),ve(e)));if("End"===u&&(t=L(I,p(c.tags)-1)))return t.focus(),void ve(e);if(ut===u){if(t=L(I,F-1)){var y=W(t,v+"selected");return t.focus(),ve(e),d?(n=q(t),void(y&&X(n,v+"selected"))):void ke(t)}if(!d)return void ke(L(I,0))}if("ArrowRight"===u&&(t=L(I,F+1))){var m=W(t,v+"selected");return M!==t||d?t.focus():be("",1),ve(e),d?(i=R(t),void(m&&X(i,v+"selected"))):void ke(t)}}"a"===u&&(pe(1),we(),te(),ve(e))}}function Me(t){he(t),f()&&ft!==t.key&&ve(t);var r,n=o.escape,i=R(M),a=p(c.tags),u=o.max,s=$e(D(U)),l=t.key,v=x=t.ctrlKey,h="Enter"===l;E=t.shiftKey;var g=T=ft===l;if(h&&(l="\n"),g&&(l="\t"),Ve((function(){var r=$e(D(U));ue(B,r?"":d),e(function(e){var t,r=w.getSelection();if(r.rangeCount>0)return(t=r.getRangeAt(0).cloneRange()).collapse(!0),t.setStart(e,0),(t+"").slice(-1)}(U),n)&&(a<u?xe():(be(""),b("max.tags",[u])),ve(t))}))(),""===s&&st===l&&(r=L(I,0)))return r.focus(),void ve(t);if(""===s&&"End"===l&&(r=L(I,p(c.tags)-1)))return r.focus(),void ve(t);if(v&&""===s&&"a"===l)return pe(1),we(),te(),void ve(t);if(e(l,n))return a<u?xe():(be(""),b("max.tags",[u])),void ve(t);if(!g){if(!v&&h)return Ue()&&P&&P.dispatchEvent(new Event("submit",{cancelable:!0})),void ve(t);if(i&&""===s&&!f()){if(lt===l)return le(r=c.tags[a-1]),se(r),b("change",[r,a-1]),b("let.tag",[r,a-1]),void ve(t);if(ut===l)return void i.focus()}}}function Oe(){x=E=!1}function De(){Ve((function(){s()||f()||D(U).split(o.join).forEach((function(t){e(t,c.tags)||(ce(t),ne(t))})),be("")}))()}function Ue(e){if(!s()){var t=o.min;return xe(),t>0&&p(c.tags)<t?(be("",1),b("min.tags",[t]),void ve(e)):1}}return be(""),Q(j,I),Q(M,U),Q(M,B),Q(I,M),Z(r,_+"source"),ie(r,j),re(r,{tabindex:-1}),ye("blur",j,Ce),ye("click",j,Se),ye("focus",r,Re),ye("keydown",j,je),ye("keydown",U,Me),ye("keyup",j,Oe),ye("paste",U,De),me(["blur","focus"],j,_e),me(["blur","focus"],O,Le),me(["blur","focus"],U,Ke),me(["copy","cut","paste"],O,qe),P&&ye("submit",P,Ue),c.blur=function(){return!s()&&U.blur(),c},c.click=function(){return j.click(),Se(),c},c.f=function(e){return l(e||"").replace(/[^ a-z\d-]/g,"").trim()},c.focus=function(){return s()||be(D(U),1),c},c.get=function(e){return s()?null:G(e,1)},c.input=U,c.let=function(e){if(!s()&&!f()){var r=o.min;if(e)if(t(e))e.forEach((function(e){if(r>0&&p(c.tags)<r)return b("min.tags",[r]),c;le(e),se(e)}));else{if(r>0&&p(c.tags)<r)return b("min.tags",[r]),c;le(e),se(e)}else ae("")}return c},c.pop=function(){if(!r.TP)return c;delete r.TP;var e=c.tags;return X(r,_+"source"),de("blur",j,Ce),de("click",j,Se),de("focus",r,Re),de("keydown",j,je),de("keydown",U,Me),de("keyup",j,Oe),de("paste",U,De),ge(["blur","focus"],j,_e),ge(["blur","focus"],O,Le),ge(["blur","focus"],U,Ke),ge(["copy","cut","paste"],O,qe),P&&de("submit",P,Ue),e.forEach(le),re(r,{tabindex:v}),J(j),b("pop",[e])},c.self=j,c.set=function(e,r){if(!e)return c;if(!s()&&!f())if(t(e))ae(e.join(o.join));else{var n=c.tags,i=o.max;G(e)?b("has.tag",[e,u(e,n)]):p(n)<i?(ce(e,r),ne(e,r)):b("max.tags",[i])}return c},c.source=c.output=r,c.state=o,c.tags=[],ae(r.value),c}function dt(e){for(var t in pt.instances)pt.instances[t].pop(),delete pt.instances[t];var r=S(".lot\\:field.type\\:query input");r&&p(r)&&r.forEach((function(e){var t,r=T(e),n=new pt(e,null!=(t=K(e,"state"))?t:{});ee(n.self,r)})),1===e&&(w._.on("change",dt),w.TP=pt)}pt.instances={},pt.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null},pt.version="3.4.12";function vt(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function ht(e,i){void 0===i&&(i={});var o=this;if(!e)return o;if(e.TE)return e.TE;if(!n(o,ht))return new ht(e,i);o.state=i=m({},ht.state,a(i)?{tab:i}:i||{}),o.self=o.source=e,ht.instances[e.id||e.name||h(ht.instances)]=o,e.TE=o;var u=/^([\s\S]*?)$/,s=function(){return e.disabled},l=function(){return e.readOnly},f=function(){return e.value.replace(/\r/g,"")};return o.value=f(),o.get=function(){return!s()&&vt(f())||null},o.let=function(){return e.value=o.value,o},o.set=function(t){return s()||l()||(e.value=t),o},o.$=function(){return new ht.S(e.selectionStart,e.selectionEnd,f())},o.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=p(f()),n=e.scrollHeight),c(r)&&c(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),o},o.blur=function(){return e.blur(),o},o.select=function(){if(s()||l())return e.focus(),o;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i,c,a,u,f=p(r),d=o.$(),v=d.start,h=d.end;if(i=w.pageXOffset||E.scrollLeft||x.scrollLeft,c=w.pageYOffset||E.scrollTop||x.scrollTop,a=e.scrollLeft,u=e.scrollTop,0===f)r[0]=v,r[1]=h;else if(1===f){if(!0===r[0])return e.focus(),e.select(),o;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=a,e.scrollTop=u,w.scroll(i,c),o},o.match=function(e,n){var i=o.$(),c=i.after,a=i.before,u=i.value;if(t(e)){var s=[a.match(e[0]),u.match(e[1]),c.match(e[2])];return r(n)?n.call(o,s[0]||[],s[1]||[],s[2]||[]):[!!s[0],!!s[1],!!s[2]]}var l=u.match(e);return r(n)?n.call(o,l||[]):!!l},o.replace=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return-1===r?c=c.replace(e,t):1===r?i=i.replace(e,t):a=a.replace(e,t),o.set(c+a+i).select(c=p(c),c+p(a))},o.insert=function(e,t,r){var n=u;return r&&o.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),o.replace(n,e,t)},o.wrap=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return r?o.replace(u,e+"$1"+t):o.set(c+e+a+t+i).select(c=p(c+e),c+p(a))},o.peel=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;e=ot(e),t=ot(t);var u=ct(e+"$",""),s=ct("^"+t,"");return r?o.replace(ct("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):u.test(c)&&s.test(i)?(c=c.replace(u,""),i=i.replace(s,""),o.set(c+a+i).select(c=p(c),c+p(a))):o.select()},o.pull=function(e,t){void 0===t&&(t=!0);var r=o.$(),n=r.length,a=r.value;return e=ot(c(e)?e:i.tab),n?t?o.replace(ct("^"+e,"gm"),""):o.insert(a.split("\n").map((function(t){return ct("^("+e+")*$","").test(t)?t:t.replace(ct("^"+e,""),"")})).join("\n")):o.replace(ct(e+"$",""),"",-1)},o.push=function(e,t){void 0===t&&(t=!1);var r=o.$().length;return e=c(e)?e:i.tab,r?o.replace(ct("^"+(t?"":"(?!$)"),"gm"),e):o.insert(e,-1)},o.trim=function(e,t,r,n,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var c=o.$(),a=c.before,u=c.value,s=c.after,l=vt(a,1),f=vt(s,-1);return a=!1!==e?vt(a,1)+(l||!i?e:""):a,s=!1!==t?(f||!i?t:"")+vt(s,-1):s,!1!==r&&(u=vt(u,-1)),!1!==n&&(u=vt(u,1)),o.set(a+u+s).select(a=p(a),a+p(u))},o.pop=function(){return e.TE?(delete e.TE,o):o},o.state=i,o}ht.esc=ot,ht.instances={},ht.state={tab:"\t"},ht.S=function(e,t,r){var n=this,i=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=p(i),n.start=e,n.value=i,n.toString=function(){return i}},ht.version="3.3.11",ht.x=at;var gt={_history:[],_historyState:-1,history:function(e){var t=this;return c(e)?c(t._history[e])?t._history[e]:null:t._history},loss:function(e){var t,r=this;return!0===e?(r._history=[],r._historyState=-1,[]):(t=r._history.splice(c(e)?e:r._historyState,1),r._historyState=d(r._historyState-1,[-1]),t)},record:function(e){var t=this,r=t.$(),n=r.end,i=r.start,o=t._history[t._historyState]||[],a=[t.self.value,i,n];return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]||(++t._historyState,t._history[c(e)?e:t._historyState]=a),t},redo:function(){var e,t=this;return t._historyState=d(t._historyState+1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])},undo:function(){var e,t=this;return t._historyState=d(t._historyState-1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])}};function yt(e,t){return new Promise((function(r,n){var i=w[e].apply(w,t);return i?r(i):n(i)}))}var mt={source:{pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},type:null}};["alert","confirm","prompt"].forEach((function(e){mt.source[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(e,r)}}));var bt={toggle:function(e,r,n,i){void 0===i&&(i=!1),r||""===r||(r=e);var o=this,c=o.$(),u=c.after,s=c.before,l=c.value,f=p(r),d=p(e);return n&&r===l.slice(-f)&&e===l.slice(0,d)||r===u.slice(0,f)&&e===s.slice(-d)?o.peel(e,r,n):(!1!==i&&(a(i)?i=[i,i]:t(i)||(i=["",""]),isSet(i[1])||(i[1]=i[0]),o.trim(i[0],i[1])),o.wrap(e,r,n))}};function kt(t,r){var n,i,o=r.state.source.tab||r.state.tab||"\t",c=r.state.source.pairs||{},a=function(e){return Object.values(e)}(c),u=t.key,s=t.queue,l=t+"";if(s.Alt||s.Control)return!0;if(" "===l){var f=r.$(),p=f.after,d=f.before,v=f.value;return n=c[i=d.slice(-1)],!(!v&&n&&i&&n===p[0])||(r.wrap(" "," "),!1)}if("Enter"===l){var h=r.$(),g=h.after,y=h.before,m=h.value,b=y.split("\n").pop().match(/^(\s+)/),k=b&&b[1]||"";if(!m){if(g&&y&&(n=c[i=y.slice(-1)])&&n===g[0])return r.wrap("\n"+k+(i!==n?o:""),"\n"+k).record(),!1;if(k)return r.insert("\n"+k,-1).record(),!1}return!0}if("Backspace"===l){var w=r.$(),x=w.after,E=w.before,$=w.value;x.split("\n")[0];var A=E.split("\n").pop(),L=A.match(/^(\s+)/),T=L&&L[1]||"";return n=c[i=E.slice(-1)],"\\"===i?!0:$?!(x&&E&&n&&n===x[0]&&!E.endsWith("\\"+i))||(r.record().peel(i,n).record(),!1):(n=c[i=E.trim().slice(-1)])&&i&&(x.startsWith(" "+n)&&E.endsWith(i+" ")||x.startsWith("\n"+T+n)&&E.endsWith(i+"\n"+T))?(r.trim("","").record(),!1):A.endsWith(o)?(r.pull(o).record(),!1):!(x&&E&&!E.endsWith("\\"+i)&&n===x[0]&&i===E.slice(-1))||(r.peel(i,n).record(),!1)}var K=r.$(),_=K.after,S=K.before,P=K.start,H=K.value;if("\\"===(i=S.slice(-1)))return!0;if(n=e(_[0],a)?_[0]:c[i],!H&&_&&S&&n&&u===n)return r.select(P+1).record(),!1;for(i in c){if(n=c[i],u===i&&n)return r.wrap(i,n).record(),!1;if(u===n){if(H)return r.record().wrap(i,n).record(),!1;break}}return!0}function wt(e,t){var r=t.state.source.tab||t.state.tab||"\t";e.key,e.queue;var n=e+"";return"Control-]"===n?(t.push(r).record(),!1):"Control-["!==n||(t.pull(r).record(),!1)}function xt(e,t){e.key;var r=e.queue;if(r.Control&&r.Enter){var n=t.$(),i=n.after,o=n.before,c=n.end,a=n.start,u=n.value,s=i.split("\n").shift(),l=o.split("\n").pop(),f=l.match(/^(\s+)/),d=f&&f[1]||"";if(o||i)return r.Shift?(t.select(a-p(l)).wrap(d,"\n").insert(u).record(),!1):(t.select(c+p(s)).wrap("\n"+d,"").insert(u).record(),!1)}return!0}function Et(e,t){var r=e+"";return"Control-y"===r?(t.redo(),!1):"Control-z"!==r||(t.undo(),!1)}function $t(t,r){t.key;var n=t+"";if(!t.queue.Control)return!0;var i,o,c,a=r.$(),u=a.after,s=a.before,l=a.end,f=a.start,d=a.value,v=r.state.source.pairs||{},h=[];if(d){for(i in v)(o=v[i])&&h.push("(?:\\"+i+"(?:\\\\.|[^\\"+i+(o!==i?"\\"+o:"")+"])*\\"+o+")");if(h.push("\\w+"),h.push("\\s+"),h.push("[\\s\\S]"),"Control-ArrowLeft"===n)return(c=s.match(ct("("+h.join("|")+")$","")))?(r.insert("").select(f-p(c[0])).insert(d),r.record(),!1):(r.select(),!1);if("Control-ArrowRight"===n)return(c=u.match(ct("^("+h.join("|")+")","")))?(r.insert("").select(l+p(c[0])-p(d)).insert(d),r.record(),!1):(r.select(),!1)}var g=u.split("\n").shift(),y=s.split("\n").pop(),m=y.match(/^(\s+)/);if(m&&m[1],l+=p(g),f-=p(y),d=y+d+g,"Control-ArrowUp"===n){if(!e("\n",s))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"$2",1),r.replace(/(^|\n)([^\n]*?)$/,"",-1);var b=r.$();return s=b.before,f=b.start,y=s.split("\n").pop(),r.select(f-=p(y)).wrap(d,"\n"),r.select(f,f+p(d)),r.record(),!1}if("Control-ArrowDown"===n){if(!e("\n",u))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"",1),r.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var k=r.$();return u=k.after,l=k.end,g=u.split("\n").shift(),r.select(l+=p(g)).wrap("\n",d),l+=1,r.select(l,l+p(d)),r.record(),!1}return!0}var At=Xe((function(e){return e.record()}),100);var Lt=mt,Tt=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,l=p(i);s<l;++s)for(var f in i[s])if(c(u[f]))if(t(u[f])&&t(i[s][f])){u[f]=[].concat(u[f]);for(var d=0,v=p(i[s][f]);d<v;++d)e(i[s][f][d],u[f])||u[f].push(i[s][f][d])}else o(u[f])&&o(i[s][f])?u[f]=r({},u[f],i[s][f]):u[f]=i[s][f];else u[f]=i[s][f];return u},Kt=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},_t=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},St="[\\w:.-]+",Pt=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},Ht=function(e){return"</("+e+")>"},qt="(?:\x3c!--([\\s\\S](?!--\x3e)*)--\x3e|<!((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)>|"+Ht(St)+"|<\\?((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)\\?>|"+Pt(St)+"|"+function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?/?>"}(St)+")",Ct={};function Rt(e){if(!e)return"";e=g(e).sort().reduce((function(t,r){return t[r]=e[r],t}),{});var t,r,n="";for(t in e)!1!==(r=e[t])&&null!==r&&(n+=" "+t,!0!==r&&(n+='="'+Kt(_t(r))+'"'));return n}function jt(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}function Mt(e,t){var r=t.state,n=r.sourceXML.tab||r.tab||"\t",i=e.key,o=e.queue,c=e+"";if(o.Alt||o.Control)return!0;if(["-",">","/","?"," "].includes(i)){var a=t.$(),u=a.after,s=a.before,l=a.value,f=a.start;if("-"===i&&!l&&"<!-"===s.slice(-3))return t.wrap("- "," --"+(">"===u[0]?"":">")).record(),!1;if(">"===i||"/"===i){var d=ct(Pt(St)+"$","").exec(s+">");if(!l&&d)return"/"===i?">"===u[0]?(t.trim("",!1).insert(" /",-1).select(t.$().start+1).record(),!1):(t.trim("",!1).insert(" />",-1).record(),!1):(u.startsWith("></"+d[1]+">")?t.select(f+1).record():u.startsWith("</"+d[1]+">")?t.insert(">",-1).record():t.wrap(">","</"+d[1]+(">"===u[0]?"":">")).record(),!1)}if("?"===i&&!l&&"<"===s.slice(-1))return t.wrap("?","?"+(">"===u[0]?"":">")).record(),!1;if(" "===c&&!l&&("--\x3e"===u.slice(0,3)&&"\x3c!--"===s.slice(-4)||"?>"===u.slice(0,2)&&"<?"===s.slice(0,2)&&/<\?\S*$/.test(s)))return t.wrap(" "," ").record(),!1}if("ArrowLeft"===c){var v=t.$(),h=v.before,g=v.start;if(!v.value){var y=ct(qt+"$","").exec(h);if(y)return t.select(g-p(y[0]),g),!1}}if("ArrowRight"===c){var m=t.$(),b=m.after,k=m.start;if(!m.value){var w=ct("^"+qt,"").exec(b);if(w)return t.select(k,k+p(w[0])),!1}}if("Enter"===c){var x=t.$(),E=x.after,$=x.before,A=x.value,L=$.split("\n").pop().match(/^(\s+)/),T=L&&L[1]||"",K=$.match(ct(Pt(St)+"$",""));if(!A){if(/^[ \t]*-->/.test(E)&&/<!--[ \t]*$/.test($)||/^[ \t]*\?>/.test(E)&&/<\?\S*[ \t]*$/.test($))return t.trim().wrap("\n"+T,"\n"+T).record(),!1;if(K)return E.startsWith("</"+K[1]+">")?t.record().trim().wrap("\n"+T+n,"\n"+T).record():t.record().wrap("\n"+T+n,"\n"+T+"</"+K[1]+">").record(),!1}}if("Backspace"===c){var _=t.$(),S=_.after,P=_.before;if(!_.value){if("\x3c!--"===P.slice(-4))return t.replace(/<!--$/,"",-1),"--\x3e"===S.slice(0,3)&&t.replace(/^-->/,"",1),t.record(),!1;if(/^\s+-->/.test(S)&&/<!--\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;if(/<\?\S*$/.test(P))return t.replace(/<\?\S*$/,"",-1),"?>"===S.slice(0,2)&&t.replace(/^\?>/,"",1),t.record(),!1;if(/^\s+\?>/.test(S)&&/<\?\S*\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;var H=ct(qt+"$",""),q=H.exec(P);if(q){if(" />"===P.slice(-3))return t.replace(/ \/>$/,"/>",-1).record(),!1;if("/>"===P.slice(-2))return t.replace(/\/>$/,">",-1).record(),!1;t.replace(H,"",-1);var C=q[0].slice(1).split(/\s+|>/)[0];return q[0]&&"/"!==q[0][1]&&S.startsWith("</"+C+">")&&t.replace(ct("^</"+C+">",""),"",1),t.record(),!1}if(ct(Pt(St)+"\\n(?:"+ot(n)+")?$","").test(P)&&ct("^\\s*"+Ht(St),"").test(S))return t.trim().record(),!1}}if("Delete"===c){var R=t.$(),j=R.after;if(!R.value){if("--\x3e"===j.slice(0,3))return t.replace(/^-->/,"",1).record(),!1;if("?>"===j.slice(0,2))return t.replace(/^\?>/,"",1).record(),!1;var M=ct("^"+qt,"");if(M.exec(j))return t.replace(M,"",1).record(),!1}}return!0}Ct.insert=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);return!1!==(n=jt(n))&&this.trim(n[0],""),this.insert("<"+e+Rt(r)+(!1!==t?">"+t+"</"+e+">":" />")+(!1!==n?n[1]:""),-1,!0)},Ct.toggle=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$(),c=o.after,a=o.before,u=o.value,s=Pt(e),l=Ht(e),f=ct(s+"$",""),p=ct("^"+l,""),d=f.test(a),v=p.test(c);return v&&d?i.replace(p,"",1).replace(f,"",-1):(f=ct("^"+s,""),p=ct(l+"$",""),d=f.test(u),(v=p.test(u))&&d&&i.insert(u=u.replace(p,"").replace(f,"")),!u&&t&&i.insert(t),!1!==(n=jt(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+Rt(r)+">","</"+e+">"))},Ct.wrap=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$();return o.after,o.before,!o.value&&t&&i.insert(t),!1!==(n=jt(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+Rt(r)+">","</"+e+">")};var Ot={source:{type:"XML"},sourceXML:{}},Dt=le.protocol,Ut=Ct.toggle,Wt="[\\w:.-]+",Nt=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},zt=function(e){return"</("+e+")>"};function Bt(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}var It={};It.blocks=function(){var e=this;return e.record(),function(e){var t=/<(?:h([1-6])|p)(\s[^>]*)?>$/,r=/^<\/(?:h[1-6]|p)>/;e.match([t,/.*/,r],(function(n,i,o){var c=this,a=+(n[1]||0),u=n[2]||"",s=e.state.sourceHTML.elements||{},l=n[0]?s[n[0].slice(1,-1).split(/\s/)[0]]:["","",{}];!u&&l[2]&&(u=Rt(l[2])),c.replace(t,"",-1),c.replace(/\n+/g," "),c.replace(r,"",1);var f=l[3]||s.h1[3];!1!==(f=Bt(f))&&c.trim(f[0],f[1]),a?++a>6?(c.wrap("<"+s.p[0]+(u||Rt(s.p[2]))+">","</"+s.p[0]+">"),i[0]&&i[0]!==s.h6[1]||c.insert(s.p[1])):(c.wrap("<"+s["h"+a][0]+(u||Rt(s["h"+a][2]))+">","</"+s["h"+a][0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s["h"+a][1])):(c.wrap("<"+s.h1[0]+(u||Rt(s.h1[2]))+">","</"+s.h1[0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s.h1[1]))}))}(e),e.record(),!1},It.bold=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ut.apply(this,e.b),!1},It.code=function(){var e=this;return e.record(),function(e){var t=/<(?:pre|code)(?:\s[^>]*)?>(?:\s*<code(?:\s[^>]*)?>)?$/,r=/^(?:<\/code>\s*)?<\/(?:pre|code)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state.sourceHTML.elements;a.replace(t,"",-1),a.replace(r,"",1),o[0]?/^(?:<\/code>\s*)?<\/pre>/.test(o[0])?(!1!==(c=Bt(c=u[""][3]))&&a.trim(c[0],c[1]),a.insert(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(i[0]))):o[0].slice(0,7)==="</"+u.code[0]+">"&&(!1!==(c=Bt(c=u.pre[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.pre[0]+Rt(u.pre[2])+"><"+u.code[0]+Rt(u.code[2])+">","</"+u.code[0]+"></"+u.pre[0]+">")):(!1!==(c=Bt(c=u.code[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.code[0]+Rt(u.code[2])+">","</"+u.code[0]+">").insert(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(i[0]||u.code[1])))}))}(e),e.record(),!1},It.image=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$(),o=i.after,c=i.before,a=i.value,u=n.state,s=u.sourceHTML.elements||{},l=u.sourceHTML.tab||u.source.tab||u.tab||"\t",f=c.split("\n").pop().match(/^(\s+)/),p=f&&f[1]||"",d=u.source.prompt;return r(d)&&d(e,a&&/^https?:\/\/\S+$/.test(a)?a:t||Dt+"//").then((function(e){if(e){var t=s.img;a&&(t[2].alt=a,n.record());var r=t[3]||!1;!1!==(r=Bt(r))&&n.trim(r[0],""),t[2].src=e,o&&"\n"!==o[0]||c&&"\n"!==c.slice(-1)?n.insert("<"+t[0]+Rt(t[2])+">"+(!1!==r?r[1]:""),-1,!0):(!1!==(r=Bt(r=s.figure[3]||!1))&&n.trim(r[0],r[1]),n.insert(""),n.wrap(p+"<"+s.figure[0]+Rt(s.figure[2])+">\n"+p+l,p+"\n</"+s.figure[0]+">"),n.insert("<"+t[0]+Rt(t[2])+">\n"+p+l,-1),n.wrap("<"+s.figcaption[0]+Rt(s.figcaption[2])+">","</"+s.figcaption[0]+">").insert(s.figcaption[1]))}else n.focus()})),n.record(),!1},It.italic=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ut.apply(this,e.i),!1},It.link=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$().value,o=n.state,c=o.sourceHTML.elements||{},a=o.source.prompt;return r(a)&&a(e,i&&/^https?:\/\/\S+$/.test(i)?i:t||Dt+"//").then((function(e){if(e){var t=c.a;i&&n.record(),t[2].href=e;var r={};/[.\/?&#]/.test(e[0])||/^(data|javascript|mailto):/.test(e)||-1===e.indexOf("://")||(r.rel="nofollow",r.target="_blank");var o=Bt(t[3]||!1);!1!==o||i||(o=[" "," "]),Ut.call(n,t[0],t[1],Tt(r,t[2]),o)}else n.focus()})),n.record(),!1},It.quote=function(){var e=this;return e.record(),function(e){var t=/<(blockquote|q)(?:\s[^>]*)?>\s*$/,r=/^\s*<\/(blockquote|q)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state,s=u.sourceHTML.tab||u.source.tab||u.tab||"\t",l=e.state.sourceHTML.elements||{};a.replace(t,"",-1),a.replace(r,"",1),o[0]?l.blockquote[0]===o[1]?!1!==(c=Bt(l[""][3]))&&a.trim(c[0],c[1]):l.q[0]===o[1]&&(!1!==(c=Bt(l.blockquote[3]))&&a.trim(c[0],c[1]),a.wrap("<"+l.blockquote[0]+Rt(l.blockquote[2])+">\n","\n</"+l.blockquote[0]+">").insert(i[0]||l.blockquote[1]),a.replace(ct("(^|\\n)"),"$1"+s)):(!1!==(c=Bt(l.q[3]))&&a.trim(c[0],c[1]),a.wrap("<"+l.q[0]+Rt(l.q[2])+">","</"+l.q[0]+">").insert(i[0]||l.q[1]),a.replace(ct("(^|\\n)"+s),"$1"))}))}(e),e.record(),!1},It.underline=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ut.apply(this,e.u),!1};var Xt={source:{type:"HTML"},sourceHTML:{elements:{"":["","text goes hereâ€¦",{},""],a:["a","link text goes hereâ€¦",{}],area:["area",!1,{}],b:["strong","text goes hereâ€¦",{}],base:["base",!1,{href:""},"\n"],blockquote:["blockquote","",{},"\n"],br:["br",!1,{},["","\n"]],button:["button","text goes hereâ€¦",{name:"",type:"submit"}," "],caption:["caption","caption goes hereâ€¦",{},"\n"],code:["code","code goes hereâ€¦",{}," "],col:["col",!1,{},"\n"],em:["em","text goes hereâ€¦",{}],figcaption:["figcaption","caption goes hereâ€¦",{},"\n"],figure:["figure","",{},"\n"],h1:["h1","title goes hereâ€¦",{},"\n"],h2:["h2","title goes hereâ€¦",{},"\n"],h3:["h3","title goes hereâ€¦",{},"\n"],h4:["h4","title goes hereâ€¦",{},"\n"],h5:["h5","title goes hereâ€¦",{},"\n"],h6:["h6","title goes hereâ€¦",{},"\n"],hr:["hr",!1,{},"\n"],i:["em","text goes hereâ€¦",{}],img:["img",!1,{alt:"",src:""}," "],input:["input",!1,{name:"",type:"text"}," "],li:["li","list item goes hereâ€¦",{},"\n"],link:["link",!1,{href:""},"\n"],meta:["meta",!1,{},"\n"],ol:["ol","",{},"\n"],option:["option","option goes hereâ€¦",{},"\n"],p:["p","paragraph goes hereâ€¦",{},"\n"],param:["param",!1,{name:""},"\n"],pre:["pre","text goes hereâ€¦",{},"\n"],q:["q","quote goes hereâ€¦",{}," "],script:["script","",{},"\n"],select:["select","",{name:""}," "],source:["source",!1,{src:""},"\n"],strong:["strong","text goes hereâ€¦",{}],style:["style","",{},"\n"],td:["td","data goes hereâ€¦",{},"\n"],textarea:["textarea","text goes hereâ€¦",{name:""}," "],th:["th","title goes hereâ€¦",{},"\n"],tr:["tr","",{},"\n"],track:["track",!1,{},"\n"],u:["u","text goes hereâ€¦",{}],ul:["ul","",{},"\n"],wbr:["wbr",!1,{},["","\n"]]}}};function Vt(e){this.K.pull()}function Ft(e){this.K.pull()}function Jt(e){var t,r,n=this.TE,i=this.K,o=e.key,c=n.state.source.type;if(he(e),i.push(o),t=i.test())!1===(r=i.fire(t))?ve(e):null===r&&console.error("Unknown command:",t);else{if("HTML"===c)return void(function(e,t){var r=t.state,n=r.sourceHTML.tab||r.source.tab||r.tab||"\t",i=r.sourceHTML.elements||{},o=e.key,c=e.queue;if(c.Control){var a=t.$(),u=a.after,s=a.before,l=a.end,f=a.start;a.value;var d=u.split("\n").shift(),v=s.split("\n").pop(),h=v.match(/^(\s+)/),g=h&&h[1]||"";if("Enter"===o){var y=d.match(ct(zt(Wt)+"\\s*$","")),m=i[y&&y[1]||"p"]||i.p;return m[3]=["\n"+g,"\n"+g],t.select(c.Shift?f-p(v):l+p(d)),Ut.apply(t,m),t.record(),!1}}if(c.Alt||c.Control)return!0;if(">"===o){var b,k=t.$(),w=k.after,x=k.before,E=k.end,$=(x.split("\n").pop()+">").match(ct(Nt(Wt)+"$","")),A=i[b=$&&$[1]||""];return!b||(A?!1!==A[1]?(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1).insert(A[1])):">"===w[0]?t.insert(" /",-1).select(E+3):t.insert(" />",-1):(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1)),t.record(),!1)}if("Enter"===o){var L,T,K=t.$(),_=K.after,S=K.before,P=K.value,H=_.split("\n").shift(),q=S.split("\n").pop(),C=q.match(/^(\s+)/),R=C&&C[1]||"",j=["li","option","p","td","th"],M=["script","style"];if(L=q.match(ct(Nt(Wt)+"$",""))){var O=i[L[1]];if(O&&!1===O[1])return t.insert("\n"+R,-1).record(),!1}if(_&&S){for(var D=0,U=p(j);D<U;++D)if(ct("^"+zt(T=j[D]),"").test(H)&&(L=q.match(ct("^\\s*"+Nt(T),""))))return L[0]===q?(i[T]&&P&&i[T][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):Ut.call(t,T),t.record(),!1):(t.insert("</"+T+">\n"+R+"<"+T+(L[2]||"")+">",-1).insert(i[T]&&i[T][1]||"").record(),!1);for(var W=0,N=p(M);W<N;++W)if(ct("^"+zt(T=M[W]),"").test(H)&&ct(Nt(T)+"$","").test(q))return t.wrap("\n"+R,"\n"+R).insert(i[T]&&i[T][1]||"").record(),!1;for(var z=1;z<7;++z)if(H.startsWith("</"+i["h"+z][0]+">")&&q.match(ct("^\\s*"+Nt(i["h"+z][0]),"")))return i["h"+z]&&P&&i["h"+z][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):t.insert("</"+i["h"+z][0]+">\n"+R+"<"+i.p[0]+">",-1).replace(ct("^"+zt(i["h"+z][0])),"</"+i.p[0]+">",1).insert(i.p[1]),t.record(),!1}}return!0}(i,n)&&Mt(i,n)&&kt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)||ve(e));if("XML"===c)return void(Mt(i,n)&&kt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)||ve(e));kt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)||ve(e)}}function Yt(e){var t=this.TE,r=this.K,n=e.key;!function(e,t){At(t)}(0,t),r.pull(n)}function Gt(t){var r=this.TE;!function(t,r){t.key,t.queue.Control||w.setTimeout((function(){var t=r.$(),n=t.after,i=t.before,o=t.value;if(!o)for(var c,a,u=qt.split("([\\w:.-]+)").join("((?:[\\w:.-]|\ufeff)+)"),s=ct(u),l=i+o+"\ufeff"+n;c=s.exec(l);)if(e("\ufeff",c[0])){r.select(a=c.index,a+p(c[0])-1);break}}),1)}(this.K,r)}function Qt(e){var t,r;for(var n in ht.instances)(t=ht.instances[n]).loss().pop(),delete t.self.K,delete ht.instances[n],r=t.self,de("blur",r,Vt),de("input",r,Ft),de("keydown",r,Jt),de("keyup",r,Yt),de("mousedown",r,Gt),de("touchstart",r,Gt);var i,o,c,a,u=S(".lot\\:field.type\\:source textarea");u&&p(u)&&u.forEach((function(e){var t;i=new ht(e,null!=(t=K(e,"state"))?t:{}),c=i.state,a=c.source.type,(o=new w.K(i)).keys.Escape=function(){var e=C(this.source,"[tabindex]:not(.not\\:active)");return!e||(e.focus(),!1)},"HTML"===a&&(o.commands=It,o.keys["Control-b"]="bold",o.keys["Control-e"]="code",o.keys["Control-h"]="blocks",o.keys["Control-i"]="italic",o.keys["Control-k"]="link",o.keys["Control-o"]="image",o.keys["Control-q"]="quote",o.keys["Control-u"]="underline"),c.commands=o.commands,c.keys=o.keys,e.K=o,function(e){ye("blur",e,Vt),ye("input",e,Ft),ye("keydown",e,Jt),ye("keyup",e,Yt),ye("mousedown",e,Gt),ye("touchstart",e,Gt),e.TE.record()}(e)})),1===e&&(w._.on("change",Qt),w.TE=ht,["alert","confirm","prompt"].forEach((function(e){w._.dialog[e]&&(ht.state.source[e]=w._.dialog[e])})))}Object.assign(ht.prototype,gt,bt),ht.state=m({},ht.state,Lt,Ot,Xt),delete ht.state.source.type;var Zt=":scope>.lot\\:file[tabindex]:not(.not\\:active),:scope>.lot\\:folder[tabindex]:not(.not\\:active)";function er(e){e&&r(e.focus)&&e.focus()}function tr(){var e=S(".lot\\:files[tabindex],.lot\\:folders[tabindex]");e&&p(e)&&e.forEach((function(e){S(Zt,e).forEach((function(e){ye("keydown",e,rr)})),ye("keydown",e,nr)}))}function rr(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&W(t,"not:active");)t=q(t);for(r=R(i);r&&W(r,"not:active");)r=R(r);"ArrowDown"===o?(er(t),n=!0):"ArrowUp"===o?(er(r),n=!0):"End"===o?(er([].slice.call(S(Zt,C(i))).pop()),n=!0):"Home"===o&&(er(_(Zt,C(i))),n=!0),n&&(ve(e),he(e))}}}function nr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowDown"===n||"Home"===n?(er(_(Zt,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(er([].slice.call(S(Zt,r)).pop()),t=!0);t&&(ve(e),he(e))}}}var ir=":scope>ul>li>a[href]:not(.not\\:active)";function or(e){e&&r(e.focus)&&e.focus()}function cr(){var e=S(".lot\\:links[tabindex]");e&&p(e)&&e.forEach((function(e){var t=S(ir,e);t&&p(t)&&t.forEach((function(e){ye("keydown",e,ar)})),ye("keydown",e,ur)}))}function ar(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(!a&&!u&&!s){if(t=C(o)){for(r=q(t);r&&(W(r,"as:separator")||W(r,"not:active"));)r=q(r);for(n=R(t);n&&(W(n,"as:separator")||W(n,"not:active"));)n=R(n)}"ArrowLeft"===c?(or(n&&A(n)),i=!0):"ArrowRight"===c?(or(r&&A(r)),i=!0):"End"===c?((t=C(o,".lot\\:links[tabindex]"))&&or([].slice.call(S(ir,t)).pop()),i=!0):"Home"===c&&((t=C(o,".lot\\:links[tabindex]"))&&or(_(ir,t)),i=!0)}i&&(ve(e),he(e))}}function ur(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowRight"===n||"Home"===n?(or(_(ir,r)),t=!0):"ArrowLeft"!==n&&"End"!==n||(or([].slice.call(S(ir,r)).pop()),t=!0)),t&&(ve(e),he(e)))}}var sr="a[href]:not(.not\\:active)";function lr(e){e&&r(e.focus)&&e.focus()}function fr(e,t){S(".lot\\:menu[tabindex].is\\:enter").forEach((function(r){e!==r&&(X(C(r),"is:active"),X(R(r),"is:active"),X(r,"is:enter"),t&&G(t,"aria-expanded","false"))}))}function pr(){de("click",k,dr);var e=S(".has\\:menu"),t=S(".lot\\:menu[tabindex] "+sr);e&&p(e)&&(e.forEach((function(e){var t=_(".lot\\:menu[tabindex]",e),r=R(t);t&&r&&(ye("click",r,vr),ye("keydown",r,yr))})),ye("click",k,dr)),t&&p(t)&&t.forEach((function(e){ye("keydown",e,hr)}));var r=S(".lot\\:menu[tabindex]");r&&p(r)&&r.forEach((function(e){ye("keydown",e,gr)}))}function dr(){fr(0)}function vr(e){if(!e.defaultPrevented){var t=this,r=q(t);fr(r,t),w.setTimeout((function(){se(r,"is:enter"),se(C(t),"is:active"),se(t,"is:active"),G(t,"aria-expanded",W(t,"is:active")?"true":"false")}),1),ve(e),he(e)}}function hr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key;if(r=C(c)){for(n=q(r);n&&(W(n,"as:separator")||W(n,"not:active"));)n=q(n);for(i=R(r);i&&(W(i,"as:separator")||W(i,"not:active"));)i=R(i)}"ArrowDown"===a?(lr(n&&A(n)),o=!0):"ArrowLeft"===a||"Escape"===a||"Tab"===a?((r=C(c,".lot\\:menu[tabindex].is\\:enter"))?(X(C(c),"is:active"),X(r,"is:enter"),X(c,"is:active"),"Tab"!==a&&lr(R(r))):"Escape"===a&&lr(C(c,".lot\\:menu[tabindex]")),o="Tab"!==a):"ArrowRight"===a?((n=q(c))&&W(n,"lot:menu")&&(Z(C(c),"is:active"),Z(n,"is:enter"),Z(c,"is:active"),w.setTimeout((function(){lr(_(sr,n))}),1)),o=!0):"ArrowUp"===a?((t=i&&A(i))?lr(t):(t=C(c,".lot\\:menu[tabindex].is\\:enter"))&&(t=R(t))&&(pe("click",t),lr(t)),o=!0):"End"===a?((r=C(c,".lot\\:menu[tabindex]"))&&lr([].slice.call(S(sr,r)).pop()),o=!0):"Home"===a&&((r=C(c,".lot\\:menu[tabindex]"))&&lr(_(sr,r)),o=!0),o&&(ve(e),he(e))}}function gr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(lr(_(sr,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(lr([].slice.call(S(sr,r)).pop()),t=!0)),t&&(ve(e),he(e)))}}function yr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=q(r),o=C(r);i&&o&&W(i,"lot:menu")&&(" "===n||"Enter"===n||"Tab"===n?"Tab"===n?W(i,"is:enter")&&pe("click",r):(pe("click",r),t=!0):"ArrowDown"===n&&(W(i,"is:enter")||pe("click",r),w.setTimeout((function(){lr(_(sr,i))}),1),t=!0)),t&&(ve(e),he(e))}}var mr=":scope>.lot\\:page[tabindex]:not(.not\\:active)";function br(e){e&&r(e.focus)&&e.focus()}function kr(){var e=S(".lot\\:pages[tabindex]");e&&p(e)&&e.forEach((function(e){S(mr,e).forEach((function(e){ye("keydown",e,wr)})),ye("keydown",e,xr)}))}function wr(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=q(i);t&&W(t,"not:active");)t=q(t);for(r=R(i);r&&W(r,"not:active");)r=R(r);"ArrowDown"===o?(br(t),n=!0):"ArrowUp"===o?(br(r),n=!0):"End"===o?(br([].slice.call(S(mr,C(i))).pop()),n=!0):"Home"===o&&(br(_(mr,C(i))),n=!0),n&&(ve(e),he(e))}}}function xr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(br(_(mr,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(br([].slice.call(S(mr,r)).pop()),t=!0)),t&&(ve(e),he(e)))}}var Er='a[target^="stack:"]:not(.not\\:active)';function $r(e){e&&r(e.focus)&&e.focus()}function Ar(){var e=S(".lot\\:stacks[tabindex]");e&&p(e)&&e.forEach((function(e){var t,r,n=[].slice.call(L(e)),i=re("input");function o(e){var o,c=this,a=C(C(c)),u=C(a,".lot\\:stacks");W(a,"has:link")||(n.forEach((function(e){e!==a&&(X(e,"is:current"),X(_('a[target^="stack:"]',e),"is:current"))})),W(a,"can:toggle")?(se(c,"is:current"),se(a,"is:current")):(Z(c,"is:current"),Z(a,"is:current")),o=W(c,"is:current"),i.value=r=o?K(a,"value"):null,se(u,"has:current",o),w._.fire.call(a,"change.stack",[r,t]),ve(e))}i.type="hidden",i.name=t=K(e,"name"),Q(e,i),n.forEach((function(e){var t=_(Er,e);ye("click",t,o),ye("keydown",t,Lr)}));var c=n.find((function(e,t){return 0!==t&&W(e,"is:current")}));c&&(i.value=K(c,"value")),ye("keydown",e,Tr)}))}function Lr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a||"ArrowRight"===a||"PageDown"===a){if(n=C(C(c)))for(r=q(n);r&&W(r,"not:active");)r=q(r);(t=r&&A(r))&&("ArrowRight"===a&&W(C(t),"can:toggle")||pe("click",A(t)),$r(A(t))),o=!0}else if("ArrowUp"===a||"ArrowLeft"===a||"PageUp"===a){if(n=C(C(c)))for(i=R(n);i&&W(i,"not:active");)i=R(i);(t=i&&A(i))&&("ArrowLeft"===a&&W(C(t),"can:toggle")||pe("click",A(t)),$r(A(t))),o=!0}else" "===a||"Enter"===a?(W(C(C(c)),"can:toggle")&&(pe("click",c),$r(c)),o=!0):"End"===a?((n=C(c,".lot\\:stacks[tabindex]"))&&(t=[].slice.call(S(Er,n)).pop())&&(pe("click",t),$r(t)),o=!0):"Home"===a&&((n=C(c,".lot\\:stacks[tabindex]"))&&(t=_(Er,n))&&(pe("click",t),$r(t)),o=!0);o&&(ve(e),he(e))}}function Tr(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=_(Er+".is\\:current",o))&&C(C(t)),"PageDown"===c?((t=(r=t&&q(t))&&_(Er,r))&&(pe("click",t),$r(t)),i=!0):"PageUp"===c&&((t=(n=t&&R(t))&&_(Er,n))&&(pe("click",t),$r(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=_(Er,o))&&(pe("click",t),$r(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(S(Er,o)).pop())&&(pe("click",t),$r(t)),i=!0)}i&&(ve(e),he(e))}}var Kr='a[target^="tab:"]:not(.not\\:active)';function _r(e){e&&r(e.focus)&&e.focus()}function Sr(){var e=S(".lot\\:tabs[tabindex]");e&&p(e)&&e.forEach((function(e){var t,r,n=[].slice.call(L(e)),i=[].slice.call(S(Kr,n.shift())),o=re("input");function c(e){var c,a=this,u=n[a._tabIndex],s=C(a),l=C(s,".lot\\:tabs");W(s,"has:link")||(i.forEach((function(e){if(e!==a){X(C(e),"is:current"),X(e,"is:current"),G(e,"aria-selected","false"),G(e,"tabindex","-1");var t=n[e._tabIndex];t&&X(t,"is:current")}})),W(s,"can:toggle")?(se(s,"is:current"),se(a,"is:current"),G(a,"aria-selected",W(a,"is:current")?"true":"false"),G(a,"tabindex",W(a,"is:current")?"0":"-1")):(Z(s,"is:current"),Z(a,"is:current"),G(a,"aria-selected","true"),G(a,"tabindex","0")),c=W(a,"is:current"),u&&(o.value=r=c?K(a,"value"):null,se(u,"is:current",c),se(l,"has:current",c),w._.fire.call(u,"change.tab",[r,t])),ve(e))}o.type="hidden",o.name=t=K(e,"name"),Q(e,o),i.forEach((function(e,t){e._tabIndex=t,ye("click",e,c),ye("keydown",e,Pr)}));var a=i.find((function(e,t){return 0!==t&&W(C(e),"is:current")}));a&&(o.value=K(a,"value")),ye("keydown",e,Hr)}))}function Pr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a){if(W(c,"can:toggle")&&!W(c,"is:current"))t=c;else{if(n=C(c))for(r=q(n);r&&W(r,"not:active");)r=q(r);t=r&&A(r)}t&&(pe("click",t),_r(t)),o=!0}else if("ArrowLeft"===a||"PageUp"===a){if(n=C(c))for(i=R(n);i&&W(i,"not:active");)i=R(i);(t=i&&A(i))&&(pe("click",t),_r(t)),o=!0}else if("ArrowRight"===a||"PageDown"===a){if(n=C(c))for(r=q(n);r&&W(r,"not:active");)r=q(r);(t=r&&A(r))&&(pe("click",t),_r(t)),o=!0}else if("ArrowUp"===a){if(W(c,"can:toggle")&&W(c,"is:current"))t=c;else{if(n=C(c))for(i=R(n);i&&W(i,"not:active");)i=R(i);t=i&&A(i)}t&&(pe("click",t),_r(t)),o=!0}else" "===a||"Enter"===a?(W(c,"can:toggle")&&(pe("click",c),_r(c)),o=!0):"End"===a?((n=C(c,".lot\\:tabs[tabindex]"))&&(t=[].slice.call(S(Kr,n)).pop())&&(pe("click",t),_r(t)),o=!0):"Home"===a&&((n=C(c,".lot\\:tabs[tabindex]"))&&(t=_(Kr,n))&&(pe("click",t),_r(t)),o=!0);o&&(ve(e),he(e))}}function Hr(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=_(Kr+".is\\:current",o))&&C(t),"PageDown"===c?((t=(r=t&&q(t))&&A(r))&&(pe("click",t),_r(t)),i=!0):"PageUp"===c&&((t=(n=t&&R(t))&&A(n))&&(pe("click",t),_r(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=_(Kr,o))&&(pe("click",t),_r(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(S(Kr,o)).pop())&&(pe("click",t),_r(t)),i=!0)}i&&(ve(e),he(e))}}var qr='a[href]:not([tabindex="-1"]):not(.not\\:active),button:not(:disabled):not([tabindex="-1"]):not(.not\\:active),input:not(:disabled):not([tabindex="-1"]):not(.not\\:active),select:not(:disabled):not([tabindex="-1"]):not(.not\\:active),[tabindex]:not([tabindex="-1"]):not(.not\\:active)';function Cr(e){e&&r(e.focus)&&e.focus()}function Rr(e){e&&r(e.select)&&e.select()}function jr(){var e=S(".lot\\:tasks[tabindex]");e&&p(e)&&e.forEach((function(e){var t=S(qr,e);t&&p(t)&&t.forEach((function(e){ye("keydown",e,Mr)})),ye("keydown",e,Or)}))}function Mr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey,l=e.shiftKey;if(!u&&!s&&!l){for(n=q(c);n&&W(n,"not:active");)n=q(n);for(i=R(c);i&&W(i,"not:active");)i=R(i);"ArrowLeft"===a?(o=!("selectionStart"in c&&0!==c.selectionStart))&&(Cr(i),Rr(i)):"ArrowRight"===a?(o=!("selectionEnd"in c&&c.selectionEnd<p(c.value||"")))&&(Cr(n),Rr(n)):"End"===a?(o=!("selectionEnd"in c&&p(c.value||"")))&&(r=C(c,".lot\\:tasks[tabindex]"))&&(t=[].slice.call(S(qr,r)).pop())&&(Cr(t),Rr(t)):"Home"===a&&(o=!("selectionStart"in c&&p(c.value||"")))&&(r=C(c,".lot\\:tasks[tabindex]"))&&(t=_(qr,r))&&(Cr(t),Rr(t))}o&&(ve(e),he(e))}}function Or(e){if(!e.defaultPrevented){var t,r,n=this,i=e.key,o=e.altKey,c=e.ctrlKey,a=e.shiftKey;n===e.target&&(o||c||a||("ArrowLeft"===i||"End"===i?((t=[].slice.call(S(qr,n)).pop())&&(Cr(t),Rr(t)),r=!0):"ArrowRight"!==i&&"Home"!==i||((t=_(qr,n))&&(Cr(t),Rr(t)),r=!0)),r&&(ve(e),he(e)))}}function Dr(e){void 0===e&&(e={});var n=this;return n.commands={},n.fire=function(e){var i,o,u=n.source;if(r(e))i=e.call(u),o=!0;else if(a(e)&&(e=n.commands[e]))i=e.call(u),o=!0;else if(t(e)){var s=e[1]||[];(e=n.commands[e[0]])&&(i=e.apply(u,s),o=!0)}return o?!c(i)||i:null},n.key=null,n.keys={},n.pull=function(e){return n.key=null,c(e)?(delete n.queue[e],n):(n.queue={},n)},n.push=function(e){return n.queue[n.key=e]=1,n},n.queue={},n.source=e,n.test=function(){var e=n.keys[n.toString()];return!!c(e)&&e},n.toString=function(){return g(n.queue).join("-")},n}let Ur=new Dr(w);ye("blur",w,(e=>Ur.pull())),ye("keydown",w,(e=>{Ur.push(e.key);let t=Ur.test();if(t){let r=Ur.fire(t);!1===r?ve(e):null===r&&console.error("Unknown command:",t)}})),ye("keyup",w,(e=>Ur.pull(e.key)));const Wr={commands:Ur.commands,keys:Ur.keys},{fire:Nr,hooks:zr,off:Br,on:Ir}=Ye(Wr);w.K=Dr,w._=Wr,ye("beforeload",k,(()=>Nr("let"))),ye("load",k,(()=>Nr("get"))),ye("DOMContentLoaded",k,(()=>Nr("set"))),ye("keydown",w,(function(e){if(e.defaultPrevented)return;let t,r,n=e.target,i=e.key,o=e.altKey,c=e.ctrlKey,a=e.shiftKey,u=_(".lot\\:bar a:any-link"),s=(f="get",k.forms[f]||null),l=s&&s.query;var f;!l||"F3"!==i||o||c||a?!u||"F10"!==i||o||c||a?x!==n&&E!==n&&w!==n&&"Escape"===i&&(t=C(C(n),"[tabindex]:not(.not\\:active)"))&&(t.focus(),r=!0):(u.focus(),(t=C(u))&&W(t,"has:menu")&&u.click(),r=!0):(l.focus(),r=!0),r&&ve(e)})),w._.on("change",we),we(),w._.dialog=_e,it(),dt(),Qt(),w._.on("change",tr),tr(),w._.on("change",cr),cr(),w._.on("change",pr),pr(),w._.on("change",kr),kr(),w._.on("change",Ar),Ar(),w._.on("change",Sr),Sr(),w._.on("change",jr),jr()}();