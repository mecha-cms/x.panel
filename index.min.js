!function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&c(t)&&e instanceof t},i=function(e){return"number"==typeof e},o=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},c=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},a=function(e){return"string"==typeof e},u=function(e,t){var r=t.indexOf(e);return-1!==r?r:null},s=function(e){return e.replace(/[-_.](\w)/g,(function(e,t){return f(t)}))},l=function(e){return e.toLowerCase()},f=function(e){return e.toUpperCase()},p=function(e){return e.length},d=function(e,t){return c(t[0])&&e<t[0]?t[0]:c(t[1])&&e>t[1]?t[1]:e},v=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},h=function(e){return p(g(e))},g=function(e){return Object.keys(e)},m=function e(r){if(t(r))return r.map((function(t){return e(t)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(r))return v(r);if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},y=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},b=function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var u=i.shift(),s=0,l=p(i);s<l;++s)for(var f in i[s])if(c(u[f]))if(t(u[f])&&t(i[s][f])){u[f]=[].concat(u[f]);for(var d=0,v=p(i[s][f]);d<v;++d)e(i[s][f][d],u[f])||u[f].push(i[s][f][d])}else o(u[f])&&o(i[s][f])?u[f]=r({},u[f],i[s][f]):u[f]=i[s][f];else u[f]=i[s][f];return u},k=function e(r){if(t(r))return r.map((function(t){return e(r)}));if(o(r)){for(var n in r)r[n]=e(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},w=document,x=window,E=w.body,$=w.documentElement,A=function(e,t,r){if(void 0===r&&(r=!0),!W(e,t))return null;var n=e.getAttribute(t);return r?m(n):n},L=function(e){return e.firstElementChild||null},T=function(e,t){var r=e.children;return i(t)?r[t]||null:r||[]},_=function(e,t){void 0===t&&(t=!0);var r=(D(e,"className")||"").trim();return t?r.split(/\s+/).filter((function(e){return""!==e})):r},K=function(e,t,r){void 0===r&&(r=!0);var n=A(e,"data-"+t,r),i=(n+"").trim();return r&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(n))?i:n},S=function(e,t){return(t||w).querySelector(e)},P=function(e,t){return(t||w).querySelectorAll(e)},H=function(e,t){void 0===t&&(t=!0);var r="innerHTML";if(!B(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null},q=function(e){return l(e&&e.nodeName||"")||null},C=function(e,t){return e["next"+(t?"":"Element")+"Sibling"]||null},R=function(e,t){return t?e.closest(t)||null:e.parentNode||null},M=function(e,t){return e["previous"+(t?"":"Element")+"Sibling"]||null},O=function(e,t,r){void 0===r&&(r=!0);var n=x.getComputedStyle(e).getPropertyValue(t);return r&&(n=m(n)),n||""===n||0===n?n:null},D=function(e,t){return B(e,t)&&e[t]||null},U=function(e,t){void 0===t&&(t=!0);var r="textContent";if(!B(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null},W=function(e,t){return e.hasAttribute(t)},N=function(e,t){return e.classList.contains(t)},z=function(e,t){return null!==R(e,t)},B=function(e,t){return t in e},I=function(e){return e===x},X=function(e,t){return e.removeAttribute(t),e},V=function(e,t){return e.classList.remove(t),e},F=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.remove(t)})),e;if(o(r)){for(var n in r)r[n]&&e.classList.remove(n);return e}return e.className="",e},J=function(e,t){return X(e,"data-"+t)},Y=function(e){var t=R(e);return e.remove(),t},G=function(e,t){return e.style[s(t)]=null,e},Q=function(e,t,r){return!0===r&&(r=t),e.setAttribute(t,k(r)),e},Z=function(e,t){return e.append(t),t},ee=function(e,t){return e.classList.add(t),e},te=function(e,r){if(t(r))return r.forEach((function(t){return e.classList.add(t)})),e;if(o(r))for(var n in r)r[n]?e.classList.add(n):e.classList.remove(n);return e.className=r,e},re=function(e,r,n){return(t(n)||o(n))&&(n=function(e){return JSON.stringify(e)}(n)),Q(e,"data-"+r,n)},ne=function(e,t,r){return e=a(e)?w.createElement(e):e,o(t)&&(r=t,t=!1),a(t)&&ie(e,t),o(r)&&function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?Q(e,n,r):X(e,n)}(e,r),e},ie=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="innerHTML";return B(e,n)&&(e[n]=r?t.trim():t),e},oe=function(e,t){return R(e).insertBefore(t,C(e,!0)),t},ce=function(e,t){return R(e).insertBefore(t,e),t},ae=function(e,t,r){return i(r)&&(r+="px"),e.style[s(t)]=k(r),e},ue=function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?ae(e,n,r):G(e,n);return e},se=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="textContent";return B(e,n)&&(e[n]=r?t.trim():t),e},le=function(e,t,r){return e.classList.toggle(t,r),e},fe=x.location,pe={},de=function(e,t,r,n){t.dispatchEvent(function(e,t,r){return r&&c(pe[e])?pe[e]:pe[e]=new Event(e,t)}(e,r,n))},ve=function(e,t,r){t.removeEventListener(e,r)},he=function(e){return e&&e.preventDefault()},ge=function(e){return e&&e.stopPropagation()},me=function(e,t,r){e.forEach((function(e){return ve(e,t,r)}))},ye=function(e,t,r,n){void 0===n&&(n=!1),t.addEventListener(e,r,n)},be=function(e,t,r,n){void 0===n&&(n=!1),e.forEach((function(e){return ye(e,t,r,n)}))},ke=":scope>[tabindex]:not(.not\\:active)";function we(e){e&&r(e.focus)&&e.focus()}function xe(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowLeft"===n||"End"===n?(we([].slice.call(P(ke,r)).pop()),t=!0):"ArrowRight"!==n&&"Home"!==n||(we(S(ke,r)),t=!0);t&&(he(e),ge(e))}}}function Ee(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=C(i);t&&N(t,"not:active");)t=C(t);for(r=M(i);r&&N(r,"not:active");)r=M(r);"ArrowLeft"===o?(we(r),n=!0):"ArrowRight"===o?(we(t),n=!0):"End"===o?(we([].slice.call(P(ke,R(i))).pop()),n=!0):"Home"===o&&(we(S(ke,R(i))),n=!0),n&&(he(e),ge(e))}}}var $e=ne("dialog"),Ae=ne("form","",{method:"dialog"}),Le=ne("div");function Te(e){var t=this;ve("cancel",t,Te),ve("close",t,_e),ve("submit",t,Ke),t.x(m(t.returnValue)),r(t.c)&&t.c.call(t,t.open)}function _e(e){var t=this;ve("cancel",t,Te),ve("close",t,_e),ve("submit",t,Ke),t.v(m(t.returnValue)),r(t.c)&&t.c.call(t,t.open)}function Ke(e){_e.call(this,e)}function Se(e,t){var i;for(ie(Ae,""),a(e)?(ie(Le,e.trim()),e=Le.childNodes):function(e){return n(e,Node)}(e)&&(e=[e]),e=Array.from(e);i=e.shift();)Z(Ae,i);$e.showModal(),$e.returnValue=null,r(t)&&t.call($e,$e.open);var o=S("[autofocus]",Ae);return o&&(r(o.focus)&&o.focus(),r(o.select)&&o.select()),new Promise((function(e,r){$e.c=t,$e.v=e,$e.x=r,ye("cancel",$e,Te),ye("close",$e,_e),ye("submit",$e,Ke)}))}function Pe(){var e=this,t=R(e.form);t.returnValue=e.value,de("reset"===e.type?"cancel":"close",t),t.open&&t.close()}function He(e){var t,r,n=e.key;"ArrowLeft"===n||"ArrowUp"===n?((r=M(this))&&r.focus(),he(e)):"ArrowDown"!==n&&"ArrowRight"!==n||((t=C(this))&&t.focus(),he(e))}Z(E,$e),Z($e,Ae);var qe=ne("p"),Ce=ne("p","",{role:"group"}),Re=ne("button","OK",{type:"submit",value:"true"});ye("keydown",Re,He),ye("click",Re,Pe),Z(Ce,Re),Se.alert=function(e){return ie(qe,e),Se([qe,Ce])};var je=ne("p"),Me=ne("p","",{role:"group"}),Oe=ne("button","OK",{type:"submit",value:"true"}),De=ne("button","Cancel",{type:"reset",value:"false"});ye("click",De,Pe),ye("click",Oe,Pe),ye("keydown",De,He),ye("keydown",Oe,He),Z(Me,Oe),Z(Me,De),Se.confirm=function(e){return ie(je,e),Se([je,Me])};var Ue=ne("p"),We=ne("input",!1,{autofocus:!0,type:"text"}),Ne=ne("p"),ze=ne("p","",{role:"group"}),Be=ne("button","OK",{type:"submit",value:""}),Ie=ne("button","Cancel",{type:"reset",value:"false"});function Xe(){Be.value=this.value}ye("click",Ie,Pe),ye("click",Be,Pe),ye("input",We,Xe),ye("keydown",Ie,He),ye("keydown",Be,He),ye("keyup",We,Xe),Z(ze,Be),Z(ze,Ie),Z(Ne,We),Se.prompt=function(e,t){return ie(Ue,e),We.value=Be.value=t,Se([Ue,Ne,ze])};var Ve=function(e,t){var r;return function(){var n=arguments,i=this;r&&clearTimeout(r),r=setTimeout((function(){return e.apply(i,n)}),t)}},Fe=function(e,t){return function(){var r=arguments,n=this;setTimeout((function(){return e.apply(n,r)}),t)}},Je=function(e){return I(e)?[e.innerWidth,e.innerHeight]:[e.offsetWidth,e.offsetHeight]},Ye=function(e,t){return e.scrollLeft=t[0],e.scrollTop=t[1],e};function Ge(e){var t={};return e.hooks=t,e.fire=function(r,n){return c(t[r])?(t[r].forEach((function(t){return t.apply(e,n)})),e):e},e.off=function(r,n){if(!c(r))return t={},e;if(c(t[r]))if(c(n)){for(var i=0,o=t[r].length;i<o;++i)if(n===t[r][i]){t[r].splice(i,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,n){return c(t[r])||(t[r]=[]),c(n)&&t[r].push(n),e},e}var Qe="ArrowDown",Ze="ArrowUp",et="Enter",tt="Escape",rt="‌";function nt(e){var t=w.createRange();t.selectNodeContents(e);var r=x.getSelection();r.removeAllRanges(),r.addRange(t)}function it(r,i){void 0===i&&(i={});var o=this;if(!r)return o;if(r.OP)return r.OP;if(!n(o,it))return new it(r,i);var c=Ge(o),a=c.fire;function u(){return[m(s()),o.options]}function s(){if(Ee){for(var e=[],t=0,n=p(Ae);t<n;++t)d(Ae[t])&&e.push(f(Ae[t]));return e}var i=r.value;return""!==i?i:null}function f(e){var t=e.value||U(e);return""!==t?t:null}function d(e){return W(e,"selected")}function g(e){X(e,"selected"),e.selected=!1}function y(e){V(e,F+"selected")}function L(e){Q(e,"selected",!0),e.selected=!0}function K(e){ee(e,F+"selected")}function S(e){e=e||rt,Pe.title=e.replace(/<.*?>/g,""),ie(Pe,e)}function P(e){if(Ee)for(var n,i=function(e){return t(e)?e:[e]}(n),o=0,c=p(Ae);o<c;++o)n=f(Ae[o]),i.includes(m(n))?L(Ae[o]):g(Ae[o]);else r.value=e}c.hooks,o.state=i=b({},it.state,i),o.options={},o.source=r,it.instances[r.id||r.name||h(it.instances)]=o,r.OP=o;var C=i.class,j=C+"__",M=C+"--",D=j+"input",z=j+"option",F=z+"--",G=j+"options",te=j+"value",ce=j+"values",fe=ne(r,{class:j+"source",tabindex:-1}),pe="input"===q(fe)?ne("span","",{class:D}):null,de=pe?r.placeholder:"",ge=ne("span",de),ke=ne("span","",{contenteditable:"",tabindex:0}),we=function(){return fe.disabled},xe=T(fe),Ee=fe.multiple,$e=0,Ae=fe.options,Le=i.parent||w,Te="input"===q(fe)?0:fe.size,_e=fe.title,Ke=s(),Se=ne("div",{class:C,tabindex:!pe&&!we()&&0,title:_e}),Pe=ne("div",rt,{class:ce}),He=fe.list,qe=0,Ce=0,Re=ne("div",{class:G,tabindex:-1}),je=[],Me=!1,Oe=!1;function De(){V(Se,M+"focus"),a("blur",u())}function Ue(){ee(Se,M+"focus"),a("focus",u())}function We(){ee(Se,M+"open"),a("enter",u())}function Ne(){Ee||Te||(V(Se,M+"open"),a("exit",u()))}function ze(){qe=v(O(Se,"border-bottom-width")),Ce=v(O(Se,"border-top-width")),xt(Se)}function Be(e){le(Se,M+"open",e);var t=Xe();return a(t?"enter":"exit",u()),t}function Ie(e,t,r,n){return ne("span",e,{class:te+" "+n,"data-index":t,"data-value":r}).outerHTML}function Xe(){return N(Se,M+"open")}function ot(){(pe?ke:Se).focus()}function ct(e){if(Ae&&!we()){var t,r,n,o=[],c=this,s=c.$,l=Ke;if($e=c.i,Ke=c.v,e&&e.isTrusted&&ot(),he(e),Ee&&(Me||Oe)){!function(e){return N(e,F+"selected")}(c)?(L(s),K(c)):(g(s),y(c));for(var f,v=0,h=p(Ae);v<h;++v)d(Ae[v])&&(t=U(f=je[v]),r=f.i,n=f.v,o.push(Ie(t,r,n,_(f,!1))));return S(o.join("<span>"+i.join+"</span>")),void a("change",u())}t=U(c),r=c.i,n=c.v,t&&pe&&(ie(ge,rt),se(ke,t)),S(Ie(t,r,n,_(c,!1))),pe&&(nt(ke),P(t)),je.forEach((function(e){Ke===e.v?(L(e.$),K(e)):(g(e.$),y(e))})),Ke!==l&&a("change",u())}}function at(e){De()}function ut(e){if(!we()){if($e=fe.selectedIndex,Te)return We();pe?ke.focus():Be()&&ze()}}function st(e){$e=fe.selectedIndex,Ue()}function lt(e){if(Ae){Me=e.ctrlKey,Oe=e.shiftKey;var t=e.key,r=$e,n=je[r],i=function(e){return N(e,F+"disabled")},o=function(e){return ct.call(e)},c=Xe();if(Qe===t){for(;(n=je[++r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),he(e)}else if(Ze===t){for(;(n=je[--r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),he(e)}else if("End"===t){for(r=p(Ae);(n=je[--r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),he(e)}else if(et===t)n&&o(n),Be(),he(e);else if(tt===t)!Te&&Ne();else if("Home"===t){for(r=-1;(n=je[++r])&&(i(n)||n.hidden););n&&(o(n),Be(c)),he(e)}else"Tab"===t&&(!pe&&n&&o(n),!Te&&Ne());Xe()&&!Me&&!Oe&&ze()}}function ft(){Me=Oe=!1}function pt(){var e=U(ke);null!==e&&P(k(e)),De()}function dt(){if(Ae){var e,t,r=U(this);$e=-1,nt(this);for(var n=0,i=p(Ae);n<i;++n)e=Ae[n],t=je[n],r===U(e)?($e=n,L(e),K(t)):(g(e),y(t));Ue(),Be()&&ze()}}Ee&&!Te&&(fe.size=Te=i.size),pe&&He&&(xe=T(He),Ae=He.options,Te=null,Ke&&(ie(ge,rt),se(ke,Ke))),pe&&(Z(pe,ke),Z(pe,ge)),Z(Se,pe||Pe),oe(fe,Se);var vt=Ve((function(t,r,n){var i,o,c=U(t);if(null===c){ie(ge,de),Re.hidden=!1;for(var a=0,u=p(je);a<u;++a)ie(o=je[a],U(o)),o.hidden=!1}else if(ie(ge,rt),n!==(c=l(c))&&Qe!==r&&"ArrowLeft"!==r&&"ArrowRight"!==r&&Ze!==r&&et!==r){for(var s,f=0,d=p(je);f<d;++f)g((o=je[f]).$),y(o),(s=U(o))&&l(s).includes(c)?(!i&&(i=o),ie(o,s.replace(RegExp(c.replace(/[!$^*()+=[]{}|:<>,.?\/-]/g,"\\$&"),"gi"),(function(e){return"<mark>"+e+"</mark>"}))),o.hidden=!1):(ie(o,s),o.hidden=!0);i?($e=i.i,L(i.$),K(i),Re.hidden=!1):Re.hidden=!0,n=c}else{for(var v,h=0,m=0,b=p(je);m<b;++m)o=je[m],v=H(o),e("</mark>",v)&&++h;if(h<=1)for(var k,w=0,x=p(je);w<x;++w)o=je[w],k=U(o),ie(o,k),o.hidden=!1}et!==r&&tt!==r&&"Tab"!==r&&(We(),ze())}),1);function ht(e){var t=this,r=e.key;lt(e),vt(t,r,U(t))}function gt(){ft()}var mt=Fe((function(e,t){var r=U(e);ie(t,null!==r?rt:de),se(e,r),nt(e)}),1);function yt(){mt(ke,ge)}function bt(e){var t=e.target;if(t!==Se)for(;(t=R(t))&&Se!==t;);Se!==t&&Ne()}function kt(){Xe()&&xt(Se,1)}function wt(r,n){if("optgroup"!==q(r)){var i=A(r,"value",!1),c=i,a=U(r),u=r.title,s=ne("a",a,{class:z,title:u||a});i=i||a,s.i=$e,s.$=r,s.v=i,function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?re(e,n,r):J(e,n)}(s,{index:$e,value:c}),o.options[i]=a,r.disabled?ee(s,F+"disabled"):ye("click",s,ct),Z(n,s),je.push(s),""===c&&(i=null),t(Ke)&&e(i,Ke)||i===Ke?(ee(s,F+"selected"),S(Ie(a,$e,c,_(s,!1))),L(r)):g(r),++$e}else{var l=ne("span",{class:z+"-group"+(r.disabled?" "+F+"disabled":"")}),f=T(r);l.title=r.label;for(var d=0,v=p(f);d<v;++d)wt(f[d],l);Z(n,l)}}function xt(e,t){if(!Te){var r=function(e){var t,r,n,i,o,c,a;return I(e)?(i=e.pageXOffset||$.scrollLeft||E.scrollLeft,o=e.pageYOffset||$.scrollTop||E.scrollTop,n=e.innerWidth,t=e.innerHeight):(i=(r=e.getBoundingClientRect()).left,o=r.top,n=r.width,t=r.height,c=r.right,a=r.bottom),[i,o,n,t,c,a]}(e),n=r[0],i=r[1],o=r[2],c=r[3],s=Je(x)[1],l=s-i-c;ue(Re,{bottom:"",left:n,"max-height":l,top:i+c-Ce,width:o}),l<(s-c)/2?(ue(Re,{top:"",bottom:s-i-qe,"max-height":(l=i)+Ce}),V(e,M+"down"),ee(e,M+"up")):(V(e,M+"up"),ee(e,M+"down"))}if(!t){var f=je.find((function(e){return N(e,F+"selected")}));if(f){var p=Je(f)[1],d=Je(Re)[1],v=[(y=f).offsetLeft,y.offsetTop],h=v[0],g=v[1],m=function(e){return[e.scrollLeft,e.scrollTop]}(Re)[1];g<m?Ye(Re,[h,g]):g+p-d>m&&Ye(Re,[h,g+p-d])}}var y;a("fit",u())}be(["resize","scroll"],x,kt),ye("click",Le,bt),ye("focus",fe,ot),ye("click",Se,ut),pe?(ye("blur",ke,pt),ye("focus",ke,dt),ye("keydown",ke,ht),ye("keyup",ke,gt),ye("paste",ke,yt)):(ye("blur",Se,at),ye("focus",Se,st),ye("keydown",Se,lt),ye("keyup",Se,ft));var Et=p(xe);if(Et){Z(Se,Re);for(var $t=0;$t<Et;++$t)wt(xe[$t],Re);if(Te){var At=je[0],Lt=Je(At)[1]*Te;ae(Re,"max-height",Lt)}}return Te&&(ee(Se,M+"down"),ee(Se,M+"open")),o.get=function(e){void 0===e&&(e=!0);var t=s();return e?m(t):t},o.pop=function(){return r.OP?(delete r.OP,me(["resize","scroll"],x,kt),ve("click",Le,bt),ve("focus",fe,ot),V(fe,j+"source"),ve("click",Se,ut),pe?(ve("blur",ke,pt),ve("focus",ke,dt),ve("keydown",ke,ht),ve("keyup",ke,gt),ve("paste",ke,yt)):(ve("blur",Se,at),ve("focus",Se,st),ve("keydown",Se,lt),ve("keyup",Se,ft)),function(e){var t="textContent";B(e,t)&&(e[t]="")}(Se),Y(Se),a("pop",u())):o},o.set=function(e){return Ae?(P(k(e)),je.forEach((function(e,t){var r=Ae[t];le(e,F+"selected",r&&d(r))})),a("change",u()),o):o},o.self=Se,o}function ot(e){for(var t in it.instances)it.instances[t].pop(),delete it.instances[t];var r=P("input[list],select");r&&p(r)&&r.forEach((function(e){var t,r=_(e),n=new it(e,null!=(t=K(e,"state"))?t:{});te(n.self,r)})),1===e&&x._.on("change",ot)}it.instances={},it.state={class:"option-picker",join:", ",parent:null,size:5},it.version="1.3.10",x.OP=it;var ct=function(e,t){return void 0===t&&(t=""),e.replace(at("["+t+ut.replace(/./g,"\\$&")+"]"),"\\$&")},at=function(e,t){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,c(t)?t:"g"))},ut="!$^*()+=[]{}|:<>,.?/-",st="ArrowLeft",lt="Home",ft="Backspace",pt="Tab";function dt(r,o){void 0===o&&(o={});var c=this;if(!r)return c;if(r.TP)return r.TP;if(!n(c,dt))return new dt(r,o);var s=function(){return r.disabled},f=function(){return r.readOnly},d=A(r,"placeholder"),v=A(r,"tabindex"),m=Ge(c);m.hooks;var y=m.fire;c.state=o=b({},dt.state,a(o)?{join:o}:o||{}),c.source=r,dt.instances[r.id||r.name||h(dt.instances)]=c,r.TP=c;var k,E,$,_=o.class,K=_+"__",S=_+"--",P=function(e){var t="form";return B(e,t)&&t===q(e.form)?e.form:R(e,t)}(r),H=ne("div",{class:_,tabindex:!s()&&-1}),j=ne("span",{class:K+"tag "+K+"input"}),O=ne("input",{class:K+"copy",tabindex:-1,type:"text"}),D=ne("span",{contenteditable:!s()&&"true",spellcheck:"false",style:"white-space:pre;"}),W=ne("span"),I=ne("span",{class:K+"tags"}),X=0,J={};function G(e,t){var r=u(e,c.tags);return t&&y("get.tag",[e,r]),i(r)?e:null}function Q(){J={};var e,t=T(I),r=p(t)-1;for(e=0;e<r;++e)N(t[e],K+"tag--selected")&&(J[e]=t[e])}function re(e,t){i(t)?(t=t<0?0:t,c.tags.splice(t,0,e)):c.tags.push(e),r.value=c.tags.join(o.join)}function ie(e,t){var r=ne("span",{class:K+"tag",tabindex:!s()&&!f()&&0,title:e}),n=ne("a",{class:K+"tag-x",href:"",tabindex:-1,target:"_top"});ye("click",n,He),Z(r,n),ye("click",r,Pe),be(["blur","focus"],r,Te),z(I)&&(i(t)&&c.tags[t]?ce(T(I,t),r):ce(j,r))}function ae(t){if(t=t?t.split(o.join):[],z(H))for(var n,i,a;n=M(j);)le(a=n.title),e(a,t)||(i=u(a,c.tags),y("change",[a,i]),y("let.tag",[a,i]));c.tags=[],r.value="";for(var s,l=0,f=o.max;l<f&&t[l];++l)""!==(s=$e(t[l]))&&(ie(s),re(s),y("change",[s,l]),y("set.tag",[s,l]))}function ue(e){var t=u(e,c.tags);i(t)&&t>=0&&(c.tags.splice(t,1),r.value=c.tags.join(o.join))}function le(e){var t,r=u(e,c.tags);if(i(r)&&r>=0&&(t=T(I,r))){ve("click",t,Pe),me(["blur","focus"],t,Te);var n=L(t);n&&(ve("click",n,He),Y(n)),Y(t)}}function fe(e){Y(O),e&&de("",1)}function pe(e){Z(H,O),O.value=c.tags.join(o.join),e&&(O.focus(),O.select())}function de(e,t){if(se(D,e),se(W,e?"":d),t){D.focus();var r=w.createRange(),n=x.getSelection();r.selectNodeContents(D),r.collapse(!1),n.removeAllRanges(),n.addRange(r)}}function ke(e){Ee(e,(function(){V(this,K+"tag--selected")}))}function we(e){Ee(e,(function(){ee(this,K+"tag--selected")}))}function xe(){if(!s()&&!f()){var e=Ae(U(D)).trim(),t=o.pattern;if(t&&e&&!at(t,"").test(e))return y("not.tag",[e,-1]),void de(e,1);if(de(""),e=$e(e))if(G(e))y("has.tag",[e,u(e,c.tags)]);else{ie(e),re(e);var r=p(c.tags);y("change",[e,r]),y("set.tag",[e,r])}}}function Ee(e,t){var r,n=T(I),i=p(n)-1;for(r=0;r<i;++r)e!==n[r]&&t.call(n[r],r)}function $e(e){return Ae(c.f(e)).trim()}function Ae(e){return e=e||"",o.escape.forEach((function(t){e=e.split(t).join("")})),e}function Le(e){"blur"===e.type?(ke(),F(H,[S+"focus",S+"focus-self"])):te(H,[S+"focus",S+"focus-self"])}function Te(e){if(!f()){J={};var t=this,r=e.type,n=t.title,i=c.tags,o=u(n,i),a=K+"tag--";"blur"===r?(!k&&!E||E&&$)&&(ke(t),V(t,a+"selected"),F(H,[S+"focus",S+"focus-tag"])):(ee(t,a+"selected"),te(H,[S+"focus",S+"focus-tag"]),X=o,J[o]=t),y(r+".tag",[n,o])}}function _e(e){var t=c.tags,r=e.type,n=K+"text--";V(H,S+"focus-tag"),"blur"===r?(V(j,n+"focus"),F(H,[S+"focus",S+"focus-input"]),xe()):(ee(j,n+"focus"),te(H,[S+"focus",S+"focus-input"]),ke(j)),y(r,[t,p(t)])}function Ke(e){"blur"===e.type?V(H,S+"focus"):ee(H,S+"focus")}function Se(e){e&&H===e.target&&D.focus();var t=c.tags;y("click",[t,p(t)])}function Pe(){var e=this.title,t=c.tags;y("click.tag",[e,u(e,t)])}function He(e){if(!s()&&!f()){var t=R(this).title,r=u(t,c.tags);le(t),ue(t),de("",1),y("change",[t,r]),y("click.tag",[t,r]),y("let.tag",[t,r])}he(e)}function qe(e){var t=e.type;"copy"===t?Fe((function(){return fe(1)}))():"cut"===t?(!f()&&ae(""),Fe((function(){return fe(1)}))()):"paste"===t&&Fe((function(){!f()&&ae(O.value),fe(1)}))(),Fe((function(){var e=c.tags;y(t,[e,p(e)])}),1)()}function Ce(){ke(),V(H,S+"focus-self")}function Re(){D.focus()}function je(e){if(!s()&&!f()){c.tags;var t,r,n,i,o,a,u=e.key,l=k=e.ctrlKey,d=E=e.shiftKey,v=K+"tag--";if($=pt===u,!l){if(!d&&(ft===u||"Delete"===u)){Q(),a=J;var h=ft===u;for(r in a)le(o=(t=a[r]).title),ue(o);return X=+(g(a)[0]||0),(t=T(I,h?X-1:X))?j===t?de("",1):t.focus():de("",1),void he(e)}if(lt===u)return void((t=T(I,0))&&(t.focus(),he(e)));if("End"===u&&(t=T(I,p(c.tags)-1)))return t.focus(),void he(e);if(st===u){if(t=T(I,X-1)){var m=N(t,v+"selected");return t.focus(),he(e),d?(n=C(t),void(m&&V(n,v+"selected"))):void ke(t)}if(!d)return void ke(T(I,0))}if("ArrowRight"===u&&(t=T(I,X+1))){var y=N(t,v+"selected");return j!==t||d?t.focus():de("",1),he(e),d?(i=M(t),void(y&&V(i,v+"selected"))):void ke(t)}}"a"===u&&(pe(1),we(),Q(),he(e))}}function Me(t){ge(t),f()&&pt!==t.key&&he(t);var r,n=o.escape,i=M(j),a=p(c.tags),u=o.max,s=U(D)||"",l=t.key,v=k=t.ctrlKey,h="Enter"===l;E=t.shiftKey;var g=$=pt===l;if(h&&(l="\n"),g&&(l="\t"),Fe((function(){s=U(D)||"",se(W,s?"":d),e(function(e){var t,r=x.getSelection();if(r.rangeCount>0)return(t=r.getRangeAt(0).cloneRange()).collapse(!0),t.setStart(e,0),(t+"").slice(-1)}(D),n)&&(a<u?xe():(de(""),y("max.tags",[u])),he(t))}))(),""===s&&lt===l&&(r=T(I,0)))return r.focus(),void he(t);if(""===s&&"End"===l&&(r=T(I,p(c.tags)-1)))return r.focus(),void he(t);if(v&&""===s&&"a"===l)return pe(1),we(),Q(),void he(t);if(e(l,n))return a<u?xe():(de(""),y("max.tags",[u])),void he(t);if(!g){if(!v&&h)return Ue()&&P&&P.dispatchEvent(new Event("submit",{cancelable:!0})),void he(t);if(i&&""===s&&!f()){if(ft===l)return le(r=c.tags[a-1]),ue(r),y("change",[r,a-1]),y("let.tag",[r,a-1]),void he(t);if(st===l)return void i.focus()}}}function Oe(){k=E=!1}function De(){Fe((function(){s()||f()||U(D).split(o.join).forEach((function(t){e(t,c.tags)||(ie(t),re(t))})),de("")}))()}function Ue(e){if(!s()){var t=o.min;return xe(),t>0&&p(c.tags)<t?(de("",1),y("min.tags",[t]),void he(e)):1}}return de(""),Z(H,I),Z(j,D),Z(j,W),Z(I,j),ee(r,K+"source"),oe(r,H),ne(r,{tabindex:-1}),ye("blur",H,Ce),ye("click",H,Se),ye("focus",r,Re),ye("keydown",H,je),ye("keydown",D,Me),ye("keyup",H,Oe),ye("paste",D,De),be(["blur","focus"],H,Ke),be(["blur","focus"],O,Le),be(["blur","focus"],D,_e),be(["copy","cut","paste"],O,qe),P&&ye("submit",P,Ue),c.blur=function(){return!s()&&D.blur(),c},c.click=function(){return H.click(),Se(),c},c.f=function(e){return l(e||"").replace(/[^ a-z\d-]/g,"").trim()},c.focus=function(){return s()||de(U(D),1),c},c.get=function(e){return s()?null:G(e,1)},c.input=D,c.let=function(e){if(!s()&&!f()){var r=o.min;if(e)if(t(e))e.forEach((function(e){if(r>0&&p(c.tags)<r)return y("min.tags",[r]),c;le(e),ue(e)}));else{if(r>0&&p(c.tags)<r)return y("min.tags",[r]),c;le(e),ue(e)}else ae("")}return c},c.pop=function(){if(!r.TP)return c;delete r.TP;var e=c.tags;return V(r,K+"source"),ve("blur",H,Ce),ve("click",H,Se),ve("focus",r,Re),ve("keydown",H,je),ve("keydown",D,Me),ve("keyup",H,Oe),ve("paste",D,De),me(["blur","focus"],H,Ke),me(["blur","focus"],O,Le),me(["blur","focus"],D,_e),me(["copy","cut","paste"],O,qe),P&&ve("submit",P,Ue),e.forEach(le),ne(r,{tabindex:v}),Y(H),y("pop",[e])},c.self=H,c.set=function(e,r){if(!e)return c;if(!s()&&!f())if(t(e))ae(e.join(o.join));else{var n=c.tags,i=o.max;G(e)?y("has.tag",[e,u(e,n)]):p(n)<i?(ie(e,r),re(e,r)):y("max.tags",[i])}return c},c.source=c.output=r,c.state=o,c.tags=[],ae(r.value),c}function vt(e){for(var t in dt.instances)dt.instances[t].pop(),delete dt.instances[t];var r=P(".lot\\:field.type\\:query input");r&&p(r)&&r.forEach((function(e){var t,r=_(e),n=new dt(e,null!=(t=K(e,"state"))?t:{});te(n.self,r)})),1===e&&x._.on("change",vt)}dt.instances={},dt.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null},dt.version="3.4.16",x.TP=dt;function ht(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function gt(e,i){void 0===i&&(i={});var o=this;if(!e)return o;if(e.TE)return e.TE;if(!n(o,gt))return new gt(e,i);o.state=i=b({},gt.state,a(i)?{tab:i}:i||{}),o.self=o.source=e,gt.instances[e.id||e.name||h(gt.instances)]=o,e.TE=o;var u=/^([\s\S]*?)$/,s=function(){return e.disabled},l=function(){return e.readOnly},f=function(){return e.value.replace(/\r/g,"")};return o.value=f(),o.get=function(){return!s()&&ht(f())||null},o.let=function(){return e.value=o.value,o},o.set=function(t){return s()||l()||(e.value=t),o},o.$=function(){return new gt.S(e.selectionStart,e.selectionEnd,f())},o.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=p(f()),n=e.scrollHeight),c(r)&&c(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),o},o.blur=function(){return e.blur(),o},o.select=function(){if(s()||l())return e.focus(),o;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i,c,a,u,f=p(r),d=o.$(),v=d.start,h=d.end;if(i=x.pageXOffset||$.scrollLeft||E.scrollLeft,c=x.pageYOffset||$.scrollTop||E.scrollTop,a=e.scrollLeft,u=e.scrollTop,0===f)r[0]=v,r[1]=h;else if(1===f){if(!0===r[0])return e.focus(),e.select(),o;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=a,e.scrollTop=u,x.scroll(i,c),o},o.match=function(e,n){var i=o.$(),c=i.after,a=i.before,u=i.value;if(t(e)){var s=[a.match(e[0]),u.match(e[1]),c.match(e[2])];return r(n)?n.call(o,s[0]||[],s[1]||[],s[2]||[]):[!!s[0],!!s[1],!!s[2]]}var l=u.match(e);return r(n)?n.call(o,l||[]):!!l},o.replace=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return-1===r?c=c.replace(e,t):1===r?i=i.replace(e,t):a=a.replace(e,t),o.set(c+a+i).select(c=p(c),c+p(a))},o.insert=function(e,t,r){var n=u;return r&&o.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),o.replace(n,e,t)},o.wrap=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;return r?o.replace(u,e+"$1"+t):o.set(c+e+a+t+i).select(c=p(c+e),c+p(a))},o.peel=function(e,t,r){var n=o.$(),i=n.after,c=n.before,a=n.value;e=ct(e),t=ct(t);var u=at(e+"$",""),s=at("^"+t,"");return r?o.replace(at("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):u.test(c)&&s.test(i)?(c=c.replace(u,""),i=i.replace(s,""),o.set(c+a+i).select(c=p(c),c+p(a))):o.select()},o.pull=function(e,t){void 0===t&&(t=!0);var r=o.$(),n=r.length,a=r.value;return e=ct(c(e)?e:i.tab),n?t?o.replace(at("^"+e,"gm"),""):o.insert(a.split("\n").map((function(t){return at("^("+e+")*$","").test(t)?t:t.replace(at("^"+e,""),"")})).join("\n")):o.replace(at(e+"$",""),"",-1)},o.push=function(e,t){void 0===t&&(t=!1);var r=o.$().length;return e=c(e)?e:i.tab,r?o.replace(at("^"+(t?"":"(?!$)"),"gm"),e):o.insert(e,-1)},o.trim=function(e,t,r,n,i){void 0===i&&(i=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var c=o.$(),a=c.before,u=c.value,s=c.after,l=ht(a,1),f=ht(s,-1);return a=!1!==e?ht(a,1)+(l||!i?e:""):a,s=!1!==t?(f||!i?t:"")+ht(s,-1):s,!1!==r&&(u=ht(u,-1)),!1!==n&&(u=ht(u,1)),o.set(a+u+s).select(a=p(a),a+p(u))},o.pop=function(){return e.TE?(delete e.TE,o):o},o.state=i,o}gt.esc=ct,gt.instances={},gt.state={tab:"\t"},gt.S=function(e,t,r){var n=this,i=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=p(i),n.start=e,n.value=i,n.toString=function(){return i}},gt.version="3.3.13",gt.x=ut;var mt={_history:[],_historyState:-1,history:function(e){var t=this;return c(e)?c(t._history[e])?t._history[e]:null:t._history},loss:function(e){var t,r=this;return!0===e?(r._history=[],r._historyState=-1,[]):(t=r._history.splice(c(e)?e:r._historyState,1),r._historyState=d(r._historyState-1,[-1]),t)},record:function(e){var t=this,r=t.$(),n=r.end,i=r.start,o=t._history[t._historyState]||[],a=[t.self.value,i,n];return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]||(++t._historyState,t._history[c(e)?e:t._historyState]=a),t},redo:function(){var e,t=this;return t._historyState=d(t._historyState+1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])},undo:function(){var e,t=this;return t._historyState=d(t._historyState-1,[0,p(t._history)-1]),e=t._history[t._historyState],t.set(e[0]).select(e[1],e[2])}};function yt(e,t){return new Promise((function(r,n){var i=x[e].apply(x,t);return i?r(i):n(i)}))}var bt={source:{pairs:{"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},type:null}};["alert","confirm","prompt"].forEach((function(e){bt.source[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(e,r)}}));var kt={toggle:function(e,r,n,i){void 0===i&&(i=!1),r||""===r||(r=e);var o=this,c=o.$(),u=c.after,s=c.before,l=c.value,f=p(r),d=p(e);return n&&r===l.slice(-f)&&e===l.slice(0,d)||r===u.slice(0,f)&&e===s.slice(-d)?o.peel(e,r,n):(!1!==i&&(a(i)?i=[i,i]:t(i)||(i=["",""]),isSet(i[1])||(i[1]=i[0]),o.trim(i[0],i[1])),o.wrap(e,r,n))}};function wt(t,r){var n,i,o=r.state.source.tab||r.state.tab||"\t",c=r.state.source.pairs||{},a=function(e){return Object.values(e)}(c),u=t.key,s=t.queue,l=t+"";if(s.Alt||s.Control)return!0;if(" "===l){var f=r.$(),p=f.after,d=f.before,v=f.value;return n=c[i=d.slice(-1)],!(!v&&n&&i&&n===p[0])||(r.wrap(" "," "),!1)}if("Enter"===l){var h=r.$(),g=h.after,m=h.before,y=h.value,b=m.split("\n").pop().match(/^(\s+)/),k=b&&b[1]||"";if(!y){if(g&&m&&(n=c[i=m.slice(-1)])&&n===g[0])return r.wrap("\n"+k+(i!==n?o:""),"\n"+k).record(),!1;if(k)return r.insert("\n"+k,-1).record(),!1}return!0}if("Backspace"===l){var w=r.$(),x=w.after,E=w.before,$=w.value;x.split("\n")[0];var A=E.split("\n").pop(),L=A.match(/^(\s+)/),T=L&&L[1]||"";return n=c[i=E.slice(-1)],"\\"===i?!0:$?!(x&&E&&n&&n===x[0]&&!E.endsWith("\\"+i))||(r.record().peel(i,n).record(),!1):(n=c[i=E.trim().slice(-1)])&&i&&(x.startsWith(" "+n)&&E.endsWith(i+" ")||x.startsWith("\n"+T+n)&&E.endsWith(i+"\n"+T))?(r.trim("","").record(),!1):A.endsWith(o)?(r.pull(o).record(),!1):!(x&&E&&!E.endsWith("\\"+i)&&n===x[0]&&i===E.slice(-1))||(r.peel(i,n).record(),!1)}var _=r.$(),K=_.after,S=_.before,P=_.start,H=_.value;if("\\"===(i=S.slice(-1)))return!0;if(n=e(K[0],a)?K[0]:c[i],!H&&K&&S&&n&&u===n)return r.select(P+1).record(),!1;for(i in c){if(n=c[i],u===i&&n)return r.wrap(i,n).record(),!1;if(u===n){if(H)return r.record().wrap(i,n).record(),!1;break}}return!0}function xt(e,t){var r=t.state.source.tab||t.state.tab||"\t";e.key,e.queue;var n=e+"";return"Control-]"===n?(t.push(r).record(),!1):"Control-["!==n||(t.pull(r).record(),!1)}function Et(e,t){e.key;var r=e.queue;if(r.Control&&r.Enter){var n=t.$(),i=n.after,o=n.before,c=n.end,a=n.start,u=n.value,s=i.split("\n").shift(),l=o.split("\n").pop(),f=l.match(/^(\s+)/),d=f&&f[1]||"";if(o||i)return r.Shift?(t.select(a-p(l)).wrap(d,"\n").insert(u).record(),!1):(t.select(c+p(s)).wrap("\n"+d,"").insert(u).record(),!1)}return!0}function $t(e,t){var r=e+"";return"Control-y"===r?(t.redo(),!1):"Control-z"!==r||(t.undo(),!1)}function At(t,r){t.key;var n=t+"";if(!t.queue.Control)return!0;var i,o,c,a=r.$(),u=a.after,s=a.before,l=a.end,f=a.start,d=a.value,v=r.state.source.pairs||{},h=[];if(d){for(i in v)(o=v[i])&&h.push("(?:\\"+i+"(?:\\\\.|[^\\"+i+(o!==i?"\\"+o:"")+"])*\\"+o+")");if(h.push("\\w+"),h.push("\\s+"),h.push("[\\s\\S]"),"Control-ArrowLeft"===n)return(c=s.match(at("("+h.join("|")+")$","")))?(r.insert("").select(f-p(c[0])).insert(d),r.record(),!1):(r.select(),!1);if("Control-ArrowRight"===n)return(c=u.match(at("^("+h.join("|")+")","")))?(r.insert("").select(l+p(c[0])-p(d)).insert(d),r.record(),!1):(r.select(),!1)}var g=u.split("\n").shift(),m=s.split("\n").pop(),y=m.match(/^(\s+)/);if(y&&y[1],l+=p(g),f-=p(m),d=m+d+g,"Control-ArrowUp"===n){if(!e("\n",s))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"$2",1),r.replace(/(^|\n)([^\n]*?)$/,"",-1);var b=r.$();return s=b.before,f=b.start,m=s.split("\n").pop(),r.select(f-=p(m)).wrap(d,"\n"),r.select(f,f+p(d)),r.record(),!1}if("Control-ArrowDown"===n){if(!e("\n",u))return r.select(),!1;r.insert(""),r.replace(/^([^\n]*?)(\n|$)/,"",1),r.replace(/(^|\n)([^\n]*?)$/,"$1",-1);var k=r.$();return u=k.after,l=k.end,g=u.split("\n").shift(),r.select(l+=p(g)).wrap("\n",d),l+=1,r.select(l,l+p(d)),r.record(),!1}return!0}var Lt=Ve((function(e){return e.record()}),100);var Tt=bt,_t="[\\w:.-]+",Kt=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},St=function(e){return"</("+e+")>"},Pt="(?:\x3c!--([\\s\\S](?!--\x3e)*)--\x3e|<!((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)>|"+St(_t)+"|<\\?((?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^>'\"])*)\\?>|"+Kt(_t)+"|"+function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?/?>"}(_t)+")",Ht={};function qt(e){if(!e)return"";e=g(e).sort().reduce((function(t,r){return t[r]=e[r],t}),{});var t,r,n="";for(t in e)!1!==(r=e[t])&&null!==r&&(n+=" "+t,!0!==r&&(n+='="'+y(k(r))+'"'));return n}function Ct(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}function Rt(e,t){var r=t.state,n=r.sourceXML.tab||r.tab||"\t",i=e.key,o=e.queue,c=e+"";if(o.Alt||o.Control)return!0;if(["-",">","/","?"," "].includes(i)){var a=t.$(),u=a.after,s=a.before,l=a.value,f=a.start;if("-"===i&&!l&&"<!-"===s.slice(-3))return t.wrap("- "," --"+(">"===u[0]?"":">")).record(),!1;if(">"===i||"/"===i){var d=at(Kt(_t)+"$","").exec(s+">");if(!l&&d)return"/"===i?">"===u[0]?(t.trim("",!1).insert(" /",-1).select(t.$().start+1).record(),!1):(t.trim("",!1).insert(" />",-1).record(),!1):(u.startsWith("></"+d[1]+">")?t.select(f+1).record():u.startsWith("</"+d[1]+">")?t.insert(">",-1).record():t.wrap(">","</"+d[1]+(">"===u[0]?"":">")).record(),!1)}if("?"===i&&!l&&"<"===s.slice(-1))return t.wrap("?","?"+(">"===u[0]?"":">")).record(),!1;if(" "===c&&!l&&("--\x3e"===u.slice(0,3)&&"\x3c!--"===s.slice(-4)||"?>"===u.slice(0,2)&&"<?"===s.slice(0,2)&&/<\?\S*$/.test(s)))return t.wrap(" "," ").record(),!1}if("ArrowLeft"===c){var v=t.$(),h=v.before,g=v.start;if(!v.value){var m=at(Pt+"$","").exec(h);if(m)return t.select(g-p(m[0]),g),!1}}if("ArrowRight"===c){var y=t.$(),b=y.after,k=y.start;if(!y.value){var w=at("^"+Pt,"").exec(b);if(w)return t.select(k,k+p(w[0])),!1}}if("Enter"===c){var x=t.$(),E=x.after,$=x.before,A=x.value,L=$.split("\n").pop().match(/^(\s+)/),T=L&&L[1]||"",_=$.match(at(Kt(_t)+"$",""));if(!A){if(/^[ \t]*-->/.test(E)&&/<!--[ \t]*$/.test($)||/^[ \t]*\?>/.test(E)&&/<\?\S*[ \t]*$/.test($))return t.trim().wrap("\n"+T,"\n"+T).record(),!1;if(_)return E.startsWith("</"+_[1]+">")?t.record().trim().wrap("\n"+T+n,"\n"+T).record():t.record().wrap("\n"+T+n,"\n"+T+"</"+_[1]+">").record(),!1}}if("Backspace"===c){var K=t.$(),S=K.after,P=K.before;if(!K.value){if("\x3c!--"===P.slice(-4))return t.replace(/<!--$/,"",-1),"--\x3e"===S.slice(0,3)&&t.replace(/^-->/,"",1),t.record(),!1;if(/^\s+-->/.test(S)&&/<!--\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;if(/<\?\S*$/.test(P))return t.replace(/<\?\S*$/,"",-1),"?>"===S.slice(0,2)&&t.replace(/^\?>/,"",1),t.record(),!1;if(/^\s+\?>/.test(S)&&/<\?\S*\s+$/.test(P))return t.trim(" "===P.slice(-1)?"":" "," "===S[0]?"":" ").record(),!1;var H=at(Pt+"$",""),q=H.exec(P);if(q){if(" />"===P.slice(-3))return t.replace(/ \/>$/,"/>",-1).record(),!1;if("/>"===P.slice(-2))return t.replace(/\/>$/,">",-1).record(),!1;t.replace(H,"",-1);var C=q[0].slice(1).split(/\s+|>/)[0];return q[0]&&"/"!==q[0][1]&&S.startsWith("</"+C+">")&&t.replace(at("^</"+C+">",""),"",1),t.record(),!1}if(at(Kt(_t)+"\\n(?:"+ct(n)+")?$","").test(P)&&at("^\\s*"+St(_t),"").test(S))return t.trim().record(),!1}}if("Delete"===c){var R=t.$(),j=R.after;if(!R.value){if("--\x3e"===j.slice(0,3))return t.replace(/^-->/,"",1).record(),!1;if("?>"===j.slice(0,2))return t.replace(/^\?>/,"",1).record(),!1;var M=at("^"+Pt,"");if(M.exec(j))return t.replace(M,"",1).record(),!1}}return!0}Ht.insert=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);return!1!==(n=Ct(n))&&this.trim(n[0],""),this.insert("<"+e+qt(r)+(!1!==t?">"+t+"</"+e+">":" />")+(!1!==n?n[1]:""),-1,!0)},Ht.toggle=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$(),c=o.after,a=o.before,u=o.value,s=Kt(e),l=St(e),f=at(s+"$",""),p=at("^"+l,""),d=f.test(a),v=p.test(c);return v&&d?i.replace(p,"",1).replace(f,"",-1):(f=at("^"+s,""),p=at(l+"$",""),d=f.test(u),(v=p.test(u))&&d&&i.insert(u=u.replace(p,"").replace(f,"")),!u&&t&&i.insert(t),!1!==(n=Ct(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+qt(r)+">","</"+e+">"))},Ht.wrap=function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r={}),void 0===n&&(n=!1);var i=this,o=i.$();return o.after,o.before,!o.value&&t&&i.insert(t),!1!==(n=Ct(n))&&i.trim(n[0],n[1]),i.wrap("<"+e+qt(r)+">","</"+e+">")};var jt={source:{type:"XML"},sourceXML:{}},Mt=fe.protocol,Ot=Ht.toggle,Dt="[\\w:.-]+",Ut=function(e){return"<("+e+")(\\s(?:'(?:\\\\.|[^'])*'|\"(?:\\\\.|[^\"])*\"|[^/>'\"])*)?>"},Wt=function(e){return"</("+e+")>"};function Nt(e){return!1!==e&&(a(e)?e=[e,e]:t(e)||(e=["",""]),c(e[1])||(e[1]=e[0])),e}var zt={};zt.blocks=function(){var e=this;return e.record(),function(e){var t=/<(?:h([1-6])|p)(\s[^>]*)?>$/,r=/^<\/(?:h[1-6]|p)>/;e.match([t,/.*/,r],(function(n,i,o){var c=this,a=+(n[1]||0),u=n[2]||"",s=e.state.sourceHTML.elements||{},l=n[0]?s[n[0].slice(1,-1).split(/\s/)[0]]:["","",{}];!u&&l[2]&&(u=qt(l[2])),c.replace(t,"",-1),c.replace(/\n+/g," "),c.replace(r,"",1);var f=l[3]||s.h1[3];!1!==(f=Nt(f))&&c.trim(f[0],f[1]),a?++a>6?(c.wrap("<"+s.p[0]+(u||qt(s.p[2]))+">","</"+s.p[0]+">"),i[0]&&i[0]!==s.h6[1]||c.insert(s.p[1])):(c.wrap("<"+s["h"+a][0]+(u||qt(s["h"+a][2]))+">","</"+s["h"+a][0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s["h"+a][1])):(c.wrap("<"+s.h1[0]+(u||qt(s.h1[2]))+">","</"+s.h1[0]+">"),i[0]&&i[0]!==s.p[1]||c.insert(s.h1[1]))}))}(e),e.record(),!1},zt.bold=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ot.apply(this,e.b),!1},zt.code=function(){var e=this;return e.record(),function(e){var t=/<(?:pre|code)(?:\s[^>]*)?>(?:\s*<code(?:\s[^>]*)?>)?$/,r=/^(?:<\/code>\s*)?<\/(?:pre|code)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state.sourceHTML.elements;a.replace(t,"",-1),a.replace(r,"",1),o[0]?/^(?:<\/code>\s*)?<\/pre>/.test(o[0])?(!1!==(c=Nt(c=u[""][3]))&&a.trim(c[0],c[1]),a.insert(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(i[0]))):o[0].slice(0,7)==="</"+u.code[0]+">"&&(!1!==(c=Nt(c=u.pre[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.pre[0]+qt(u.pre[2])+"><"+u.code[0]+qt(u.code[2])+">","</"+u.code[0]+"></"+u.pre[0]+">")):(!1!==(c=Nt(c=u.code[3]))&&a.trim(c[0],c[1]),a.wrap("<"+u.code[0]+qt(u.code[2])+">","</"+u.code[0]+">").insert(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(i[0]||u.code[1])))}))}(e),e.record(),!1},zt.image=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$(),o=i.after,c=i.before,a=i.value,u=n.state,s=u.sourceHTML.elements||{},l=u.sourceHTML.tab||u.source.tab||u.tab||"\t",f=c.split("\n").pop().match(/^(\s+)/),p=f&&f[1]||"",d=u.source.prompt;return r(d)&&d(e,a&&/^https?:\/\/\S+$/.test(a)?a:t||Mt+"//").then((function(e){if(e){var t=s.img;a&&(t[2].alt=a,n.record());var r=t[3]||!1;!1!==(r=Nt(r))&&n.trim(r[0],""),t[2].src=e,o&&"\n"!==o[0]||c&&"\n"!==c.slice(-1)?n.insert("<"+t[0]+qt(t[2])+">"+(!1!==r?r[1]:""),-1,!0):(!1!==(r=Nt(r=s.figure[3]||!1))&&n.trim(r[0],r[1]),n.insert(""),n.wrap(p+"<"+s.figure[0]+qt(s.figure[2])+">\n"+p+l,p+"\n</"+s.figure[0]+">"),n.insert("<"+t[0]+qt(t[2])+">\n"+p+l,-1),n.wrap("<"+s.figcaption[0]+qt(s.figcaption[2])+">","</"+s.figcaption[0]+">").insert(s.figcaption[1]))}else n.focus()})),n.record(),!1},zt.italic=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ot.apply(this,e.i),!1},zt.link=function(e,t){void 0===e&&(e="URL:");var n=this,i=n.$().value,o=n.state,c=o.sourceHTML.elements||{},a=o.source.prompt;return r(a)&&a(e,i&&/^https?:\/\/\S+$/.test(i)?i:t||Mt+"//").then((function(e){if(e){var t=c.a;i&&n.record(),t[2].href=e;var r={};/[.\/?&#]/.test(e[0])||/^(data|javascript|mailto):/.test(e)||-1===e.indexOf("://")||(r.rel="nofollow",r.target="_blank");var o=Nt(t[3]||!1);!1!==o||i||(o=[" "," "]),Ot.call(n,t[0],t[1],b(r,t[2]),o)}else n.focus()})),n.record(),!1},zt.quote=function(){var e=this;return e.record(),function(e){var t=/<(blockquote|q)(?:\s[^>]*)?>\s*$/,r=/^\s*<\/(blockquote|q)>/;e.match([t,/.*/,r],(function(n,i,o){var c,a=this,u=e.state,s=u.sourceHTML.tab||u.source.tab||u.tab||"\t",l=e.state.sourceHTML.elements||{};a.replace(t,"",-1),a.replace(r,"",1),o[0]?l.blockquote[0]===o[1]?!1!==(c=Nt(l[""][3]))&&a.trim(c[0],c[1]):l.q[0]===o[1]&&(!1!==(c=Nt(l.blockquote[3]))&&a.trim(c[0],c[1]),a.wrap("<"+l.blockquote[0]+qt(l.blockquote[2])+">\n","\n</"+l.blockquote[0]+">").insert(i[0]||l.blockquote[1]),a.replace(at("(^|\\n)"),"$1"+s)):(!1!==(c=Nt(l.q[3]))&&a.trim(c[0],c[1]),a.wrap("<"+l.q[0]+qt(l.q[2])+">","</"+l.q[0]+">").insert(i[0]||l.q[1]),a.replace(at("(^|\\n)"+s),"$1"))}))}(e),e.record(),!1},zt.underline=function(){var e=this.state.sourceHTML.elements||{};return this.record(),Ot.apply(this,e.u),!1};var Bt={source:{type:"HTML"},sourceHTML:{elements:{"":["","text goes here…",{},""],a:["a","link text goes here…",{}],area:["area",!1,{}],b:["strong","text goes here…",{}],base:["base",!1,{href:""},"\n"],blockquote:["blockquote","",{},"\n"],br:["br",!1,{},["","\n"]],button:["button","text goes here…",{name:"",type:"submit"}," "],caption:["caption","caption goes here…",{},"\n"],code:["code","code goes here…",{}," "],col:["col",!1,{},"\n"],em:["em","text goes here…",{}],figcaption:["figcaption","caption goes here…",{},"\n"],figure:["figure","",{},"\n"],h1:["h1","title goes here…",{},"\n"],h2:["h2","title goes here…",{},"\n"],h3:["h3","title goes here…",{},"\n"],h4:["h4","title goes here…",{},"\n"],h5:["h5","title goes here…",{},"\n"],h6:["h6","title goes here…",{},"\n"],hr:["hr",!1,{},"\n"],i:["em","text goes here…",{}],img:["img",!1,{alt:"",src:""}," "],input:["input",!1,{name:"",type:"text"}," "],li:["li","list item goes here…",{},"\n"],link:["link",!1,{href:""},"\n"],meta:["meta",!1,{},"\n"],ol:["ol","",{},"\n"],option:["option","option goes here…",{},"\n"],p:["p","paragraph goes here…",{},"\n"],param:["param",!1,{name:""},"\n"],pre:["pre","text goes here…",{},"\n"],q:["q","quote goes here…",{}," "],script:["script","",{},"\n"],select:["select","",{name:""}," "],source:["source",!1,{src:""},"\n"],strong:["strong","text goes here…",{}],style:["style","",{},"\n"],td:["td","data goes here…",{},"\n"],textarea:["textarea","text goes here…",{name:""}," "],th:["th","title goes here…",{},"\n"],tr:["tr","",{},"\n"],track:["track",!1,{},"\n"],u:["u","text goes here…",{}],ul:["ul","",{},"\n"],wbr:["wbr",!1,{},["","\n"]]}}};Object.assign(gt.prototype,mt,kt),gt.state=b({},gt.state,Tt,jt,Bt),delete gt.state.source.type;var It=Ve((function(e){return e.pull()}),1e3);function Xt(e){this.K.pull()}function Vt(e){this.K.pull()}function Ft(e){var t,r,n=this.TE,i=this.K,o=e.key,c=n.state.source.type;if(ge(e),i.push(o),t=i.command())!1===(r=i.fire(t))?he(e):null===r&&console.error("Unknown command:",t);else{if("HTML"===c)return void(function(e,t){var r=t.state,n=r.sourceHTML.tab||r.source.tab||r.tab||"\t",i=r.sourceHTML.elements||{},o=e.key,c=e.queue;if(c.Control){var a=t.$(),u=a.after,s=a.before,l=a.end,f=a.start;a.value;var d=u.split("\n").shift(),v=s.split("\n").pop(),h=v.match(/^(\s+)/),g=h&&h[1]||"";if("Enter"===o){var m=d.match(at(Wt(Dt)+"\\s*$","")),y=i[m&&m[1]||"p"]||i.p;return y[3]=["\n"+g,"\n"+g],t.select(c.Shift?f-p(v):l+p(d)),Ot.apply(t,y),t.record(),!1}}if(c.Alt||c.Control)return!0;if(">"===o){var b,k=t.$(),w=k.after,x=k.before,E=k.end,$=(x.split("\n").pop()+">").match(at(Ut(Dt)+"$","")),A=i[b=$&&$[1]||""];return!b||(A?!1!==A[1]?(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1).insert(A[1])):">"===w[0]?t.insert(" /",-1).select(E+3):t.insert(" />",-1):(">"===w[0]?t.select(E+1):t.insert(">",-1),t.insert("</"+b+">",1)),t.record(),!1)}if("Enter"===o){var L,T,_=t.$(),K=_.after,S=_.before,P=_.value,H=K.split("\n").shift(),q=S.split("\n").pop(),C=q.match(/^(\s+)/),R=C&&C[1]||"",j=["li","option","p","td","th"],M=["script","style"];if(L=q.match(at(Ut(Dt)+"$",""))){var O=i[L[1]];if(O&&!1===O[1])return t.insert("\n"+R,-1).record(),!1}if(K&&S){for(var D=0,U=p(j);D<U;++D)if(at("^"+Wt(T=j[D]),"").test(H)&&(L=q.match(at("^\\s*"+Ut(T),""))))return L[0]===q?(i[T]&&P&&i[T][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):Ot.call(t,T),t.record(),!1):(t.insert("</"+T+">\n"+R+"<"+T+(L[2]||"")+">",-1).insert(i[T]&&i[T][1]||"").record(),!1);for(var W=0,N=p(M);W<N;++W)if(at("^"+Wt(T=M[W]),"").test(H)&&at(Ut(T)+"$","").test(q))return t.wrap("\n"+R,"\n"+R).insert(i[T]&&i[T][1]||"").record(),!1;for(var z=1;z<7;++z)if(H.startsWith("</"+i["h"+z][0]+">")&&q.match(at("^\\s*"+Ut(i["h"+z][0]),"")))return i["h"+z]&&P&&i["h"+z][1]===P?t.insert("").wrap("\n"+R+n,"\n"+R):t.insert("</"+i["h"+z][0]+">\n"+R+"<"+i.p[0]+">",-1).replace(at("^"+Wt(i["h"+z][0])),"</"+i.p[0]+">",1).insert(i.p[1]),t.record(),!1}}return!0}(i,n)&&Rt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||he(e));if("XML"===c)return void(Rt(i,n)&&wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||he(e));wt(i,n)&&xt(i,n)&&Et(i,n)&&$t(i,n)&&At(i,n)||he(e)}It(i)}function Jt(e){var t=this.TE,r=this.K,n=e.key;!function(e,t){Lt(t)}(0,t),r.pull(n)}function Yt(t){var r=this.TE;!function(t,r){t.key,t.queue.Control||x.setTimeout((function(){var t=r.$(),n=t.after,i=t.before,o=t.value;if(!o)for(var c,a,u=Pt.split("([\\w:.-]+)").join("((?:[\\w:.-]|\ufeff)+)"),s=at(u),l=i+o+"\ufeff"+n;c=s.exec(l);)if(e("\ufeff",c[0])){r.select(a=c.index,a+p(c[0])-1);break}}),1)}(this.K,r)}function Gt(e){var t,r;for(var n in gt.instances)(t=gt.instances[n]).loss().pop(),delete t.self.K,delete gt.instances[n],r=t.self,ve("blur",r,Xt),ve("input",r,Vt),ve("keydown",r,Ft),ve("keyup",r,Jt),ve("mousedown",r,Yt),ve("touchstart",r,Yt);var i,o,c,a,u=P(".lot\\:field.type\\:source textarea");u&&p(u)&&u.forEach((function(e){var t;i=new gt(e,null!=(t=K(e,"state"))?t:{}),c=i.state,a=c.source.type,(o=new x.K(i)).keys.Escape=function(){var e=R(this.source,"[tabindex]:not(.not\\:active)");return!e||(e.focus(),!1)},"HTML"===a&&(o.commands=zt,o.keys["Control-b"]="bold",o.keys["Control-e"]="code",o.keys["Control-h"]="blocks",o.keys["Control-i"]="italic",o.keys["Control-k"]="link",o.keys["Control-o"]="image",o.keys["Control-q"]="quote",o.keys["Control-u"]="underline"),c.commands=o.commands,c.keys=o.keys,e.K=o,function(e){ye("blur",e,Xt),ye("input",e,Vt),ye("keydown",e,Ft),ye("keyup",e,Jt),ye("mousedown",e,Yt),ye("touchstart",e,Yt),e.TE.record()}(e)})),1===e&&(x._.on("change",Gt),["alert","confirm","prompt"].forEach((function(e){x._.dialog[e]&&(gt.state.source[e]=x._.dialog[e])})))}x.TE=gt;var Qt=":scope>.lot\\:file[tabindex]:not(.not\\:active),:scope>.lot\\:folder[tabindex]:not(.not\\:active)";function Zt(e){e&&r(e.focus)&&e.focus()}function er(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=C(i);t&&N(t,"not:active");)t=C(t);for(r=M(i);r&&N(r,"not:active");)r=M(r);"ArrowDown"===o?(Zt(t),n=!0):"ArrowUp"===o?(Zt(r),n=!0):"End"===o?(Zt([].slice.call(P(Qt,R(i))).pop()),n=!0):"Home"===o&&(Zt(S(Qt,R(i))),n=!0),n&&(he(e),ge(e))}}}function tr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;if(r===e.target){if(!i&&!o&&!c)"ArrowDown"===n||"Home"===n?(Zt(S(Qt,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(Zt([].slice.call(P(Qt,r)).pop()),t=!0);t&&(he(e),ge(e))}}}var rr=":scope>ul>li>a[href]:not(.not\\:active)";function nr(e){e&&r(e.focus)&&e.focus()}function ir(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(!a&&!u&&!s){if(t=R(o)){for(r=C(t);r&&(N(r,"as:separator")||N(r,"not:active"));)r=C(r);for(n=M(t);n&&(N(n,"as:separator")||N(n,"not:active"));)n=M(n)}"ArrowLeft"===c?(nr(n&&L(n)),i=!0):"ArrowRight"===c?(nr(r&&L(r)),i=!0):"End"===c?((t=R(o,".lot\\:links[tabindex]"))&&nr([].slice.call(P(rr,t)).pop()),i=!0):"Home"===c&&((t=R(o,".lot\\:links[tabindex]"))&&nr(S(rr,t)),i=!0)}i&&(he(e),ge(e))}}function or(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowRight"===n||"Home"===n?(nr(S(rr,r)),t=!0):"ArrowLeft"!==n&&"End"!==n||(nr([].slice.call(P(rr,r)).pop()),t=!0)),t&&(he(e),ge(e)))}}var cr="a[href]:not(.not\\:active)";function ar(e){e&&r(e.focus)&&e.focus()}function ur(e,t){P(".lot\\:menu[tabindex].is\\:enter").forEach((function(r){e!==r&&(V(R(r),"is:active"),V(M(r),"is:active"),V(r,"is:enter"),t&&Q(t,"aria-expanded","false"))}))}function sr(){ur(0)}function lr(e){if(!e.defaultPrevented){var t=this,r=C(t);ur(r,t),x.setTimeout((function(){le(r,"is:enter"),le(R(t),"is:active"),le(t,"is:active"),Q(t,"aria-expanded",N(t,"is:active")?"true":"false")}),1),he(e),ge(e)}}function fr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key;if(r=R(c)){for(n=C(r);n&&(N(n,"as:separator")||N(n,"not:active"));)n=C(n);for(i=M(r);i&&(N(i,"as:separator")||N(i,"not:active"));)i=M(i)}"ArrowDown"===a?(ar(n&&L(n)),o=!0):"ArrowLeft"===a||"Escape"===a||"Tab"===a?((r=R(c,".lot\\:menu[tabindex].is\\:enter"))?(V(R(c),"is:active"),V(r,"is:enter"),V(c,"is:active"),"Tab"!==a&&ar(M(r))):"Escape"===a&&ar(R(c,".lot\\:menu[tabindex]")),o="Tab"!==a):"ArrowRight"===a?((n=C(c))&&N(n,"lot:menu")&&(ee(R(c),"is:active"),ee(n,"is:enter"),ee(c,"is:active"),x.setTimeout((function(){ar(S(cr,n))}),1)),o=!0):"ArrowUp"===a?((t=i&&L(i))?ar(t):(t=R(c,".lot\\:menu[tabindex].is\\:enter"))&&(t=M(t))&&(de("click",t),ar(t)),o=!0):"End"===a?((r=R(c,".lot\\:menu[tabindex]"))&&ar([].slice.call(P(cr,r)).pop()),o=!0):"Home"===a&&((r=R(c,".lot\\:menu[tabindex]"))&&ar(S(cr,r)),o=!0),o&&(he(e),ge(e))}}function pr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(ar(S(cr,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(ar([].slice.call(P(cr,r)).pop()),t=!0)),t&&(he(e),ge(e)))}}function dr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=C(r),o=R(r);i&&o&&N(i,"lot:menu")&&(" "===n||"Enter"===n||"Tab"===n?"Tab"===n?N(i,"is:enter")&&de("click",r):(de("click",r),t=!0):"ArrowDown"===n&&(N(i,"is:enter")||de("click",r),x.setTimeout((function(){ar(S(cr,i))}),1),t=!0)),t&&(he(e),ge(e))}}var vr=":scope>.lot\\:page[tabindex]:not(.not\\:active)";function hr(e){e&&r(e.focus)&&e.focus()}function gr(e){if(!e.defaultPrevented){var t,r,n,i=this,o=e.key;if(i===e.target){for(t=C(i);t&&N(t,"not:active");)t=C(t);for(r=M(i);r&&N(r,"not:active");)r=M(r);"ArrowDown"===o?(hr(t),n=!0):"ArrowUp"===o?(hr(r),n=!0):"End"===o?(hr([].slice.call(P(vr,R(i))).pop()),n=!0):"Home"===o&&(hr(S(vr,R(i))),n=!0),n&&(he(e),ge(e))}}}function mr(e){if(!e.defaultPrevented){var t,r=this,n=e.key,i=e.altKey,o=e.ctrlKey,c=e.shiftKey;r===e.target&&(i||o||c||("ArrowDown"===n||"Home"===n?(hr(S(vr,r)),t=!0):"ArrowUp"!==n&&"End"!==n||(hr([].slice.call(P(vr,r)).pop()),t=!0)),t&&(he(e),ge(e)))}}var yr='a[target^="stack:"]:not(.not\\:active)';function br(e){e&&r(e.focus)&&e.focus()}function kr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a||"ArrowRight"===a||"PageDown"===a){if(n=R(R(c)))for(r=C(n);r&&N(r,"not:active");)r=C(r);(t=r&&L(r))&&("ArrowRight"===a&&N(R(t),"can:toggle")||de("click",L(t)),br(L(t))),o=!0}else if("ArrowUp"===a||"ArrowLeft"===a||"PageUp"===a){if(n=R(R(c)))for(i=M(n);i&&N(i,"not:active");)i=M(i);(t=i&&L(i))&&("ArrowLeft"===a&&N(R(t),"can:toggle")||de("click",L(t)),br(L(t))),o=!0}else" "===a||"Enter"===a?(N(R(R(c)),"can:toggle")&&(de("click",c),br(c)),o=!0):"End"===a?((n=R(c,".lot\\:stacks[tabindex]"))&&(t=[].slice.call(P(yr,n)).pop())&&(de("click",t),br(t)),o=!0):"Home"===a&&((n=R(c,".lot\\:stacks[tabindex]"))&&(t=S(yr,n))&&(de("click",t),br(t)),o=!0);o&&(he(e),ge(e))}}function wr(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=S(yr+".is\\:current",o))&&R(R(t)),"PageDown"===c?((t=(r=t&&C(t))&&S(yr,r))&&(de("click",t),br(t)),i=!0):"PageUp"===c&&((t=(n=t&&M(t))&&S(yr,n))&&(de("click",t),br(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=S(yr,o))&&(de("click",t),br(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(P(yr,o)).pop())&&(de("click",t),br(t)),i=!0)}i&&(he(e),ge(e))}}var xr='a[target^="tab:"]:not(.not\\:active)';function Er(e){e&&r(e.focus)&&e.focus()}function $r(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey;if(!u&&!s)if("ArrowDown"===a){if(N(c,"can:toggle")&&!N(c,"is:current"))t=c;else{if(n=R(c))for(r=C(n);r&&N(r,"not:active");)r=C(r);t=r&&L(r)}t&&(de("click",t),Er(t)),o=!0}else if("ArrowLeft"===a||"PageUp"===a){if(n=R(c))for(i=M(n);i&&N(i,"not:active");)i=M(i);(t=i&&L(i))&&(de("click",t),Er(t)),o=!0}else if("ArrowRight"===a||"PageDown"===a){if(n=R(c))for(r=C(n);r&&N(r,"not:active");)r=C(r);(t=r&&L(r))&&(de("click",t),Er(t)),o=!0}else if("ArrowUp"===a){if(N(c,"can:toggle")&&N(c,"is:current"))t=c;else{if(n=R(c))for(i=M(n);i&&N(i,"not:active");)i=M(i);t=i&&L(i)}t&&(de("click",t),Er(t)),o=!0}else" "===a||"Enter"===a?(N(c,"can:toggle")&&(de("click",c),Er(c)),o=!0):"End"===a?((n=R(c,".lot\\:tabs[tabindex]"))&&(t=[].slice.call(P(xr,n)).pop())&&(de("click",t),Er(t)),o=!0):"Home"===a&&((n=R(c,".lot\\:tabs[tabindex]"))&&(t=S(xr,n))&&(de("click",t),Er(t)),o=!0);o&&(he(e),ge(e))}}function Ar(e){if(!e.defaultPrevented){var t,r,n,i,o=this,c=e.key,a=e.altKey,u=e.ctrlKey,s=e.shiftKey;if(a&&u&&!s)t=(t=S(xr+".is\\:current",o))&&R(t),"PageDown"===c?((t=(r=t&&C(t))&&L(r))&&(de("click",t),Er(t)),i=!0):"PageUp"===c&&((t=(n=t&&M(t))&&L(n))&&(de("click",t),Er(t)),i=!0);else if(!a&&!u&&!s){if(o!==e.target)return;"ArrowDown"===c||"ArrowRight"===c||"Home"===c||"PageDown"===c?((t=S(xr,o))&&(de("click",t),Er(t)),i=!0):"ArrowUp"!==c&&"ArrowLeft"!==c&&"End"!==c&&"PageUp"!==c||((t=[].slice.call(P(xr,o)).pop())&&(de("click",t),Er(t)),i=!0)}i&&(he(e),ge(e))}}var Lr='a[href]:not([tabindex="-1"]):not(.not\\:active),button:not(:disabled):not([tabindex="-1"]):not(.not\\:active),input:not(:disabled):not([tabindex="-1"]):not(.not\\:active),select:not(:disabled):not([tabindex="-1"]):not(.not\\:active),[tabindex]:not([tabindex="-1"]):not(.not\\:active)';function Tr(e){e&&r(e.focus)&&e.focus()}function _r(e){e&&r(e.select)&&e.select()}function Kr(e){if(!e.defaultPrevented){var t,r,n,i,o,c=this,a=e.key,u=e.altKey,s=e.ctrlKey,l=e.shiftKey;if(!u&&!s&&!l){for(n=C(c);n&&N(n,"not:active");)n=C(n);for(i=M(c);i&&N(i,"not:active");)i=M(i);"ArrowLeft"===a?(o=!("selectionStart"in c&&0!==c.selectionStart))&&(Tr(i),_r(i)):"ArrowRight"===a?(o=!("selectionEnd"in c&&c.selectionEnd<p(c.value||"")))&&(Tr(n),_r(n)):"End"===a?(o=!("selectionEnd"in c&&p(c.value||"")))&&(r=R(c,".lot\\:tasks[tabindex]"))&&(t=[].slice.call(P(Lr,r)).pop())&&(Tr(t),_r(t)):"Home"===a&&(o=!("selectionStart"in c&&p(c.value||"")))&&(r=R(c,".lot\\:tasks[tabindex]"))&&(t=S(Lr,r))&&(Tr(t),_r(t))}o&&(he(e),ge(e))}}function Sr(e){if(!e.defaultPrevented){var t,r,n=this,i=e.key,o=e.altKey,c=e.ctrlKey,a=e.shiftKey;n===e.target&&(o||c||a||("ArrowLeft"===i||"End"===i?((t=[].slice.call(P(Lr,n)).pop())&&(Tr(t),_r(t)),r=!0):"ArrowRight"!==i&&"Home"!==i||((t=S(Lr,n))&&(Tr(t),_r(t)),r=!0)),r&&(he(e),ge(e)))}}function Pr(e){void 0===e&&(e={});var n=this;return n.command=function(e){if(a(e))return e===n.toString();var t=n.keys[n.toString()];return!!c(t)&&t},n.commands={},n.fire=function(e){var i,o,u=n.source;if(r(e))i=e.call(u),o=!0;else if(a(e)&&(e=n.commands[e]))i=e.call(u),o=!0;else if(t(e)){var s=e[1]||[];(e=n.commands[e[0]])&&(i=e.apply(u,s),o=!0)}return o?!c(i)||i:null},n.key=null,n.keys={},n.pull=function(e){return n.key=null,c(e)?(delete n.queue[e],n):(n.queue={},n)},n.push=function(e){return n.queue[n.key=e]=1,n},n.queue={},n.source=e,n.toString=function(){return g(n.queue).join("-")},n}var Hr=Ve((function(e){return e.pull()}),1e3),qr=new Pr(x);qr.keys.Escape=function(){var e=w.activeElement,t=e&&R(R(e),"[tabindex]:not(.not\\:active)");return console.log([e,t]),t&&t.focus(),!1},qr.keys.F3=function(){var e,t=(e="get",w.forms[e]||null),r=t&&t.query;return r&&r.focus(),!1},qr.keys.F10=function(){var e,t=S(".lot\\:bar a:any-link");return t&&(t.focus(),(e=R(t))&&N(e,"has:menu")&&t.click()),!1},ye("blur",x,(function(e){return qr.pull()})),ye("keydown",x,(function(e){qr.push(e.key);var t=qr.command();if(t){var r=qr.fire(t);!1===r?he(e):null===r&&console.error("Unknown command:",t)}Hr(qr)})),ye("keyup",x,(function(e){return qr.pull(e.key)}));var Cr={commands:qr.commands,keys:qr.keys},Rr=Ge(Cr),jr=Rr.fire;Rr.hooks,Rr.off,Rr.on,x.K=Pr,x._=Cr,ye("beforeload",w,(function(){return jr("let")})),ye("load",w,(function(){return jr("get")})),ye("DOMContentLoaded",w,(function(){return jr("set")})),function e(t){var r=P(".lot\\:bar[tabindex]");r&&p(r)&&r.forEach((function(e){P(ke,e).forEach((function(e){ye("keydown",e,Ee)})),ye("keydown",e,xe)})),1===t&&x._.on("change",e)}(1),1===1&&(x._.dialog=Se),ot(1),vt(1),Gt(1),function e(t){var r=P(".lot\\:files[tabindex],.lot\\:folders[tabindex]");r&&p(r)&&r.forEach((function(e){P(Qt,e).forEach((function(e){ye("keydown",e,er)})),ye("keydown",e,tr)})),1===t&&x._.on("change",e)}(1),function e(t){var r=P(".lot\\:links[tabindex]");r&&p(r)&&r.forEach((function(e){var t=P(rr,e);t&&p(t)&&t.forEach((function(e){ye("keydown",e,ir)})),ye("keydown",e,or)})),1===t&&x._.on("change",e)}(1),function e(t){ve("click",w,sr);var r=P(".has\\:menu"),n=P(".lot\\:menu[tabindex] "+cr);r&&p(r)&&(r.forEach((function(e){var t=S(".lot\\:menu[tabindex]",e),r=M(t);t&&r&&(ye("click",r,lr),ye("keydown",r,dr))})),ye("click",w,sr)),n&&p(n)&&n.forEach((function(e){ye("keydown",e,fr)}));var i=P(".lot\\:menu[tabindex]");i&&p(i)&&i.forEach((function(e){ye("keydown",e,pr)})),1===t&&x._.on("change",e)}(1),function e(t){var r=P(".lot\\:pages[tabindex]");r&&p(r)&&r.forEach((function(e){P(vr,e).forEach((function(e){ye("keydown",e,gr)})),ye("keydown",e,mr)})),1===t&&x._.on("change",e)}(1),function e(t){var r=P(".lot\\:stacks[tabindex]");r&&p(r)&&r.forEach((function(e){var t,r,n=[].slice.call(T(e)),i=ne("input");function o(e){var o,c=this,a=R(R(c)),u=R(a,".lot\\:stacks");N(a,"has:link")||(n.forEach((function(e){e!==a&&(V(e,"is:current"),V(S('a[target^="stack:"]',e),"is:current"))})),N(a,"can:toggle")?(le(c,"is:current"),le(a,"is:current")):(ee(c,"is:current"),ee(a,"is:current")),o=N(c,"is:current"),i.value=r=o?K(a,"value"):null,le(u,"has:current",o),x._.fire.call(a,"change.stack",[r,t]),he(e))}i.type="hidden",i.name=t=K(e,"name"),t&&Z(e,i),n.forEach((function(e){var t=S(yr,e);ye("click",t,o),ye("keydown",t,kr)}));var c=n.find((function(e,t){return 0!==t&&N(e,"is:current")}));c&&(i.value=K(c,"value")),ye("keydown",e,wr)})),1===t&&x._.on("change",e)}(1),function e(t){var r=P(".lot\\:tabs[tabindex]");r&&p(r)&&r.forEach((function(e){var t,r,n=[].slice.call(T(e)),i=[].slice.call(P(xr,n.shift())),o=ne("input");function c(e){var c,a=this,u=n[a._tabIndex],s=R(a),l=R(s,".lot\\:tabs");N(s,"has:link")||(i.forEach((function(e){if(e!==a){V(R(e),"is:current"),V(e,"is:current"),Q(e,"aria-selected","false"),Q(e,"tabindex","-1");var t=n[e._tabIndex];t&&V(t,"is:current")}})),N(s,"can:toggle")?(le(s,"is:current"),le(a,"is:current"),Q(a,"aria-selected",N(a,"is:current")?"true":"false"),Q(a,"tabindex",N(a,"is:current")?"0":"-1")):(ee(s,"is:current"),ee(a,"is:current"),Q(a,"aria-selected","true"),Q(a,"tabindex","0")),c=N(a,"is:current"),u&&(o.value=r=c?K(a,"value"):null,le(u,"is:current",c),le(l,"has:current",c),x._.fire.call(u,"change.tab",[r,t])),he(e))}o.type="hidden",o.name=t=K(e,"name"),t&&Z(e,o),i.forEach((function(e,t){e._tabIndex=t,ye("click",e,c),ye("keydown",e,$r)}));var a=i.find((function(e,t){return 0!==t&&N(R(e),"is:current")}));a&&(o.value=K(a,"value")),ye("keydown",e,Ar)})),1===t&&x._.on("change",e)}(1),function e(t){var r=P(".lot\\:tasks[tabindex]");r&&p(r)&&r.forEach((function(e){var t=P(Lr,e);t&&p(t)&&t.forEach((function(e){ye("keydown",e,Kr)})),ye("keydown",e,Sr)})),1===t&&x._.on("change",e)}(1)}();